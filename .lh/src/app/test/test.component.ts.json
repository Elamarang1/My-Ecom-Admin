{
    "sourceFile": "src/app/test/test.component.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 25,
            "patches": [
                {
                    "date": 1749784341955,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1749784354993,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,12 +1,12 @@\n import { HttpClient } from '@angular/common/http';\r\n import { Component } from '@angular/core';\r\n-import { FormGroup, FormBuilder, FormArray, FormControl } from '@angular/forms';\r\n+import { FormGroup, FormBuilder, FormArray, FormControl, ReactiveFormsModule } from '@angular/forms';\r\n \r\n @Component({\r\n   selector: 'app-test',\r\n   standalone: true,\r\n-  imports: [],\r\n+  imports: [ReactiveFormsModule],\r\n   templateUrl: './test.component.html',\r\n   styleUrl: './test.component.scss'\r\n })\r\n export class TestComponent  {\r\n"
                },
                {
                    "date": 1749784415063,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,12 +1,13 @@\n+import { NgFor } from '@angular/common';\r\n import { HttpClient } from '@angular/common/http';\r\n import { Component } from '@angular/core';\r\n import { FormGroup, FormBuilder, FormArray, FormControl, ReactiveFormsModule } from '@angular/forms';\r\n \r\n @Component({\r\n   selector: 'app-test',\r\n   standalone: true,\r\n-  imports: [ReactiveFormsModule],\r\n+  imports: [ReactiveFormsModule,NgFor],\r\n   templateUrl: './test.component.html',\r\n   styleUrl: './test.component.scss'\r\n })\r\n export class TestComponent  {\r\n"
                },
                {
                    "date": 1749784541791,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,8 +52,12 @@\n       variant_id: this.fb.array([]),\r\n     });\r\n     this.images.push(imageGroup);\r\n   }\r\n+getVariantIdControls(imageIndex: number): FormControl[] {\r\n+  const formArray = this.images.at(imageIndex).get('variant_id') as FormArray;\r\n+  return formArray.controls as FormControl[];\r\n+}\r\n \r\n   // --------- Add Variant ID to Image ---------\r\n   addVariantIdToImage(imageIndex: number) {\r\n     const variantIdArray = this.images.at(imageIndex).get('variant_id') as FormArray;\r\n"
                },
                {
                    "date": 1749877218135,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n import { NgFor } from '@angular/common';\r\n import { HttpClient } from '@angular/common/http';\r\n import { Component } from '@angular/core';\r\n-import { FormGroup, FormBuilder, FormArray, FormControl, ReactiveFormsModule } from '@angular/forms';\r\n+import { FormGroup, FormBuilder, FormArray, FormControl, ReactiveFormsModule, Validators } from '@angular/forms';\r\n \r\n @Component({\r\n   selector: 'app-test',\r\n   standalone: true,\r\n@@ -11,67 +11,87 @@\n   styleUrl: './test.component.scss'\r\n })\r\n export class TestComponent  {\r\n   productForm: FormGroup;\r\n+  uploadedImages: any[] = [];\r\n \r\n   constructor(private fb: FormBuilder, private http: HttpClient) {\r\n     this.productForm = this.fb.group({\r\n+      product_name: ['', Validators.required],\r\n       variants: this.fb.array([]),\r\n       images: this.fb.array([]),\r\n     });\r\n   }\r\n \r\n-  // --------- Form Array Getters ---------\r\n   get variants(): FormArray {\r\n     return this.productForm.get('variants') as FormArray;\r\n   }\r\n \r\n   get images(): FormArray {\r\n     return this.productForm.get('images') as FormArray;\r\n   }\r\n \r\n-  // --------- Add Variant ---------\r\n   addVariant() {\r\n-    const variantGroup = this.fb.group({\r\n-      variant_id: [0],\r\n-      id: [0],\r\n+    this.variants.push(this.fb.group({\r\n       sku: [''],\r\n       size: [''],\r\n       color: [''],\r\n-      image_id: [0],\r\n-    });\r\n-    this.variants.push(variantGroup);\r\n+      image_id: ['']  // image_id will be selected from uploaded list\r\n+    }));\r\n   }\r\n \r\n-  // --------- Add Image ---------\r\n-  addImage() {\r\n-    const imageGroup = this.fb.group({\r\n-      image_id: [0],\r\n-      id: [0],\r\n-      alt: [''],\r\n-      src: [''],\r\n-      variant_id: this.fb.array([]),\r\n+  removeVariant(index: number) {\r\n+    this.variants.removeAt(index);\r\n+  }\r\n+\r\n+  onFileUpload(event: any) {\r\n+    const file = event.target.files[0];\r\n+    if (!file) return;\r\n+\r\n+    const formData = new FormData();\r\n+    formData.append('image', file);\r\n+\r\n+    this.http.post('http://your-api/images/upload', formData).subscribe((res: any) => {\r\n+      if (res.Status === 'Success') {\r\n+        const uploaded = {\r\n+          image_id: res.image_id,\r\n+          alt: file.name,\r\n+          src: res.src,\r\n+          variant_id: []\r\n+        };\r\n+\r\n+        this.uploadedImages.push(uploaded);\r\n+        this.images.push(this.fb.group({\r\n+          image_id: [res.image_id],\r\n+          alt: [file.name],\r\n+          src: [res.src],\r\n+          variant_id: [''] // Fill in later with variant IDs\r\n+        }));\r\n+      }\r\n     });\r\n-    this.images.push(imageGroup);\r\n   }\r\n-getVariantIdControls(imageIndex: number): FormControl[] {\r\n-  const formArray = this.images.at(imageIndex).get('variant_id') as FormArray;\r\n-  return formArray.controls as FormControl[];\r\n-}\r\n \r\n-  // --------- Add Variant ID to Image ---------\r\n-  addVariantIdToImage(imageIndex: number) {\r\n-    const variantIdArray = this.images.at(imageIndex).get('variant_id') as FormArray;\r\n-    variantIdArray.push(new FormControl(0)); // add default 0 or user value\r\n+  removeImage(index: number) {\r\n+    this.images.removeAt(index);\r\n+    this.uploadedImages.splice(index, 1);\r\n   }\r\n \r\n-  // --------- Submit Form ---------\r\n-  submit() {\r\n-    const formData = this.productForm.value;\r\n+  onSubmit() {\r\n+    const formValue = this.productForm.value;\r\n \r\n-    this.http.post('https://your-backend-api.com/api/products', formData)\r\n-      .subscribe({\r\n-        next: (res) => console.log('Submitted successfully', res),\r\n-        error: (err) => console.error('Submission error', err),\r\n-      });\r\n+    // Convert variant_id to array in images\r\n+    const processedImages = formValue.images.map((img: any) => ({\r\n+      ...img,\r\n+      variant_id: img.variant_id.split(',').map((v: string) => parseInt(v.trim()))\r\n+    }));\r\n+\r\n+    const payload = {\r\n+      product_name: formValue.product_name,\r\n+      variants: formValue.variants,\r\n+      images: processedImages\r\n+    };\r\n+\r\n+    this.http.post('http://your-api/products/create', payload).subscribe(res => {\r\n+      console.log('Product Created', res);\r\n+    });\r\n   }\r\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1749877621809,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,9 +11,10 @@\n   styleUrl: './test.component.scss'\r\n })\r\n export class TestComponent  {\r\n   productForm: FormGroup;\r\n-  uploadedImages: any[] = [];\r\n+  nextImageId = 211;  // Starting for fake ID generation\r\n+  nextVariantId = 201;\r\n \r\n   constructor(private fb: FormBuilder, private http: HttpClient) {\r\n     this.productForm = this.fb.group({\r\n       product_name: ['', Validators.required],\r\n@@ -30,68 +31,86 @@\n     return this.productForm.get('images') as FormArray;\r\n   }\r\n \r\n   addVariant() {\r\n-    this.variants.push(this.fb.group({\r\n+    const newVariant = this.fb.group({\r\n+      variant_id: [this.nextVariantId++],\r\n       sku: [''],\r\n       size: [''],\r\n       color: [''],\r\n-      image_id: ['']  // image_id will be selected from uploaded list\r\n-    }));\r\n+      image_id: [''] // will map to uploaded image\r\n+    });\r\n+    this.variants.push(newVariant);\r\n   }\r\n \r\n   removeVariant(index: number) {\r\n+    const removedVariantId = this.variants.at(index).value.variant_id;\r\n     this.variants.removeAt(index);\r\n+\r\n+    // Remove from all images.variant_id[]\r\n+    this.images.controls.forEach(img => {\r\n+      let list = img.value.variant_id || [];\r\n+      list = list.filter((id: number) => id !== removedVariantId);\r\n+      img.patchValue({ variant_id: list });\r\n+    });\r\n   }\r\n \r\n   onFileUpload(event: any) {\r\n     const file = event.target.files[0];\r\n     if (!file) return;\r\n \r\n+    // Upload the file via API\r\n     const formData = new FormData();\r\n     formData.append('image', file);\r\n \r\n-    this.http.post('http://your-api/images/upload', formData).subscribe((res: any) => {\r\n-      if (res.Status === 'Success') {\r\n-        const uploaded = {\r\n-          image_id: res.image_id,\r\n-          alt: file.name,\r\n-          src: res.src,\r\n-          variant_id: []\r\n-        };\r\n-\r\n-        this.uploadedImages.push(uploaded);\r\n-        this.images.push(this.fb.group({\r\n-          image_id: [res.image_id],\r\n-          alt: [file.name],\r\n-          src: [res.src],\r\n-          variant_id: [''] // Fill in later with variant IDs\r\n-        }));\r\n-      }\r\n+    this.http.post<any>('http://your-api.com/image/upload', formData).subscribe(res => {\r\n+      const image_id = this.nextImageId++; // simulate\r\n+      this.images.push(this.fb.group({\r\n+        image_id: [image_id],\r\n+        alt: [file.name],\r\n+        src: [res.src || 'assets/temp/' + file.name], // use real uploaded path\r\n+        variant_id: [[]]\r\n+      }));\r\n     });\r\n   }\r\n \r\n   removeImage(index: number) {\r\n     this.images.removeAt(index);\r\n-    this.uploadedImages.splice(index, 1);\r\n   }\r\n \r\n+  onImageSelect(variantIndex: number, selectedImageId: any) {\r\n+    const variant = this.variants.at(variantIndex);\r\n+    variant.patchValue({ image_id: selectedImageId.target.value });\r\n+\r\n+    const variantId = variant.value.variant_id;\r\n+\r\n+    // Update the selected image's variant_id array\r\n+    this.images.controls.forEach(imageGroup => {\r\n+      const current = imageGroup.value;\r\n+      const list: number[] = current.variant_id || [];\r\n+\r\n+      if (current.image_id === selectedImageId.target.value) {\r\n+        if (!list.includes(variantId)) list.push(variantId);\r\n+        imageGroup.patchValue({ variant_id: list });\r\n+      } else {\r\n+        const updated = list.filter(v => v !== variantId);\r\n+        imageGroup.patchValue({ variant_id: updated });\r\n+      }\r\n+    });\r\n+  }\r\n+\r\n   onSubmit() {\r\n     const formValue = this.productForm.value;\r\n \r\n-    // Convert variant_id to array in images\r\n-    const processedImages = formValue.images.map((img: any) => ({\r\n-      ...img,\r\n-      variant_id: img.variant_id.split(',').map((v: string) => parseInt(v.trim()))\r\n-    }));\r\n-\r\n-    const payload = {\r\n+    const finalPayload = {\r\n       product_name: formValue.product_name,\r\n       variants: formValue.variants,\r\n-      images: processedImages\r\n+      images: formValue.images\r\n     };\r\n \r\n-    this.http.post('http://your-api/products/create', payload).subscribe(res => {\r\n-      console.log('Product Created', res);\r\n+    console.log('Final Payload', finalPayload);\r\n+\r\n+    this.http.post('http://your-api.com/product/create', finalPayload).subscribe(res => {\r\n+      console.log('Created', res);\r\n     });\r\n   }\r\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1749878986747,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,108 +9,79 @@\n   imports: [ReactiveFormsModule,NgFor],\r\n   templateUrl: './test.component.html',\r\n   styleUrl: './test.component.scss'\r\n })\r\n-export class TestComponent  {\r\n+export class TestComponent{\r\n   productForm: FormGroup;\r\n-  nextImageId = 211;  // Starting for fake ID generation\r\n-  nextVariantId = 201;\r\n \r\n-  constructor(private fb: FormBuilder, private http: HttpClient) {\r\n+  constructor(private fb: FormBuilder) {\r\n     this.productForm = this.fb.group({\r\n-      product_name: ['', Validators.required],\r\n-      variants: this.fb.array([]),\r\n-      images: this.fb.array([]),\r\n+      images: this.fb.array([])\r\n     });\r\n+    this.addImage(); // Start with one image block\r\n   }\r\n \r\n-  get variants(): FormArray {\r\n-    return this.productForm.get('variants') as FormArray;\r\n-  }\r\n-\r\n   get images(): FormArray {\r\n     return this.productForm.get('images') as FormArray;\r\n   }\r\n \r\n-  addVariant() {\r\n-    const newVariant = this.fb.group({\r\n-      variant_id: [this.nextVariantId++],\r\n-      sku: [''],\r\n-      size: [''],\r\n-      color: [''],\r\n-      image_id: [''] // will map to uploaded image\r\n+  newImage(): FormGroup {\r\n+    return this.fb.group({\r\n+      alt: ['', Validators.required],\r\n+      src: ['', Validators.required], // Will store base64\r\n+      preview: [''], // for UI preview\r\n+      variantDetails: this.fb.array([this.newVariant()])\r\n     });\r\n-    this.variants.push(newVariant);\r\n   }\r\n \r\n-  removeVariant(index: number) {\r\n-    const removedVariantId = this.variants.at(index).value.variant_id;\r\n-    this.variants.removeAt(index);\r\n-\r\n-    // Remove from all images.variant_id[]\r\n-    this.images.controls.forEach(img => {\r\n-      let list = img.value.variant_id || [];\r\n-      list = list.filter((id: number) => id !== removedVariantId);\r\n-      img.patchValue({ variant_id: list });\r\n+  newVariant(): FormGroup {\r\n+    return this.fb.group({\r\n+      sku: ['', Validators.required],\r\n+      size: ['', Validators.required],\r\n+      color: ['', Validators.required]\r\n     });\r\n   }\r\n \r\n-  onFileUpload(event: any) {\r\n-    const file = event.target.files[0];\r\n-    if (!file) return;\r\n-\r\n-    // Upload the file via API\r\n-    const formData = new FormData();\r\n-    formData.append('image', file);\r\n-\r\n-    this.http.post<any>('http://your-api.com/image/upload', formData).subscribe(res => {\r\n-      const image_id = this.nextImageId++; // simulate\r\n-      this.images.push(this.fb.group({\r\n-        image_id: [image_id],\r\n-        alt: [file.name],\r\n-        src: [res.src || 'assets/temp/' + file.name], // use real uploaded path\r\n-        variant_id: [[]]\r\n-      }));\r\n-    });\r\n+  addImage() {\r\n+    this.images.push(this.newImage());\r\n   }\r\n \r\n   removeImage(index: number) {\r\n     this.images.removeAt(index);\r\n   }\r\n \r\n-  onImageSelect(variantIndex: number, selectedImageId: any) {\r\n-    const variant = this.variants.at(variantIndex);\r\n-    variant.patchValue({ image_id: selectedImageId.target.value });\r\n+  variantDetails(imageIndex: number): FormArray {\r\n+    return this.images.at(imageIndex).get('variantDetails') as FormArray;\r\n+  }\r\n \r\n-    const variantId = variant.value.variant_id;\r\n+  addVariant(imageIndex: number) {\r\n+    this.variantDetails(imageIndex).push(this.newVariant());\r\n+  }\r\n \r\n-    // Update the selected image's variant_id array\r\n-    this.images.controls.forEach(imageGroup => {\r\n-      const current = imageGroup.value;\r\n-      const list: number[] = current.variant_id || [];\r\n+  removeVariant(imageIndex: number, variantIndex: number) {\r\n+    this.variantDetails(imageIndex).removeAt(variantIndex);\r\n+  }\r\n \r\n-      if (current.image_id === selectedImageId.target.value) {\r\n-        if (!list.includes(variantId)) list.push(variantId);\r\n-        imageGroup.patchValue({ variant_id: list });\r\n-      } else {\r\n-        const updated = list.filter(v => v !== variantId);\r\n-        imageGroup.patchValue({ variant_id: updated });\r\n-      }\r\n+  async onFileChange(event: any, imageIndex: number) {\r\n+    const file = event.target.files[0];\r\n+    if (file) {\r\n+      const base64 = await this.convertToBase64(file);\r\n+      this.images.at(imageIndex).patchValue({ src: base64, preview: base64 });\r\n+    }\r\n+  }\r\n+\r\n+  convertToBase64(file: File): Promise<string> {\r\n+    return new Promise((resolve, reject) => {\r\n+      const reader = new FileReader();\r\n+      reader.readAsDataURL(file);\r\n+      reader.onload = () => resolve(reader.result as string);\r\n+      reader.onerror = error => reject(error);\r\n     });\r\n   }\r\n \r\n   onSubmit() {\r\n-    const formValue = this.productForm.value;\r\n-\r\n-    const finalPayload = {\r\n-      product_name: formValue.product_name,\r\n-      variants: formValue.variants,\r\n-      images: formValue.images\r\n-    };\r\n-\r\n-    console.log('Final Payload', finalPayload);\r\n-\r\n-    this.http.post('http://your-api.com/product/create', finalPayload).subscribe(res => {\r\n-      console.log('Created', res);\r\n-    });\r\n+    const data = this.productForm.value;\r\n+    // Optionally remove preview field before sending to backend\r\n+    data.images.forEach((img: any) => delete img.preview);\r\n+    console.log('Submitted:', data);\r\n   }\r\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1749879226060,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,28 +9,28 @@\n   imports: [ReactiveFormsModule,NgFor],\r\n   templateUrl: './test.component.html',\r\n   styleUrl: './test.component.scss'\r\n })\r\n-export class TestComponent{\r\n+export class TestComponent {\r\n   productForm: FormGroup;\r\n \r\n   constructor(private fb: FormBuilder) {\r\n     this.productForm = this.fb.group({\r\n-      images: this.fb.array([])\r\n+      'images Details': this.fb.array([]) // Note: key with space\r\n     });\r\n-    this.addImage(); // Start with one image block\r\n+    this.addImage(); // One initial image\r\n   }\r\n \r\n-  get images(): FormArray {\r\n-    return this.productForm.get('images') as FormArray;\r\n+  get imageDetails(): FormArray {\r\n+    return this.productForm.get('images Details') as FormArray;\r\n   }\r\n \r\n   newImage(): FormGroup {\r\n     return this.fb.group({\r\n       alt: ['', Validators.required],\r\n-      src: ['', Validators.required], // Will store base64\r\n-      preview: [''], // for UI preview\r\n-      variantDetails: this.fb.array([this.newVariant()])\r\n+      src: ['', Validators.required], // base64 string\r\n+      preview: [''], // for image preview (not submitted)\r\n+      'variant Details': this.fb.array([this.newVariant()])\r\n     });\r\n   }\r\n \r\n   newVariant(): FormGroup {\r\n@@ -41,32 +41,33 @@\n     });\r\n   }\r\n \r\n   addImage() {\r\n-    this.images.push(this.newImage());\r\n+    this.imageDetails.push(this.newImage());\r\n   }\r\n \r\n   removeImage(index: number) {\r\n-    this.images.removeAt(index);\r\n+    this.imageDetails.removeAt(index);\r\n   }\r\n \r\n-  variantDetails(imageIndex: number): FormArray {\r\n-    return this.images.at(imageIndex).get('variantDetails') as FormArray;\r\n+  getVariants(imageIndex: number): FormArray {\r\n+    return this.imageDetails.at(imageIndex).get('variant Details') as FormArray;\r\n   }\r\n \r\n   addVariant(imageIndex: number) {\r\n-    this.variantDetails(imageIndex).push(this.newVariant());\r\n+    this.getVariants(imageIndex).push(this.newVariant());\r\n   }\r\n \r\n   removeVariant(imageIndex: number, variantIndex: number) {\r\n-    this.variantDetails(imageIndex).removeAt(variantIndex);\r\n+    this.getVariants(imageIndex).removeAt(variantIndex);\r\n   }\r\n \r\n   async onFileChange(event: any, imageIndex: number) {\r\n     const file = event.target.files[0];\r\n     if (file) {\r\n       const base64 = await this.convertToBase64(file);\r\n-      this.images.at(imageIndex).patchValue({ src: base64, preview: base64 });\r\n+      const group = this.imageDetails.at(imageIndex);\r\n+      group.patchValue({ src: base64, preview: base64 });\r\n     }\r\n   }\r\n \r\n   convertToBase64(file: File): Promise<string> {\r\n@@ -78,10 +79,11 @@\n     });\r\n   }\r\n \r\n   onSubmit() {\r\n-    const data = this.productForm.value;\r\n-    // Optionally remove preview field before sending to backend\r\n-    data.images.forEach((img: any) => delete img.preview);\r\n-    console.log('Submitted:', data);\r\n+    const data = JSON.parse(JSON.stringify(this.productForm.value));\r\n+    // remove preview field before submit\r\n+    data[\"images Details\"].forEach((img: any) => delete img.preview);\r\n+    console.log('Final Payload:', data);\r\n+    // You can now POST this to API\r\n   }\r\n }\n\\ No newline at end of file\n"
                },
                {
                    "date": 1749983776546,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -85,5 +85,6 @@\n     data[\"images Details\"].forEach((img: any) => delete img.preview);\r\n     console.log('Final Payload:', data);\r\n     // You can now POST this to API\r\n   }\r\n-}\n\\ No newline at end of file\n+}\r\n+\r\n"
                },
                {
                    "date": 1749983913860,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,13 +1,13 @@\n-import { NgFor } from '@angular/common';\r\n+import { NgFor, NgIf } from '@angular/common';\r\n import { HttpClient } from '@angular/common/http';\r\n import { Component } from '@angular/core';\r\n import { FormGroup, FormBuilder, FormArray, FormControl, ReactiveFormsModule, Validators } from '@angular/forms';\r\n \r\n @Component({\r\n   selector: 'app-test',\r\n   standalone: true,\r\n-  imports: [ReactiveFormsModule,NgFor],\r\n+  imports: [ReactiveFormsModule,NgFor,NgIf],\r\n   templateUrl: './test.component.html',\r\n   styleUrl: './test.component.scss'\r\n })\r\n export class TestComponent {\r\n"
                },
                {
                    "date": 1749984867983,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,13 +1,13 @@\n import { NgFor, NgIf } from '@angular/common';\r\n import { HttpClient } from '@angular/common/http';\r\n import { Component } from '@angular/core';\r\n import { FormGroup, FormBuilder, FormArray, FormControl, ReactiveFormsModule, Validators } from '@angular/forms';\r\n-\r\n+import {MatTabsModule} from '@angular/material/tabs';\r\n @Component({\r\n   selector: 'app-test',\r\n   standalone: true,\r\n-  imports: [ReactiveFormsModule,NgFor,NgIf],\r\n+  imports: [ReactiveFormsModule,NgFor,NgIf,MatTabsModule],\r\n   templateUrl: './test.component.html',\r\n   styleUrl: './test.component.scss'\r\n })\r\n export class TestComponent {\r\n"
                },
                {
                    "date": 1749984998285,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,12 +2,13 @@\n import { HttpClient } from '@angular/common/http';\r\n import { Component } from '@angular/core';\r\n import { FormGroup, FormBuilder, FormArray, FormControl, ReactiveFormsModule, Validators } from '@angular/forms';\r\n import {MatTabsModule} from '@angular/material/tabs';\r\n+import { AddProductComponent } from \"../COMPONENTS/add-product/add-product.component\";\r\n @Component({\r\n   selector: 'app-test',\r\n   standalone: true,\r\n-  imports: [ReactiveFormsModule,NgFor,NgIf,MatTabsModule],\r\n+  imports: [ReactiveFormsModule, NgFor, NgIf, MatTabsModule, AddProductComponent],\r\n   templateUrl: './test.component.html',\r\n   styleUrl: './test.component.scss'\r\n })\r\n export class TestComponent {\r\n"
                },
                {
                    "date": 1749986216462,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,12 +3,13 @@\n import { Component } from '@angular/core';\r\n import { FormGroup, FormBuilder, FormArray, FormControl, ReactiveFormsModule, Validators } from '@angular/forms';\r\n import {MatTabsModule} from '@angular/material/tabs';\r\n import { AddProductComponent } from \"../COMPONENTS/add-product/add-product.component\";\r\n+import { MatIcon, MatIconModule } from '@angular/material/icon';\r\n @Component({\r\n   selector: 'app-test',\r\n   standalone: true,\r\n-  imports: [ReactiveFormsModule, NgFor, NgIf, MatTabsModule, AddProductComponent],\r\n+  imports: [ReactiveFormsModule, NgFor, NgIf, MatTabsModule, AddProductComponent, MatIconModule],\r\n   templateUrl: './test.component.html',\r\n   styleUrl: './test.component.scss'\r\n })\r\n export class TestComponent {\r\n"
                },
                {
                    "date": 1749986295026,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,12 +4,13 @@\n import { FormGroup, FormBuilder, FormArray, FormControl, ReactiveFormsModule, Validators } from '@angular/forms';\r\n import {MatTabsModule} from '@angular/material/tabs';\r\n import { AddProductComponent } from \"../COMPONENTS/add-product/add-product.component\";\r\n import { MatIcon, MatIconModule } from '@angular/material/icon';\r\n+import { MatCardModule } from '@angular/material/card';\r\n @Component({\r\n   selector: 'app-test',\r\n   standalone: true,\r\n-  imports: [ReactiveFormsModule, NgFor, NgIf, MatTabsModule, AddProductComponent, MatIconModule],\r\n+  imports: [ReactiveFormsModule,MatCardModule, NgFor, NgIf, MatTabsModule, AddProductComponent, MatIconModule, mat],\r\n   templateUrl: './test.component.html',\r\n   styleUrl: './test.component.scss'\r\n })\r\n export class TestComponent {\r\n"
                },
                {
                    "date": 1749986321043,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,9 @@\n import { MatCardModule } from '@angular/material/card';\r\n @Component({\r\n   selector: 'app-test',\r\n   standalone: true,\r\n-  imports: [ReactiveFormsModule,MatCardModule, NgFor, NgIf, MatTabsModule, AddProductComponent, MatIconModule, mat],\r\n+  imports: [ReactiveFormsModule,MatCardModule, NgFor, NgIf, MatTabsModule, AddProductComponent, MatIconModule],\r\n   templateUrl: './test.component.html',\r\n   styleUrl: './test.component.scss'\r\n })\r\n export class TestComponent {\r\n"
                },
                {
                    "date": 1749986359477,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,8 +5,9 @@\n import {MatTabsModule} from '@angular/material/tabs';\r\n import { AddProductComponent } from \"../COMPONENTS/add-product/add-product.component\";\r\n import { MatIcon, MatIconModule } from '@angular/material/icon';\r\n import { MatCardModule } from '@angular/material/card';\r\n+import { MatFormFieldModule } from '@angular/material/form-field';\r\n @Component({\r\n   selector: 'app-test',\r\n   standalone: true,\r\n   imports: [ReactiveFormsModule,MatCardModule, NgFor, NgIf, MatTabsModule, AddProductComponent, MatIconModule],\r\n"
                },
                {
                    "date": 1749986375678,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,9 +9,9 @@\n import { MatFormFieldModule } from '@angular/material/form-field';\r\n @Component({\r\n   selector: 'app-test',\r\n   standalone: true,\r\n-  imports: [ReactiveFormsModule,MatCardModule, NgFor, NgIf, MatTabsModule, AddProductComponent, MatIconModule],\r\n+  imports: [ReactiveFormsModule,MatCardModule,MatFormFieldModule, NgFor, NgIf, MatTabsModule, AddProductComponent, MatIconModule],\r\n   templateUrl: './test.component.html',\r\n   styleUrl: './test.component.scss'\r\n })\r\n export class TestComponent {\r\n"
                },
                {
                    "date": 1749986609842,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,13 +5,13 @@\n import {MatTabsModule} from '@angular/material/tabs';\r\n import { AddProductComponent } from \"../COMPONENTS/add-product/add-product.component\";\r\n import { MatIcon, MatIconModule } from '@angular/material/icon';\r\n import { MatCardModule } from '@angular/material/card';\r\n-import { MatFormFieldModule } from '@angular/material/form-field';\r\n+\r\n @Component({\r\n   selector: 'app-test',\r\n   standalone: true,\r\n-  imports: [ReactiveFormsModule,MatCardModule,MatFormFieldModule, NgFor, NgIf, MatTabsModule, AddProductComponent, MatIconModule],\r\n+  imports: [ReactiveFormsModule,MatCardModule, NgFor, NgIf, MatTabsModule, AddProductComponent, MatIconModule],\r\n   templateUrl: './test.component.html',\r\n   styleUrl: './test.component.scss'\r\n })\r\n export class TestComponent {\r\n"
                },
                {
                    "date": 1749986641914,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,12 +6,16 @@\n import { AddProductComponent } from \"../COMPONENTS/add-product/add-product.component\";\r\n import { MatIcon, MatIconModule } from '@angular/material/icon';\r\n import { MatCardModule } from '@angular/material/card';\r\n \r\n+import { MatFormFieldModule } from '@angular/material/form-field';\r\n+import { MatInputModule } from '@angular/material/input';\r\n+import { MatButtonModule } from '@angular/material/button';\r\n+\r\n @Component({\r\n   selector: 'app-test',\r\n   standalone: true,\r\n-  imports: [ReactiveFormsModule,MatCardModule, NgFor, NgIf, MatTabsModule, AddProductComponent, MatIconModule],\r\n+  imports: [ReactiveFormsModule,MatCardModule,MatButtonModule,MatInputModule,MatFormFieldModule, NgFor, NgIf, MatTabsModule, AddProductComponent, MatIconModule],\r\n   templateUrl: './test.component.html',\r\n   styleUrl: './test.component.scss'\r\n })\r\n export class TestComponent {\r\n"
                },
                {
                    "date": 1750001816746,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,9 +19,18 @@\n   styleUrl: './test.component.scss'\r\n })\r\n export class TestComponent {\r\n   productForm: FormGroup;\r\n+  imageUrl: any = [\r\n+    '../../../assts/add-img.webp',\r\n+    '../../../assts/add-img.webp',\r\n+    '../../../assts/add-img.webp',\r\n+    '../../../assts/add-img.webp',\r\n+  ];\r\n+    productForm1!: FormGroup;\r\n \r\n+  options: string[] = ['s', 'm', 'l', 'xl', 'xxl'];\r\n+  colors: string[] = ['yellow', 'white', 'pink', 'olive', 'navy', 'red'];\r\n   constructor(private fb: FormBuilder) {\r\n     this.productForm = this.fb.group({\r\n       'images Details': this.fb.array([]) // Note: key with space\r\n     });\r\n"
                },
                {
                    "date": 1750001843737,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,8 +25,57 @@\n     '../../../assts/add-img.webp',\r\n     '../../../assts/add-img.webp',\r\n     '../../../assts/add-img.webp',\r\n   ];\r\n+\r\n+    typeArray = [\r\n+    { key: 'Fashion', value: 'fashion' },\r\n+    { key: 'Shoes', value: 'shoes' },\r\n+    { key: 'Bags', value: 'bags' },\r\n+    { key: 'Watch', value: 'watch' },\r\n+    { key: 'Flower', value: 'flower' },\r\n+    { key: 'Pets', value: 'pets' },\r\n+    { key: 'Electronics', value: 'electronics' },\r\n+    { key: 'Vegetables', value: 'vegetables' },\r\n+    { key: 'Furniture', value: 'furniture' },\r\n+    { key: 'Beauty', value: 'beauty' },\r\n+    { key: 'Tools', value: 'tools' },\r\n+    { key: 'Gym', value: 'gym' },\r\n+    { key: 'Marijuana', value: 'marijuana' },\r\n+  ];\r\n+\r\n+  brandArray = [\r\n+    { key: 'Nike', value: 'nike' },\r\n+    { key: 'Zara', value: 'zara' },\r\n+    { key: 'Denim', value: 'denim' },\r\n+    { key: 'Madame', value: 'madame' },\r\n+    { key: 'Biba', value: 'biba' },\r\n+    { key: 'Max', value: 'max' },\r\n+  ];\r\n+\r\n+  collectionArray = [\r\n+    { key: 'New products', value: 'new products' },\r\n+    { key: 'Best sellers', value: 'best sellers' },\r\n+    { key: 'Featured products', value: 'featured products' },\r\n+    { key: 'On sale', value: 'on sale' },\r\n+    { key: 'New arrival', value: 'new arrival' },\r\n+    { key: 'Trending product', value: 'trending product' },\r\n+  ];\r\n+  categoryArray = [\r\n+    { key: 'Fashion', value: 'Women' },\r\n+    { key: 'Shoes', value: 'shoes' },\r\n+    { key: 'Bags', value: 'bags' },\r\n+    { key: 'Watch', value: 'watch' },\r\n+    { key: 'Flower', value: 'flower' },\r\n+    { key: 'Pets', value: 'pets' },\r\n+    { key: 'Electronics', value: 'electronics' },\r\n+    { key: 'Vegetables', value: 'vegetables' },\r\n+    { key: 'Furniture', value: 'furniture' },\r\n+    { key: 'Beauty', value: 'beauty' },\r\n+    { key: 'Tools', value: 'tools' },\r\n+    { key: 'Gym', value: 'gym' },\r\n+    { key: 'Marijuana', value: 'marijuana' },\r\n+  ];\r\n     productForm1!: FormGroup;\r\n \r\n   options: string[] = ['s', 'm', 'l', 'xl', 'xxl'];\r\n   colors: string[] = ['yellow', 'white', 'pink', 'olive', 'navy', 'red'];\r\n"
                },
                {
                    "date": 1750001856954,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -151,6 +151,16 @@\n     data[\"images Details\"].forEach((img: any) => delete img.preview);\r\n     console.log('Final Payload:', data);\r\n     // You can now POST this to API\r\n   }\r\n+    jsonTest() {\r\n+    if (this.productForm1.valid) {\r\n+      const formData = this.productForm1.value;\r\n+\r\n+      formData.sale = true;\r\n+      console.log('Form Data:', this.productForm1.value);\r\n+    } else {\r\n+      this.productForm1.markAllAsTouched();\r\n+    }\r\n+  }\r\n }\r\n \r\n"
                },
                {
                    "date": 1750001971731,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,23 +1,52 @@\n import { NgFor, NgIf } from '@angular/common';\r\n import { HttpClient } from '@angular/common/http';\r\n import { Component } from '@angular/core';\r\n-import { FormGroup, FormBuilder, FormArray, FormControl, ReactiveFormsModule, Validators } from '@angular/forms';\r\n-import {MatTabsModule} from '@angular/material/tabs';\r\n-import { AddProductComponent } from \"../COMPONENTS/add-product/add-product.component\";\r\n+import {\r\n+  FormGroup,\r\n+  FormBuilder,\r\n+  FormArray,\r\n+  FormControl,\r\n+  ReactiveFormsModule,\r\n+  Validators,\r\n+} from '@angular/forms';\r\n+import { MatTabsModule } from '@angular/material/tabs';\r\n+import { AddProductComponent } from '../COMPONENTS/add-product/add-product.component';\r\n import { MatIcon, MatIconModule } from '@angular/material/icon';\r\n import { MatCardModule } from '@angular/material/card';\r\n \r\n import { MatFormFieldModule } from '@angular/material/form-field';\r\n import { MatInputModule } from '@angular/material/input';\r\n import { MatButtonModule } from '@angular/material/button';\r\n+import { MatExpansionModule } from '@angular/material/expansion';\r\n+import { MatChipsModule } from '@angular/material/chips';\r\n+import { MatAutocompleteModule } from '@angular/material/autocomplete';\r\n+import { MatSelectModule } from '@angular/material/select';\r\n \r\n @Component({\r\n   selector: 'app-test',\r\n   standalone: true,\r\n-  imports: [ReactiveFormsModule,MatCardModule,MatButtonModule,MatInputModule,MatFormFieldModule, NgFor, NgIf, MatTabsModule, AddProductComponent, MatIconModule],\r\n+  imports: [\r\n+    ReactiveFormsModule,\r\n+    MatCardModule,\r\n+    MatButtonModule,\r\n+    MatInputModule,\r\n+    MatFormFieldModule,\r\n+    NgFor,\r\n+    NgIf,\r\n+    MatTabsModule,\r\n+    AddProductComponent,\r\n+    MatIconModule,\r\n+    MatSelectModule,\r\n+    MatAutocompleteModule,\r\n+    MatChipsModule,\r\n+    MatExpansionModule\r\n+  ],\r\n+\r\n+\r\n+\r\n   templateUrl: './test.component.html',\r\n-  styleUrl: './test.component.scss'\r\n+  styleUrl: './test.component.scss',\r\n })\r\n export class TestComponent {\r\n   productForm: FormGroup;\r\n   imageUrl: any = [\r\n@@ -26,9 +55,9 @@\n     '../../../assts/add-img.webp',\r\n     '../../../assts/add-img.webp',\r\n   ];\r\n \r\n-    typeArray = [\r\n+  typeArray = [\r\n     { key: 'Fashion', value: 'fashion' },\r\n     { key: 'Shoes', value: 'shoes' },\r\n     { key: 'Bags', value: 'bags' },\r\n     { key: 'Watch', value: 'watch' },\r\n@@ -74,15 +103,15 @@\n     { key: 'Tools', value: 'tools' },\r\n     { key: 'Gym', value: 'gym' },\r\n     { key: 'Marijuana', value: 'marijuana' },\r\n   ];\r\n-    productForm1!: FormGroup;\r\n+  productForm1!: FormGroup;\r\n \r\n   options: string[] = ['s', 'm', 'l', 'xl', 'xxl'];\r\n   colors: string[] = ['yellow', 'white', 'pink', 'olive', 'navy', 'red'];\r\n   constructor(private fb: FormBuilder) {\r\n     this.productForm = this.fb.group({\r\n-      'images Details': this.fb.array([]) // Note: key with space\r\n+      'images Details': this.fb.array([]), // Note: key with space\r\n     });\r\n     this.addImage(); // One initial image\r\n   }\r\n \r\n@@ -94,17 +123,17 @@\n     return this.fb.group({\r\n       alt: ['', Validators.required],\r\n       src: ['', Validators.required], // base64 string\r\n       preview: [''], // for image preview (not submitted)\r\n-      'variant Details': this.fb.array([this.newVariant()])\r\n+      'variant Details': this.fb.array([this.newVariant()]),\r\n     });\r\n   }\r\n \r\n   newVariant(): FormGroup {\r\n     return this.fb.group({\r\n       sku: ['', Validators.required],\r\n       size: ['', Validators.required],\r\n-      color: ['', Validators.required]\r\n+      color: ['', Validators.required],\r\n     });\r\n   }\r\n \r\n   addImage() {\r\n@@ -140,20 +169,20 @@\n     return new Promise((resolve, reject) => {\r\n       const reader = new FileReader();\r\n       reader.readAsDataURL(file);\r\n       reader.onload = () => resolve(reader.result as string);\r\n-      reader.onerror = error => reject(error);\r\n+      reader.onerror = (error) => reject(error);\r\n     });\r\n   }\r\n \r\n   onSubmit() {\r\n     const data = JSON.parse(JSON.stringify(this.productForm.value));\r\n     // remove preview field before submit\r\n-    data[\"images Details\"].forEach((img: any) => delete img.preview);\r\n+    data['images Details'].forEach((img: any) => delete img.preview);\r\n     console.log('Final Payload:', data);\r\n     // You can now POST this to API\r\n   }\r\n-    jsonTest() {\r\n+  jsonTest() {\r\n     if (this.productForm1.valid) {\r\n       const formData = this.productForm1.value;\r\n \r\n       formData.sale = true;\r\n@@ -162,5 +191,4 @@\n       this.productForm1.markAllAsTouched();\r\n     }\r\n   }\r\n }\r\n-\r\n"
                },
                {
                    "date": 1750002062026,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -111,8 +111,20 @@\n   constructor(private fb: FormBuilder) {\r\n     this.productForm = this.fb.group({\r\n       'images Details': this.fb.array([]), // Note: key with space\r\n     });\r\n+        this.productForm1 = this.fb.group({\r\n+      title: ['', Validators.required],\r\n+      description: [''],\r\n+      type: [''],\r\n+      brand: [''],\r\n+      collection: [[]],\r\n+      category: [''],\r\n+      price: [''],\r\n+      discount: [''],\r\n+      stock: [''],\r\n+      newProduct: [false],\r\n+    });\r\n     this.addImage(); // One initial image\r\n   }\r\n \r\n   get imageDetails(): FormArray {\r\n"
                },
                {
                    "date": 1750002621315,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,9 @@\n import { MatExpansionModule } from '@angular/material/expansion';\r\n import { MatChipsModule } from '@angular/material/chips';\r\n import { MatAutocompleteModule } from '@angular/material/autocomplete';\r\n import { MatSelectModule } from '@angular/material/select';\r\n-\r\n+import { MatDividerModule } from '@angular/material/divider';\r\n @Component({\r\n   selector: 'app-test',\r\n   standalone: true,\r\n   imports: [\r\n@@ -38,9 +38,10 @@\n     MatIconModule,\r\n     MatSelectModule,\r\n     MatAutocompleteModule,\r\n     MatChipsModule,\r\n-    MatExpansionModule\r\n+    MatExpansionModule,\r\n+    \r\n   ],\r\n \r\n \r\n \r\n"
                },
                {
                    "date": 1750002628969,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,8 +25,9 @@\n @Component({\r\n   selector: 'app-test',\r\n   standalone: true,\r\n   imports: [\r\n+    MatDividerModule,\r\n     ReactiveFormsModule,\r\n     MatCardModule,\r\n     MatButtonModule,\r\n     MatInputModule,\r\n"
                }
            ],
            "date": 1749784341955,
            "name": "Commit-0",
            "content": "import { HttpClient } from '@angular/common/http';\r\nimport { Component } from '@angular/core';\r\nimport { FormGroup, FormBuilder, FormArray, FormControl } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'app-test',\r\n  standalone: true,\r\n  imports: [],\r\n  templateUrl: './test.component.html',\r\n  styleUrl: './test.component.scss'\r\n})\r\nexport class TestComponent  {\r\n  productForm: FormGroup;\r\n\r\n  constructor(private fb: FormBuilder, private http: HttpClient) {\r\n    this.productForm = this.fb.group({\r\n      variants: this.fb.array([]),\r\n      images: this.fb.array([]),\r\n    });\r\n  }\r\n\r\n  // --------- Form Array Getters ---------\r\n  get variants(): FormArray {\r\n    return this.productForm.get('variants') as FormArray;\r\n  }\r\n\r\n  get images(): FormArray {\r\n    return this.productForm.get('images') as FormArray;\r\n  }\r\n\r\n  // --------- Add Variant ---------\r\n  addVariant() {\r\n    const variantGroup = this.fb.group({\r\n      variant_id: [0],\r\n      id: [0],\r\n      sku: [''],\r\n      size: [''],\r\n      color: [''],\r\n      image_id: [0],\r\n    });\r\n    this.variants.push(variantGroup);\r\n  }\r\n\r\n  // --------- Add Image ---------\r\n  addImage() {\r\n    const imageGroup = this.fb.group({\r\n      image_id: [0],\r\n      id: [0],\r\n      alt: [''],\r\n      src: [''],\r\n      variant_id: this.fb.array([]),\r\n    });\r\n    this.images.push(imageGroup);\r\n  }\r\n\r\n  // --------- Add Variant ID to Image ---------\r\n  addVariantIdToImage(imageIndex: number) {\r\n    const variantIdArray = this.images.at(imageIndex).get('variant_id') as FormArray;\r\n    variantIdArray.push(new FormControl(0)); // add default 0 or user value\r\n  }\r\n\r\n  // --------- Submit Form ---------\r\n  submit() {\r\n    const formData = this.productForm.value;\r\n\r\n    this.http.post('https://your-backend-api.com/api/products', formData)\r\n      .subscribe({\r\n        next: (res) => console.log('Submitted successfully', res),\r\n        error: (err) => console.error('Submission error', err),\r\n      });\r\n  }\r\n}"
        }
    ]
}