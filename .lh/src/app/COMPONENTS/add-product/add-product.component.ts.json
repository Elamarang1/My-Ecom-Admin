{
    "sourceFile": "src/app/COMPONENTS/add-product/add-product.component.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 77,
            "patches": [
                {
                    "date": 1749782917810,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1749783044532,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -195,7 +195,12 @@\n   }\r\n \r\n \r\n   jsonTest(){\r\n-    \r\n+        if (this.productForm.valid) {\r\n+      console.log('Form Data:', this.productForm.value);\r\n+    } else {\r\n+      this.productForm.markAllAsTouched();\r\n+    }\r\n   }\r\n+  }\r\n }\r\n"
                },
                {
                    "date": 1749783556935,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -196,11 +196,14 @@\n \r\n \r\n   jsonTest(){\r\n         if (this.productForm.valid) {\r\n+          const  formData = this.productForm.value\r\n+\r\n+          formData.sale = true\r\n       console.log('Form Data:', this.productForm.value);\r\n     } else {\r\n       this.productForm.markAllAsTouched();\r\n     }\r\n   }\r\n   }\r\n-}\r\n+\r\n"
                },
                {
                    "date": 1749985566695,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,15 +12,17 @@\n import {Observable} from 'rxjs';\r\n import {map, startWith} from 'rxjs/operators';\r\n import {AsyncPipe} from '@angular/common';\r\n import {MatAutocompleteModule} from '@angular/material/autocomplete';\r\n+import {MatButtonModule} from '@angular/material/button';\r\n+\r\n export interface Fruit {\r\n   name: string;\r\n }\r\n @Component({\r\n   selector: 'app-add-product',\r\n   standalone: true,\r\n-  imports: [MatFormFieldModule, MatInputModule, AsyncPipe, MatAutocompleteModule, MatInputModule, MatIconModule, MatChipsModule, MatIconModule, MatSelectModule, NgFor, MatExpansionModule, ReactiveFormsModule],\r\n+  imports: [MatFormFieldModule, MatButtonModule,MatInputModule, AsyncPipe, MatAutocompleteModule, MatInputModule, MatIconModule, MatChipsModule, MatIconModule, MatSelectModule, NgFor, MatExpansionModule, ReactiveFormsModule],\r\n   templateUrl: './add-product.component.html',\r\n   styleUrl: './add-product.component.scss'\r\n })\r\n export class AddProductComponent {\r\n"
                },
                {
                    "date": 1749999760416,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,50 +1,100 @@\n-import { ChangeDetectorRef, Component, ElementRef, inject, signal, ViewChild } from '@angular/core';\r\n+import {\r\n+  ChangeDetectorRef,\r\n+  Component,\r\n+  ElementRef,\r\n+  inject,\r\n+  signal,\r\n+  ViewChild,\r\n+} from '@angular/core';\r\n import { MatSelectModule } from '@angular/material/select';\r\n import { MatInputModule } from '@angular/material/input';\r\n import { MatFormFieldModule } from '@angular/material/form-field';\r\n-import { MatIconModule } from '@angular/material/icon'\r\n-import { NgFor } from '@angular/common';\r\n+import { MatIconModule } from '@angular/material/icon';\r\n+import { NgFor, NgIf } from '@angular/common';\r\n import { MatExpansionModule } from '@angular/material/expansion';\r\n-import { FormBuilder, FormControl, FormGroup, ReactiveFormsModule, Validators } from '@angular/forms';\r\n-import {MatChipEditedEvent, MatChipInputEvent, MatChipsModule} from '@angular/material/chips';\r\n-import {COMMA, ENTER} from '@angular/cdk/keycodes';\r\n+import {\r\n+  FormBuilder,\r\n+  FormControl,\r\n+  FormGroup,\r\n+  ReactiveFormsModule,\r\n+  Validators,\r\n+} from '@angular/forms';\r\n+import {\r\n+  MatChipEditedEvent,\r\n+  MatChipInputEvent,\r\n+  MatChipsModule,\r\n+} from '@angular/material/chips';\r\n+import { COMMA, ENTER } from '@angular/cdk/keycodes';\r\n import { LiveAnnouncer } from '@angular/cdk/a11y';\r\n-import {Observable} from 'rxjs';\r\n-import {map, startWith} from 'rxjs/operators';\r\n-import {AsyncPipe} from '@angular/common';\r\n-import {MatAutocompleteModule} from '@angular/material/autocomplete';\r\n-import {MatButtonModule} from '@angular/material/button';\r\n+import { Observable } from 'rxjs';\r\n+import { map, startWith } from 'rxjs/operators';\r\n+import { AsyncPipe } from '@angular/common';\r\n+import { MatAutocompleteModule } from '@angular/material/autocomplete';\r\n+import { MatButtonModule } from '@angular/material/button';\r\n+import { MatCardModule } from '@angular/material/card';\r\n+import { MatTabsModule } from '@angular/material/tabs';\r\n \r\n export interface Fruit {\r\n   name: string;\r\n }\r\n @Component({\r\n   selector: 'app-add-product',\r\n   standalone: true,\r\n-  imports: [MatFormFieldModule, MatButtonModule,MatInputModule, AsyncPipe, MatAutocompleteModule, MatInputModule, MatIconModule, MatChipsModule, MatIconModule, MatSelectModule, NgFor, MatExpansionModule, ReactiveFormsModule],\r\n+  imports: [\r\n+    MatFormFieldModule,\r\n+    MatButtonModule,\r\n+    MatInputModule,\r\n+    AsyncPipe,\r\n+    MatAutocompleteModule,\r\n+    MatInputModule,\r\n+    MatIconModule,\r\n+    MatChipsModule,\r\n+    MatIconModule,\r\n+    MatSelectModule,\r\n+    NgFor,\r\n+    MatExpansionModule,\r\n+    ReactiveFormsModule,\r\n+    MatCardModule,\r\n+    MatButtonModule,\r\n+    MatInputModule,\r\n+    MatFormFieldModule,\r\n+    NgFor,\r\n+    NgIf,\r\n+    MatTabsModule,\r\n+    MatIconModule,\r\n+  ],\r\n   templateUrl: './add-product.component.html',\r\n-  styleUrl: './add-product.component.scss'\r\n+  styleUrl: './add-product.component.scss',\r\n })\r\n export class AddProductComponent {\r\n   @ViewChild('fileInput') el!: ElementRef;\r\n-  imageUrl: any = [\"../../../assts/add-img.webp\",\"../../../assts/add-img.webp\",\"../../../assts/add-img.webp\",\"../../../assts/add-img.webp\"];\r\n-  registrationForm!: FormGroup\r\n+  imageUrl: any = [\r\n+    '../../../assts/add-img.webp',\r\n+    '../../../assts/add-img.webp',\r\n+    '../../../assts/add-img.webp',\r\n+    '../../../assts/add-img.webp',\r\n+  ];\r\n+  registrationForm!: FormGroup;\r\n   editFile: boolean = true;\r\n   removeUpload: boolean = false;\r\n-    readonly addOnBlur = true;\r\n+  readonly addOnBlur = true;\r\n   readonly separatorKeysCodes = [ENTER, COMMA] as const;\r\n-  readonly fruits = signal<any[]>([{name: 'Lemon'}, {name: 'Lime'}, {name: 'Apple'}]);\r\n+  readonly fruits = signal<any[]>([\r\n+    { name: 'Lemon' },\r\n+    { name: 'Lime' },\r\n+    { name: 'Apple' },\r\n+  ]);\r\n   readonly announcer = inject(LiveAnnouncer);\r\n   productForm!: FormGroup;\r\n-    myControl = new FormControl('');\r\n-        myControl1 = new FormControl('');\r\n+  myControl = new FormControl('');\r\n+  myControl1 = new FormControl('');\r\n   options: string[] = ['s', 'm', 'l', 'xl', 'xxl'];\r\n-  colors: string[] = ['yellow','white','pink','olive','navy','red']\r\n+  colors: string[] = ['yellow', 'white', 'pink', 'olive', 'navy', 'red'];\r\n   filteredOptions!: Observable<string[]>;\r\n   filteredColors!: Observable<string[]>;\r\n   constructor(private fb: FormBuilder, private cd: ChangeDetectorRef) {\r\n-this.productForm = this.fb.group({\r\n+    this.productForm = this.fb.group({\r\n       title: ['', Validators.required],\r\n       description: [''],\r\n       type: [''],\r\n       brand: [''],\r\n@@ -52,9 +102,9 @@\n       category: [''],\r\n       price: [''],\r\n       discount: [''],\r\n       stock: [''],\r\n-      newProduct: [false]\r\n+      newProduct: [false],\r\n     });\r\n   }\r\n \r\n   typeArray = [\r\n@@ -70,27 +120,27 @@\n     { key: 'Beauty', value: 'beauty' },\r\n     { key: 'Tools', value: 'tools' },\r\n     { key: 'Gym', value: 'gym' },\r\n     { key: 'Marijuana', value: 'marijuana' },\r\n-  ]\r\n+  ];\r\n \r\n   brandArray = [\r\n     { key: 'Nike', value: 'nike' },\r\n     { key: 'Zara', value: 'zara' },\r\n     { key: 'Denim', value: 'denim' },\r\n     { key: 'Madame', value: 'madame' },\r\n     { key: 'Biba', value: 'biba' },\r\n     { key: 'Max', value: 'max' },\r\n-  ]\r\n+  ];\r\n \r\n   collectionArray = [\r\n     { key: 'New products', value: 'new products' },\r\n     { key: 'Best sellers', value: 'best sellers' },\r\n     { key: 'Featured products', value: 'featured products' },\r\n     { key: 'On sale', value: 'on sale' },\r\n     { key: 'New arrival', value: 'new arrival' },\r\n     { key: 'Trending product', value: 'trending product' },\r\n-  ]\r\n+  ];\r\n   categoryArray = [\r\n     { key: 'Fashion', value: 'Women' },\r\n     { key: 'Shoes', value: 'shoes' },\r\n     { key: 'Bags', value: 'bags' },\r\n@@ -103,32 +153,36 @@\n     { key: 'Beauty', value: 'beauty' },\r\n     { key: 'Tools', value: 'tools' },\r\n     { key: 'Gym', value: 'gym' },\r\n     { key: 'Marijuana', value: 'marijuana' },\r\n-  ]\r\n+  ];\r\n \r\n-    ngOnInit() {\r\n+  ngOnInit() {\r\n     this.filteredOptions = this.myControl.valueChanges.pipe(\r\n       startWith(''),\r\n-      map(value => this._filter(value || '')),\r\n+      map((value) => this._filter(value || ''))\r\n     );\r\n \r\n-        this.filteredColors = this.myControl1.valueChanges.pipe(\r\n+    this.filteredColors = this.myControl1.valueChanges.pipe(\r\n       startWith(''),\r\n-      map(value => this._filter1(value || '')),\r\n+      map((value) => this._filter1(value || ''))\r\n     );\r\n   }\r\n \r\n   private _filter(value: string): string[] {\r\n     const filterValue = value.toLowerCase();\r\n \r\n-    return this.options.filter(option => option.toLowerCase().includes(filterValue));\r\n+    return this.options.filter((option) =>\r\n+      option.toLowerCase().includes(filterValue)\r\n+    );\r\n   }\r\n \r\n-    private _filter1(value: string): string[] {\r\n+  private _filter1(value: string): string[] {\r\n     const filterValue = value.toLowerCase();\r\n \r\n-    return this.colors.filter(option => option.toLowerCase().includes(filterValue));\r\n+    return this.colors.filter((option) =>\r\n+      option.toLowerCase().includes(filterValue)\r\n+    );\r\n   }\r\n \r\n   uploadFile(event: any) {\r\n     let reader = new FileReader(); // HTML5 FileReader API\r\n@@ -139,33 +193,32 @@\n       // When file uploads set it to file formcontrol\r\n       reader.onload = () => {\r\n         this.imageUrl = reader.result;\r\n         this.registrationForm.patchValue({\r\n-          file: reader.result\r\n+          file: reader.result,\r\n         });\r\n         this.editFile = false;\r\n         this.removeUpload = true;\r\n-      }\r\n+      };\r\n       // ChangeDetectorRef since file is loading outside the zone\r\n       this.cd.markForCheck();\r\n     }\r\n   }\r\n \r\n-\r\n-   add(event: MatChipInputEvent): void {\r\n+  add(event: MatChipInputEvent): void {\r\n     const value = (event.value || '').trim();\r\n \r\n     // Add our fruit\r\n     if (value) {\r\n-      this.fruits.update(fruits => [...fruits, {name: value}]);\r\n+      this.fruits.update((fruits) => [...fruits, { name: value }]);\r\n     }\r\n \r\n     // Clear the input value\r\n     event.chipInput!.clear();\r\n   }\r\n \r\n   remove(fruit: Fruit): void {\r\n-    this.fruits.update(fruits => {\r\n+    this.fruits.update((fruits) => {\r\n       const index = fruits.indexOf(fruit);\r\n       if (index < 0) {\r\n         return fruits;\r\n       }\r\n@@ -185,9 +238,9 @@\n       return;\r\n     }\r\n \r\n     // Edit existing fruit\r\n-    this.fruits.update(fruits => {\r\n+    this.fruits.update((fruits) => {\r\n       const index = fruits.indexOf(fruit);\r\n       if (index >= 0) {\r\n         fruits[index].name = value;\r\n         return [...fruits];\r\n@@ -195,17 +248,15 @@\n       return fruits;\r\n     });\r\n   }\r\n \r\n+  jsonTest() {\r\n+    if (this.productForm.valid) {\r\n+      const formData = this.productForm.value;\r\n \r\n-  jsonTest(){\r\n-        if (this.productForm.valid) {\r\n-          const  formData = this.productForm.value\r\n-\r\n-          formData.sale = true\r\n+      formData.sale = true;\r\n       console.log('Form Data:', this.productForm.value);\r\n     } else {\r\n       this.productForm.markAllAsTouched();\r\n     }\r\n   }\r\n-  }\r\n-\r\n+}\r\n"
                },
                {
                    "date": 1749999881426,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,8 +12,9 @@\n import { MatIconModule } from '@angular/material/icon';\r\n import { NgFor, NgIf } from '@angular/common';\r\n import { MatExpansionModule } from '@angular/material/expansion';\r\n import {\r\n+  FormArray,\r\n   FormBuilder,\r\n   FormControl,\r\n   FormGroup,\r\n   ReactiveFormsModule,\r\n@@ -167,8 +168,85 @@\n       map((value) => this._filter1(value || ''))\r\n     );\r\n   }\r\n \r\n+\r\n+\r\n+\r\n+\r\n+\r\n+  \r\n+    get imageDetails(): FormArray {\r\n+      return this.productForm.get('images Details') as FormArray;\r\n+    }\r\n+  \r\n+    newImage(): FormGroup {\r\n+      return this.fb.group({\r\n+        alt: ['', Validators.required],\r\n+        src: ['', Validators.required], // base64 string\r\n+        preview: [''], // for image preview (not submitted)\r\n+        'variant Details': this.fb.array([this.newVariant()])\r\n+      });\r\n+    }\r\n+  \r\n+    newVariant(): FormGroup {\r\n+      return this.fb.group({\r\n+        sku: ['', Validators.required],\r\n+        size: ['', Validators.required],\r\n+        color: ['', Validators.required]\r\n+      });\r\n+    }\r\n+  \r\n+    addImage() {\r\n+      this.imageDetails.push(this.newImage());\r\n+    }\r\n+  \r\n+    removeImage(index: number) {\r\n+      this.imageDetails.removeAt(index);\r\n+    }\r\n+  \r\n+    getVariants(imageIndex: number): FormArray {\r\n+      return this.imageDetails.at(imageIndex).get('variant Details') as FormArray;\r\n+    }\r\n+  \r\n+    addVariant(imageIndex: number) {\r\n+      this.getVariants(imageIndex).push(this.newVariant());\r\n+    }\r\n+  \r\n+    removeVariant(imageIndex: number, variantIndex: number) {\r\n+      this.getVariants(imageIndex).removeAt(variantIndex);\r\n+    }\r\n+  \r\n+    async onFileChange(event: any, imageIndex: number) {\r\n+      const file = event.target.files[0];\r\n+      if (file) {\r\n+        const base64 = await this.convertToBase64(file);\r\n+        const group = this.imageDetails.at(imageIndex);\r\n+        group.patchValue({ src: base64, preview: base64 });\r\n+      }\r\n+    }\r\n+  \r\n+    convertToBase64(file: File): Promise<string> {\r\n+      return new Promise((resolve, reject) => {\r\n+        const reader = new FileReader();\r\n+        reader.readAsDataURL(file);\r\n+        reader.onload = () => resolve(reader.result as string);\r\n+        reader.onerror = error => reject(error);\r\n+      });\r\n+    }\r\n+  \r\n+    onSubmit() {\r\n+      const data = JSON.parse(JSON.stringify(this.productForm.value));\r\n+      // remove preview field before submit\r\n+      data[\"images Details\"].forEach((img: any) => delete img.preview);\r\n+      console.log('Final Payload:', data);\r\n+      // You can now POST this to API\r\n+    }\r\n+\r\n+\r\n+\r\n+    \r\n+\r\n   private _filter(value: string): string[] {\r\n     const filterValue = value.toLowerCase();\r\n \r\n     return this.options.filter((option) =>\r\n"
                },
                {
                    "date": 1750000241763,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -105,8 +105,13 @@\n       discount: [''],\r\n       stock: [''],\r\n       newProduct: [false],\r\n     });\r\n+\r\n+        this.productForm = this.fb.group({\r\n+      'images Details': this.fb.array([]) // Note: key with space\r\n+    });\r\n+    this.addImage(); // One initial image\r\n   }\r\n \r\n   typeArray = [\r\n     { key: 'Fashion', value: 'fashion' },\r\n"
                },
                {
                    "date": 1750000737739,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -85,9 +85,9 @@\n     { name: 'Lime' },\r\n     { name: 'Apple' },\r\n   ]);\r\n   readonly announcer = inject(LiveAnnouncer);\r\n-  productForm!: FormGroup;\r\n+  productForm: FormGroup;\r\n   myControl = new FormControl('');\r\n   myControl1 = new FormControl('');\r\n   options: string[] = ['s', 'm', 'l', 'xl', 'xxl'];\r\n   colors: string[] = ['yellow', 'white', 'pink', 'olive', 'navy', 'red'];\r\n"
                },
                {
                    "date": 1750001126661,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -86,8 +86,9 @@\n     { name: 'Apple' },\r\n   ]);\r\n   readonly announcer = inject(LiveAnnouncer);\r\n   productForm: FormGroup;\r\n+    productForm1!: FormGroup;\r\n   myControl = new FormControl('');\r\n   myControl1 = new FormControl('');\r\n   options: string[] = ['s', 'm', 'l', 'xl', 'xxl'];\r\n   colors: string[] = ['yellow', 'white', 'pink', 'olive', 'navy', 'red'];\r\n"
                },
                {
                    "date": 1750001139846,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -181,9 +181,9 @@\n \r\n \r\n   \r\n     get imageDetails(): FormArray {\r\n-      return this.productForm.get('images Details') as FormArray;\r\n+      return this.productForm1.get('images Details') as FormArray;\r\n     }\r\n   \r\n     newImage(): FormGroup {\r\n       return this.fb.group({\r\n"
                },
                {
                    "date": 1750001215160,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,102 +1,48 @@\n-import {\r\n-  ChangeDetectorRef,\r\n-  Component,\r\n-  ElementRef,\r\n-  inject,\r\n-  signal,\r\n-  ViewChild,\r\n-} from '@angular/core';\r\n+import { ChangeDetectorRef, Component, ElementRef, inject, signal, ViewChild } from '@angular/core';\r\n import { MatSelectModule } from '@angular/material/select';\r\n import { MatInputModule } from '@angular/material/input';\r\n import { MatFormFieldModule } from '@angular/material/form-field';\r\n-import { MatIconModule } from '@angular/material/icon';\r\n-import { NgFor, NgIf } from '@angular/common';\r\n+import { MatIconModule } from '@angular/material/icon'\r\n+import { NgFor } from '@angular/common';\r\n import { MatExpansionModule } from '@angular/material/expansion';\r\n-import {\r\n-  FormArray,\r\n-  FormBuilder,\r\n-  FormControl,\r\n-  FormGroup,\r\n-  ReactiveFormsModule,\r\n-  Validators,\r\n-} from '@angular/forms';\r\n-import {\r\n-  MatChipEditedEvent,\r\n-  MatChipInputEvent,\r\n-  MatChipsModule,\r\n-} from '@angular/material/chips';\r\n-import { COMMA, ENTER } from '@angular/cdk/keycodes';\r\n+import { FormBuilder, FormControl, FormGroup, ReactiveFormsModule, Validators } from '@angular/forms';\r\n+import {MatChipEditedEvent, MatChipInputEvent, MatChipsModule} from '@angular/material/chips';\r\n+import {COMMA, ENTER} from '@angular/cdk/keycodes';\r\n import { LiveAnnouncer } from '@angular/cdk/a11y';\r\n-import { Observable } from 'rxjs';\r\n-import { map, startWith } from 'rxjs/operators';\r\n-import { AsyncPipe } from '@angular/common';\r\n-import { MatAutocompleteModule } from '@angular/material/autocomplete';\r\n-import { MatButtonModule } from '@angular/material/button';\r\n-import { MatCardModule } from '@angular/material/card';\r\n-import { MatTabsModule } from '@angular/material/tabs';\r\n-\r\n+import {Observable} from 'rxjs';\r\n+import {map, startWith} from 'rxjs/operators';\r\n+import {AsyncPipe} from '@angular/common';\r\n+import {MatAutocompleteModule} from '@angular/material/autocomplete';\r\n export interface Fruit {\r\n   name: string;\r\n }\r\n @Component({\r\n   selector: 'app-add-product',\r\n   standalone: true,\r\n-  imports: [\r\n-    MatFormFieldModule,\r\n-    MatButtonModule,\r\n-    MatInputModule,\r\n-    AsyncPipe,\r\n-    MatAutocompleteModule,\r\n-    MatInputModule,\r\n-    MatIconModule,\r\n-    MatChipsModule,\r\n-    MatIconModule,\r\n-    MatSelectModule,\r\n-    NgFor,\r\n-    MatExpansionModule,\r\n-    ReactiveFormsModule,\r\n-    MatCardModule,\r\n-    MatButtonModule,\r\n-    MatInputModule,\r\n-    MatFormFieldModule,\r\n-    NgFor,\r\n-    NgIf,\r\n-    MatTabsModule,\r\n-    MatIconModule,\r\n-  ],\r\n+  imports: [MatFormFieldModule, MatInputModule, AsyncPipe, MatAutocompleteModule, MatInputModule, MatIconModule, MatChipsModule, MatIconModule, MatSelectModule, NgFor, MatExpansionModule, ReactiveFormsModule],\r\n   templateUrl: './add-product.component.html',\r\n-  styleUrl: './add-product.component.scss',\r\n+  styleUrl: './add-product.component.scss'\r\n })\r\n export class AddProductComponent {\r\n   @ViewChild('fileInput') el!: ElementRef;\r\n-  imageUrl: any = [\r\n-    '../../../assts/add-img.webp',\r\n-    '../../../assts/add-img.webp',\r\n-    '../../../assts/add-img.webp',\r\n-    '../../../assts/add-img.webp',\r\n-  ];\r\n-  registrationForm!: FormGroup;\r\n+  imageUrl: any = [\"../../../assts/add-img.webp\",\"../../../assts/add-img.webp\",\"../../../assts/add-img.webp\",\"../../../assts/add-img.webp\"];\r\n+  registrationForm!: FormGroup\r\n   editFile: boolean = true;\r\n   removeUpload: boolean = false;\r\n-  readonly addOnBlur = true;\r\n+    readonly addOnBlur = true;\r\n   readonly separatorKeysCodes = [ENTER, COMMA] as const;\r\n-  readonly fruits = signal<any[]>([\r\n-    { name: 'Lemon' },\r\n-    { name: 'Lime' },\r\n-    { name: 'Apple' },\r\n-  ]);\r\n+  readonly fruits = signal<any[]>([{name: 'Lemon'}, {name: 'Lime'}, {name: 'Apple'}]);\r\n   readonly announcer = inject(LiveAnnouncer);\r\n-  productForm: FormGroup;\r\n-    productForm1!: FormGroup;\r\n-  myControl = new FormControl('');\r\n-  myControl1 = new FormControl('');\r\n+  productForm!: FormGroup;\r\n+    myControl = new FormControl('');\r\n+        myControl1 = new FormControl('');\r\n   options: string[] = ['s', 'm', 'l', 'xl', 'xxl'];\r\n-  colors: string[] = ['yellow', 'white', 'pink', 'olive', 'navy', 'red'];\r\n+  colors: string[] = ['yellow','white','pink','olive','navy','red']\r\n   filteredOptions!: Observable<string[]>;\r\n   filteredColors!: Observable<string[]>;\r\n   constructor(private fb: FormBuilder, private cd: ChangeDetectorRef) {\r\n-    this.productForm = this.fb.group({\r\n+this.productForm = this.fb.group({\r\n       title: ['', Validators.required],\r\n       description: [''],\r\n       type: [''],\r\n       brand: [''],\r\n@@ -104,15 +50,10 @@\n       category: [''],\r\n       price: [''],\r\n       discount: [''],\r\n       stock: [''],\r\n-      newProduct: [false],\r\n+      newProduct: [false]\r\n     });\r\n-\r\n-        this.productForm = this.fb.group({\r\n-      'images Details': this.fb.array([]) // Note: key with space\r\n-    });\r\n-    this.addImage(); // One initial image\r\n   }\r\n \r\n   typeArray = [\r\n     { key: 'Fashion', value: 'fashion' },\r\n@@ -127,27 +68,27 @@\n     { key: 'Beauty', value: 'beauty' },\r\n     { key: 'Tools', value: 'tools' },\r\n     { key: 'Gym', value: 'gym' },\r\n     { key: 'Marijuana', value: 'marijuana' },\r\n-  ];\r\n+  ]\r\n \r\n   brandArray = [\r\n     { key: 'Nike', value: 'nike' },\r\n     { key: 'Zara', value: 'zara' },\r\n     { key: 'Denim', value: 'denim' },\r\n     { key: 'Madame', value: 'madame' },\r\n     { key: 'Biba', value: 'biba' },\r\n     { key: 'Max', value: 'max' },\r\n-  ];\r\n+  ]\r\n \r\n   collectionArray = [\r\n     { key: 'New products', value: 'new products' },\r\n     { key: 'Best sellers', value: 'best sellers' },\r\n     { key: 'Featured products', value: 'featured products' },\r\n     { key: 'On sale', value: 'on sale' },\r\n     { key: 'New arrival', value: 'new arrival' },\r\n     { key: 'Trending product', value: 'trending product' },\r\n-  ];\r\n+  ]\r\n   categoryArray = [\r\n     { key: 'Fashion', value: 'Women' },\r\n     { key: 'Shoes', value: 'shoes' },\r\n     { key: 'Bags', value: 'bags' },\r\n@@ -160,113 +101,32 @@\n     { key: 'Beauty', value: 'beauty' },\r\n     { key: 'Tools', value: 'tools' },\r\n     { key: 'Gym', value: 'gym' },\r\n     { key: 'Marijuana', value: 'marijuana' },\r\n-  ];\r\n+  ]\r\n \r\n-  ngOnInit() {\r\n+    ngOnInit() {\r\n     this.filteredOptions = this.myControl.valueChanges.pipe(\r\n       startWith(''),\r\n-      map((value) => this._filter(value || ''))\r\n+      map(value => this._filter(value || '')),\r\n     );\r\n \r\n-    this.filteredColors = this.myControl1.valueChanges.pipe(\r\n+        this.filteredColors = this.myControl1.valueChanges.pipe(\r\n       startWith(''),\r\n-      map((value) => this._filter1(value || ''))\r\n+      map(value => this._filter1(value || '')),\r\n     );\r\n   }\r\n \r\n-\r\n-\r\n-\r\n-\r\n-\r\n-  \r\n-    get imageDetails(): FormArray {\r\n-      return this.productForm1.get('images Details') as FormArray;\r\n-    }\r\n-  \r\n-    newImage(): FormGroup {\r\n-      return this.fb.group({\r\n-        alt: ['', Validators.required],\r\n-        src: ['', Validators.required], // base64 string\r\n-        preview: [''], // for image preview (not submitted)\r\n-        'variant Details': this.fb.array([this.newVariant()])\r\n-      });\r\n-    }\r\n-  \r\n-    newVariant(): FormGroup {\r\n-      return this.fb.group({\r\n-        sku: ['', Validators.required],\r\n-        size: ['', Validators.required],\r\n-        color: ['', Validators.required]\r\n-      });\r\n-    }\r\n-  \r\n-    addImage() {\r\n-      this.imageDetails.push(this.newImage());\r\n-    }\r\n-  \r\n-    removeImage(index: number) {\r\n-      this.imageDetails.removeAt(index);\r\n-    }\r\n-  \r\n-    getVariants(imageIndex: number): FormArray {\r\n-      return this.imageDetails.at(imageIndex).get('variant Details') as FormArray;\r\n-    }\r\n-  \r\n-    addVariant(imageIndex: number) {\r\n-      this.getVariants(imageIndex).push(this.newVariant());\r\n-    }\r\n-  \r\n-    removeVariant(imageIndex: number, variantIndex: number) {\r\n-      this.getVariants(imageIndex).removeAt(variantIndex);\r\n-    }\r\n-  \r\n-    async onFileChange(event: any, imageIndex: number) {\r\n-      const file = event.target.files[0];\r\n-      if (file) {\r\n-        const base64 = await this.convertToBase64(file);\r\n-        const group = this.imageDetails.at(imageIndex);\r\n-        group.patchValue({ src: base64, preview: base64 });\r\n-      }\r\n-    }\r\n-  \r\n-    convertToBase64(file: File): Promise<string> {\r\n-      return new Promise((resolve, reject) => {\r\n-        const reader = new FileReader();\r\n-        reader.readAsDataURL(file);\r\n-        reader.onload = () => resolve(reader.result as string);\r\n-        reader.onerror = error => reject(error);\r\n-      });\r\n-    }\r\n-  \r\n-    onSubmit() {\r\n-      const data = JSON.parse(JSON.stringify(this.productForm.value));\r\n-      // remove preview field before submit\r\n-      data[\"images Details\"].forEach((img: any) => delete img.preview);\r\n-      console.log('Final Payload:', data);\r\n-      // You can now POST this to API\r\n-    }\r\n-\r\n-\r\n-\r\n-    \r\n-\r\n   private _filter(value: string): string[] {\r\n     const filterValue = value.toLowerCase();\r\n \r\n-    return this.options.filter((option) =>\r\n-      option.toLowerCase().includes(filterValue)\r\n-    );\r\n+    return this.options.filter(option => option.toLowerCase().includes(filterValue));\r\n   }\r\n \r\n-  private _filter1(value: string): string[] {\r\n+    private _filter1(value: string): string[] {\r\n     const filterValue = value.toLowerCase();\r\n \r\n-    return this.colors.filter((option) =>\r\n-      option.toLowerCase().includes(filterValue)\r\n-    );\r\n+    return this.colors.filter(option => option.toLowerCase().includes(filterValue));\r\n   }\r\n \r\n   uploadFile(event: any) {\r\n     let reader = new FileReader(); // HTML5 FileReader API\r\n@@ -277,32 +137,33 @@\n       // When file uploads set it to file formcontrol\r\n       reader.onload = () => {\r\n         this.imageUrl = reader.result;\r\n         this.registrationForm.patchValue({\r\n-          file: reader.result,\r\n+          file: reader.result\r\n         });\r\n         this.editFile = false;\r\n         this.removeUpload = true;\r\n-      };\r\n+      }\r\n       // ChangeDetectorRef since file is loading outside the zone\r\n       this.cd.markForCheck();\r\n     }\r\n   }\r\n \r\n-  add(event: MatChipInputEvent): void {\r\n+\r\n+   add(event: MatChipInputEvent): void {\r\n     const value = (event.value || '').trim();\r\n \r\n     // Add our fruit\r\n     if (value) {\r\n-      this.fruits.update((fruits) => [...fruits, { name: value }]);\r\n+      this.fruits.update(fruits => [...fruits, {name: value}]);\r\n     }\r\n \r\n     // Clear the input value\r\n     event.chipInput!.clear();\r\n   }\r\n \r\n   remove(fruit: Fruit): void {\r\n-    this.fruits.update((fruits) => {\r\n+    this.fruits.update(fruits => {\r\n       const index = fruits.indexOf(fruit);\r\n       if (index < 0) {\r\n         return fruits;\r\n       }\r\n@@ -322,9 +183,9 @@\n       return;\r\n     }\r\n \r\n     // Edit existing fruit\r\n-    this.fruits.update((fruits) => {\r\n+    this.fruits.update(fruits => {\r\n       const index = fruits.indexOf(fruit);\r\n       if (index >= 0) {\r\n         fruits[index].name = value;\r\n         return [...fruits];\r\n@@ -332,15 +193,17 @@\n       return fruits;\r\n     });\r\n   }\r\n \r\n-  jsonTest() {\r\n-    if (this.productForm.valid) {\r\n-      const formData = this.productForm.value;\r\n \r\n-      formData.sale = true;\r\n+  jsonTest(){\r\n+        if (this.productForm.valid) {\r\n+          const  formData = this.productForm.value\r\n+\r\n+          formData.sale = true\r\n       console.log('Form Data:', this.productForm.value);\r\n     } else {\r\n       this.productForm.markAllAsTouched();\r\n     }\r\n   }\r\n-}\r\n+  }\r\n+\r\n"
                },
                {
                    "date": 1750001345714,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,48 +1,91 @@\n-import { ChangeDetectorRef, Component, ElementRef, inject, signal, ViewChild } from '@angular/core';\r\n+import {\r\n+  ChangeDetectorRef,\r\n+  Component,\r\n+  ElementRef,\r\n+  inject,\r\n+  signal,\r\n+  ViewChild,\r\n+} from '@angular/core';\r\n import { MatSelectModule } from '@angular/material/select';\r\n import { MatInputModule } from '@angular/material/input';\r\n import { MatFormFieldModule } from '@angular/material/form-field';\r\n-import { MatIconModule } from '@angular/material/icon'\r\n+import { MatIconModule } from '@angular/material/icon';\r\n import { NgFor } from '@angular/common';\r\n import { MatExpansionModule } from '@angular/material/expansion';\r\n-import { FormBuilder, FormControl, FormGroup, ReactiveFormsModule, Validators } from '@angular/forms';\r\n-import {MatChipEditedEvent, MatChipInputEvent, MatChipsModule} from '@angular/material/chips';\r\n-import {COMMA, ENTER} from '@angular/cdk/keycodes';\r\n+import {\r\n+  FormBuilder,\r\n+  FormControl,\r\n+  FormGroup,\r\n+  ReactiveFormsModule,\r\n+  Validators,\r\n+} from '@angular/forms';\r\n+import {\r\n+  MatChipEditedEvent,\r\n+  MatChipInputEvent,\r\n+  MatChipsModule,\r\n+} from '@angular/material/chips';\r\n+import { COMMA, ENTER } from '@angular/cdk/keycodes';\r\n import { LiveAnnouncer } from '@angular/cdk/a11y';\r\n-import {Observable} from 'rxjs';\r\n-import {map, startWith} from 'rxjs/operators';\r\n-import {AsyncPipe} from '@angular/common';\r\n-import {MatAutocompleteModule} from '@angular/material/autocomplete';\r\n+import { Observable } from 'rxjs';\r\n+import { map, startWith } from 'rxjs/operators';\r\n+import { AsyncPipe } from '@angular/common';\r\n+import { MatAutocompleteModule } from '@angular/material/autocomplete';\r\n+import { MatButtonModule } from '@angular/material/button';\r\n+\r\n export interface Fruit {\r\n   name: string;\r\n }\r\n @Component({\r\n   selector: 'app-add-product',\r\n   standalone: true,\r\n-  imports: [MatFormFieldModule, MatInputModule, AsyncPipe, MatAutocompleteModule, MatInputModule, MatIconModule, MatChipsModule, MatIconModule, MatSelectModule, NgFor, MatExpansionModule, ReactiveFormsModule],\r\n+  imports: [\r\n+    MatFormFieldModule,\r\n+    MatButtonModule,\r\n+    MatInputModule,\r\n+    AsyncPipe,\r\n+    MatAutocompleteModule,\r\n+    MatInputModule,\r\n+    MatIconModule,\r\n+    MatChipsModule,\r\n+    MatIconModule,\r\n+    MatSelectModule,\r\n+    NgFor,\r\n+    MatExpansionModule,\r\n+    ReactiveFormsModule,\r\n+    \r\n+  ],\r\n   templateUrl: './add-product.component.html',\r\n-  styleUrl: './add-product.component.scss'\r\n+  styleUrl: './add-product.component.scss',\r\n })\r\n export class AddProductComponent {\r\n   @ViewChild('fileInput') el!: ElementRef;\r\n-  imageUrl: any = [\"../../../assts/add-img.webp\",\"../../../assts/add-img.webp\",\"../../../assts/add-img.webp\",\"../../../assts/add-img.webp\"];\r\n-  registrationForm!: FormGroup\r\n+  imageUrl: any = [\r\n+    '../../../assts/add-img.webp',\r\n+    '../../../assts/add-img.webp',\r\n+    '../../../assts/add-img.webp',\r\n+    '../../../assts/add-img.webp',\r\n+  ];\r\n+  registrationForm!: FormGroup;\r\n   editFile: boolean = true;\r\n   removeUpload: boolean = false;\r\n-    readonly addOnBlur = true;\r\n+  readonly addOnBlur = true;\r\n   readonly separatorKeysCodes = [ENTER, COMMA] as const;\r\n-  readonly fruits = signal<any[]>([{name: 'Lemon'}, {name: 'Lime'}, {name: 'Apple'}]);\r\n+  readonly fruits = signal<any[]>([\r\n+    { name: 'Lemon' },\r\n+    { name: 'Lime' },\r\n+    { name: 'Apple' },\r\n+  ]);\r\n   readonly announcer = inject(LiveAnnouncer);\r\n   productForm!: FormGroup;\r\n-    myControl = new FormControl('');\r\n-        myControl1 = new FormControl('');\r\n+  myControl = new FormControl('');\r\n+  myControl1 = new FormControl('');\r\n   options: string[] = ['s', 'm', 'l', 'xl', 'xxl'];\r\n-  colors: string[] = ['yellow','white','pink','olive','navy','red']\r\n+  colors: string[] = ['yellow', 'white', 'pink', 'olive', 'navy', 'red'];\r\n   filteredOptions!: Observable<string[]>;\r\n   filteredColors!: Observable<string[]>;\r\n   constructor(private fb: FormBuilder, private cd: ChangeDetectorRef) {\r\n-this.productForm = this.fb.group({\r\n+    this.productForm = this.fb.group({\r\n       title: ['', Validators.required],\r\n       description: [''],\r\n       type: [''],\r\n       brand: [''],\r\n@@ -50,9 +93,9 @@\n       category: [''],\r\n       price: [''],\r\n       discount: [''],\r\n       stock: [''],\r\n-      newProduct: [false]\r\n+      newProduct: [false],\r\n     });\r\n   }\r\n \r\n   typeArray = [\r\n@@ -68,27 +111,27 @@\n     { key: 'Beauty', value: 'beauty' },\r\n     { key: 'Tools', value: 'tools' },\r\n     { key: 'Gym', value: 'gym' },\r\n     { key: 'Marijuana', value: 'marijuana' },\r\n-  ]\r\n+  ];\r\n \r\n   brandArray = [\r\n     { key: 'Nike', value: 'nike' },\r\n     { key: 'Zara', value: 'zara' },\r\n     { key: 'Denim', value: 'denim' },\r\n     { key: 'Madame', value: 'madame' },\r\n     { key: 'Biba', value: 'biba' },\r\n     { key: 'Max', value: 'max' },\r\n-  ]\r\n+  ];\r\n \r\n   collectionArray = [\r\n     { key: 'New products', value: 'new products' },\r\n     { key: 'Best sellers', value: 'best sellers' },\r\n     { key: 'Featured products', value: 'featured products' },\r\n     { key: 'On sale', value: 'on sale' },\r\n     { key: 'New arrival', value: 'new arrival' },\r\n     { key: 'Trending product', value: 'trending product' },\r\n-  ]\r\n+  ];\r\n   categoryArray = [\r\n     { key: 'Fashion', value: 'Women' },\r\n     { key: 'Shoes', value: 'shoes' },\r\n     { key: 'Bags', value: 'bags' },\r\n@@ -101,32 +144,36 @@\n     { key: 'Beauty', value: 'beauty' },\r\n     { key: 'Tools', value: 'tools' },\r\n     { key: 'Gym', value: 'gym' },\r\n     { key: 'Marijuana', value: 'marijuana' },\r\n-  ]\r\n+  ];\r\n \r\n-    ngOnInit() {\r\n+  ngOnInit() {\r\n     this.filteredOptions = this.myControl.valueChanges.pipe(\r\n       startWith(''),\r\n-      map(value => this._filter(value || '')),\r\n+      map((value) => this._filter(value || ''))\r\n     );\r\n \r\n-        this.filteredColors = this.myControl1.valueChanges.pipe(\r\n+    this.filteredColors = this.myControl1.valueChanges.pipe(\r\n       startWith(''),\r\n-      map(value => this._filter1(value || '')),\r\n+      map((value) => this._filter1(value || ''))\r\n     );\r\n   }\r\n \r\n   private _filter(value: string): string[] {\r\n     const filterValue = value.toLowerCase();\r\n \r\n-    return this.options.filter(option => option.toLowerCase().includes(filterValue));\r\n+    return this.options.filter((option) =>\r\n+      option.toLowerCase().includes(filterValue)\r\n+    );\r\n   }\r\n \r\n-    private _filter1(value: string): string[] {\r\n+  private _filter1(value: string): string[] {\r\n     const filterValue = value.toLowerCase();\r\n \r\n-    return this.colors.filter(option => option.toLowerCase().includes(filterValue));\r\n+    return this.colors.filter((option) =>\r\n+      option.toLowerCase().includes(filterValue)\r\n+    );\r\n   }\r\n \r\n   uploadFile(event: any) {\r\n     let reader = new FileReader(); // HTML5 FileReader API\r\n@@ -137,33 +184,32 @@\n       // When file uploads set it to file formcontrol\r\n       reader.onload = () => {\r\n         this.imageUrl = reader.result;\r\n         this.registrationForm.patchValue({\r\n-          file: reader.result\r\n+          file: reader.result,\r\n         });\r\n         this.editFile = false;\r\n         this.removeUpload = true;\r\n-      }\r\n+      };\r\n       // ChangeDetectorRef since file is loading outside the zone\r\n       this.cd.markForCheck();\r\n     }\r\n   }\r\n \r\n-\r\n-   add(event: MatChipInputEvent): void {\r\n+  add(event: MatChipInputEvent): void {\r\n     const value = (event.value || '').trim();\r\n \r\n     // Add our fruit\r\n     if (value) {\r\n-      this.fruits.update(fruits => [...fruits, {name: value}]);\r\n+      this.fruits.update((fruits) => [...fruits, { name: value }]);\r\n     }\r\n \r\n     // Clear the input value\r\n     event.chipInput!.clear();\r\n   }\r\n \r\n   remove(fruit: Fruit): void {\r\n-    this.fruits.update(fruits => {\r\n+    this.fruits.update((fruits) => {\r\n       const index = fruits.indexOf(fruit);\r\n       if (index < 0) {\r\n         return fruits;\r\n       }\r\n@@ -183,9 +229,9 @@\n       return;\r\n     }\r\n \r\n     // Edit existing fruit\r\n-    this.fruits.update(fruits => {\r\n+    this.fruits.update((fruits) => {\r\n       const index = fruits.indexOf(fruit);\r\n       if (index >= 0) {\r\n         fruits[index].name = value;\r\n         return [...fruits];\r\n@@ -193,17 +239,15 @@\n       return fruits;\r\n     });\r\n   }\r\n \r\n+  jsonTest() {\r\n+    if (this.productForm.valid) {\r\n+      const formData = this.productForm.value;\r\n \r\n-  jsonTest(){\r\n-        if (this.productForm.valid) {\r\n-          const  formData = this.productForm.value\r\n-\r\n-          formData.sale = true\r\n+      formData.sale = true;\r\n       console.log('Form Data:', this.productForm.value);\r\n     } else {\r\n       this.productForm.markAllAsTouched();\r\n     }\r\n   }\r\n-  }\r\n-\r\n+}\r\n"
                },
                {
                    "date": 1750001536865,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -147,100 +147,12 @@\n     { key: 'Marijuana', value: 'marijuana' },\r\n   ];\r\n \r\n   ngOnInit() {\r\n-    this.filteredOptions = this.myControl.valueChanges.pipe(\r\n-      startWith(''),\r\n-      map((value) => this._filter(value || ''))\r\n-    );\r\n \r\n-    this.filteredColors = this.myControl1.valueChanges.pipe(\r\n-      startWith(''),\r\n-      map((value) => this._filter1(value || ''))\r\n-    );\r\n   }\r\n \r\n-  private _filter(value: string): string[] {\r\n-    const filterValue = value.toLowerCase();\r\n \r\n-    return this.options.filter((option) =>\r\n-      option.toLowerCase().includes(filterValue)\r\n-    );\r\n-  }\r\n-\r\n-  private _filter1(value: string): string[] {\r\n-    const filterValue = value.toLowerCase();\r\n-\r\n-    return this.colors.filter((option) =>\r\n-      option.toLowerCase().includes(filterValue)\r\n-    );\r\n-  }\r\n-\r\n-  uploadFile(event: any) {\r\n-    let reader = new FileReader(); // HTML5 FileReader API\r\n-    let file = event.target.files[0];\r\n-    if (event.target.files && event.target.files[0]) {\r\n-      reader.readAsDataURL(file);\r\n-\r\n-      // When file uploads set it to file formcontrol\r\n-      reader.onload = () => {\r\n-        this.imageUrl = reader.result;\r\n-        this.registrationForm.patchValue({\r\n-          file: reader.result,\r\n-        });\r\n-        this.editFile = false;\r\n-        this.removeUpload = true;\r\n-      };\r\n-      // ChangeDetectorRef since file is loading outside the zone\r\n-      this.cd.markForCheck();\r\n-    }\r\n-  }\r\n-\r\n-  add(event: MatChipInputEvent): void {\r\n-    const value = (event.value || '').trim();\r\n-\r\n-    // Add our fruit\r\n-    if (value) {\r\n-      this.fruits.update((fruits) => [...fruits, { name: value }]);\r\n-    }\r\n-\r\n-    // Clear the input value\r\n-    event.chipInput!.clear();\r\n-  }\r\n-\r\n-  remove(fruit: Fruit): void {\r\n-    this.fruits.update((fruits) => {\r\n-      const index = fruits.indexOf(fruit);\r\n-      if (index < 0) {\r\n-        return fruits;\r\n-      }\r\n-\r\n-      fruits.splice(index, 1);\r\n-      this.announcer.announce(`Removed ${fruit.name}`);\r\n-      return [...fruits];\r\n-    });\r\n-  }\r\n-\r\n-  edit(fruit: Fruit, event: MatChipEditedEvent) {\r\n-    const value = event.value.trim();\r\n-\r\n-    // Remove fruit if it no longer has a name\r\n-    if (!value) {\r\n-      this.remove(fruit);\r\n-      return;\r\n-    }\r\n-\r\n-    // Edit existing fruit\r\n-    this.fruits.update((fruits) => {\r\n-      const index = fruits.indexOf(fruit);\r\n-      if (index >= 0) {\r\n-        fruits[index].name = value;\r\n-        return [...fruits];\r\n-      }\r\n-      return fruits;\r\n-    });\r\n-  }\r\n-\r\n   jsonTest() {\r\n     if (this.productForm.valid) {\r\n       const formData = this.productForm.value;\r\n \r\n"
                },
                {
                    "date": 1750001636762,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,29 +57,18 @@\n   templateUrl: './add-product.component.html',\r\n   styleUrl: './add-product.component.scss',\r\n })\r\n export class AddProductComponent {\r\n-  @ViewChild('fileInput') el!: ElementRef;\r\n   imageUrl: any = [\r\n     '../../../assts/add-img.webp',\r\n     '../../../assts/add-img.webp',\r\n     '../../../assts/add-img.webp',\r\n     '../../../assts/add-img.webp',\r\n   ];\r\n-  registrationForm!: FormGroup;\r\n-  editFile: boolean = true;\r\n-  removeUpload: boolean = false;\r\n-  readonly addOnBlur = true;\r\n-  readonly separatorKeysCodes = [ENTER, COMMA] as const;\r\n-  readonly fruits = signal<any[]>([\r\n-    { name: 'Lemon' },\r\n-    { name: 'Lime' },\r\n-    { name: 'Apple' },\r\n-  ]);\r\n-  readonly announcer = inject(LiveAnnouncer);\r\n+\r\n+\r\n   productForm!: FormGroup;\r\n-  myControl = new FormControl('');\r\n-  myControl1 = new FormControl('');\r\n+\r\n   options: string[] = ['s', 'm', 'l', 'xl', 'xxl'];\r\n   colors: string[] = ['yellow', 'white', 'pink', 'olive', 'navy', 'red'];\r\n   filteredOptions!: Observable<string[]>;\r\n   filteredColors!: Observable<string[]>;\r\n"
                },
                {
                    "date": 1750001679492,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,9 +41,8 @@\n   imports: [\r\n     MatFormFieldModule,\r\n     MatButtonModule,\r\n     MatInputModule,\r\n-    AsyncPipe,\r\n     MatAutocompleteModule,\r\n     MatInputModule,\r\n     MatIconModule,\r\n     MatChipsModule,\r\n"
                },
                {
                    "date": 1750001826981,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -64,16 +64,14 @@\n     '../../../assts/add-img.webp',\r\n   ];\r\n \r\n \r\n-  productForm!: FormGroup;\r\n+  productForm1!: FormGroup;\r\n \r\n   options: string[] = ['s', 'm', 'l', 'xl', 'xxl'];\r\n   colors: string[] = ['yellow', 'white', 'pink', 'olive', 'navy', 'red'];\r\n-  filteredOptions!: Observable<string[]>;\r\n-  filteredColors!: Observable<string[]>;\r\n   constructor(private fb: FormBuilder, private cd: ChangeDetectorRef) {\r\n-    this.productForm = this.fb.group({\r\n+    this.productForm1 = this.fb.group({\r\n       title: ['', Validators.required],\r\n       description: [''],\r\n       type: [''],\r\n       brand: [''],\r\n@@ -140,14 +138,14 @@\n   }\r\n \r\n \r\n   jsonTest() {\r\n-    if (this.productForm.valid) {\r\n-      const formData = this.productForm.value;\r\n+    if (this.productForm1.valid) {\r\n+      const formData = this.productForm1.value;\r\n \r\n       formData.sale = true;\r\n-      console.log('Form Data:', this.productForm.value);\r\n+      console.log('Form Data:', this.productForm1.value);\r\n     } else {\r\n-      this.productForm.markAllAsTouched();\r\n+      this.productForm1.markAllAsTouched();\r\n     }\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1750091222168,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,11 +9,12 @@\n import { MatSelectModule } from '@angular/material/select';\r\n import { MatInputModule } from '@angular/material/input';\r\n import { MatFormFieldModule } from '@angular/material/form-field';\r\n import { MatIconModule } from '@angular/material/icon';\r\n-import { NgFor } from '@angular/common';\r\n+import { NgFor, NgIf } from '@angular/common';\r\n import { MatExpansionModule } from '@angular/material/expansion';\r\n import {\r\n+  FormArray,\r\n   FormBuilder,\r\n   FormControl,\r\n   FormGroup,\r\n   ReactiveFormsModule,\r\n@@ -30,61 +31,48 @@\n import { map, startWith } from 'rxjs/operators';\r\n import { AsyncPipe } from '@angular/common';\r\n import { MatAutocompleteModule } from '@angular/material/autocomplete';\r\n import { MatButtonModule } from '@angular/material/button';\r\n+import { MatCardModule } from '@angular/material/card';\r\n+import { MatDividerModule } from '@angular/material/divider';\r\n+import { MatTabsModule, MatTabGroup } from '@angular/material/tabs';\r\n \r\n export interface Fruit {\r\n   name: string;\r\n }\r\n @Component({\r\n   selector: 'app-add-product',\r\n   standalone: true,\r\n   imports: [\r\n+    ReactiveFormsModule,\r\n+    NgFor,\r\n+    NgIf,\r\n+    MatTabsModule,\r\n+    MatCardModule,\r\n+    MatIconModule,\r\n     MatFormFieldModule,\r\n+    MatInputModule,\r\n     MatButtonModule,\r\n-    MatInputModule,\r\n+    MatExpansionModule,\r\n+    MatChipsModule,\r\n     MatAutocompleteModule,\r\n-    MatInputModule,\r\n-    MatIconModule,\r\n-    MatChipsModule,\r\n-    MatIconModule,\r\n     MatSelectModule,\r\n-    NgFor,\r\n-    MatExpansionModule,\r\n-    ReactiveFormsModule,\r\n-    \r\n+    MatDividerModule,\r\n   ],\r\n   templateUrl: './add-product.component.html',\r\n   styleUrl: './add-product.component.scss',\r\n })\r\n export class AddProductComponent {\r\n-  imageUrl: any = [\r\n+  productForm: FormGroup;\r\n+  @ViewChild('tabGroup') tabGroup!: MatTabGroup;\r\n+  @ViewChild('imageTabFocus', { static: false }) imageTabFocus!: ElementRef;\r\n+  imageUrl: any[] = [\r\n     '../../../assts/add-img.webp',\r\n     '../../../assts/add-img.webp',\r\n     '../../../assts/add-img.webp',\r\n     '../../../assts/add-img.webp',\r\n   ];\r\n \r\n-\r\n-  productForm1!: FormGroup;\r\n-\r\n-  options: string[] = ['s', 'm', 'l', 'xl', 'xxl'];\r\n-  colors: string[] = ['yellow', 'white', 'pink', 'olive', 'navy', 'red'];\r\n-  constructor(private fb: FormBuilder, private cd: ChangeDetectorRef) {\r\n-    this.productForm1 = this.fb.group({\r\n-      title: ['', Validators.required],\r\n-      description: [''],\r\n-      type: [''],\r\n-      brand: [''],\r\n-      collection: [[]],\r\n-      category: [''],\r\n-      price: [''],\r\n-      discount: [''],\r\n-      stock: [''],\r\n-      newProduct: [false],\r\n-    });\r\n-  }\r\n-\r\n   typeArray = [\r\n     { key: 'Fashion', value: 'fashion' },\r\n     { key: 'Shoes', value: 'shoes' },\r\n     { key: 'Bags', value: 'bags' },\r\n@@ -116,8 +104,9 @@\n     { key: 'On sale', value: 'on sale' },\r\n     { key: 'New arrival', value: 'new arrival' },\r\n     { key: 'Trending product', value: 'trending product' },\r\n   ];\r\n+\r\n   categoryArray = [\r\n     { key: 'Fashion', value: 'Women' },\r\n     { key: 'Shoes', value: 'shoes' },\r\n     { key: 'Bags', value: 'bags' },\r\n@@ -132,20 +121,125 @@\n     { key: 'Gym', value: 'gym' },\r\n     { key: 'Marijuana', value: 'marijuana' },\r\n   ];\r\n \r\n-  ngOnInit() {\r\n+  options: string[] = ['s', 'm', 'l', 'xl', 'xxl'];\r\n+  colors: string[] = ['yellow', 'white', 'pink', 'olive', 'navy', 'red'];\r\n \r\n+  constructor(private fb: FormBuilder) {\r\n+    this.productForm = this.fb.group({\r\n+      title: ['', Validators.required],\r\n+      description: ['', Validators.required],\r\n+      type: ['', Validators.required],\r\n+      brand: ['', Validators.required],\r\n+      collection: [[], Validators.required],\r\n+      category: ['', Validators.required],\r\n+      price: ['', Validators.required],\r\n+      discount: ['', Validators.required],\r\n+      stock: ['', Validators.required],\r\n+      newProduct: [false, Validators.requiredTrue],\r\n+      'images Details': this.fb.array([], Validators.required),\r\n+    });\r\n+\r\n+    this.addImage(); // Add initial image entry\r\n   }\r\n \r\n+  get imageDetails(): FormArray {\r\n+    return this.productForm.get('images Details') as FormArray;\r\n+  }\r\n \r\n+  newImage(): FormGroup {\r\n+    return this.fb.group({\r\n+      alt: ['image not found.', Validators.required],\r\n+      src: ['', Validators.required], // base64 string\r\n+      preview: [\r\n+        'https://repository-images.githubusercontent.com/229240000/2b1bba00-eae1-11ea-8b31-ea57fe8a3f95',\r\n+      ], // for UI preview only\r\n+      'variant Details': this.fb.array(\r\n+        [this.newVariant()],\r\n+        Validators.required\r\n+      ),\r\n+    });\r\n+  }\r\n+\r\n+  newVariant(): FormGroup {\r\n+    return this.fb.group({\r\n+      sku: ['', Validators.required],\r\n+      size: ['', Validators.required],\r\n+      color: ['', Validators.required],\r\n+    });\r\n+  }\r\n+\r\n+  addImage() {\r\n+    this.imageDetails.push(this.newImage());\r\n+  }\r\n+\r\n+  removeImage(index: number) {\r\n+    this.imageDetails.removeAt(index);\r\n+  }\r\n+\r\n+  getVariants(imageIndex: number): FormArray {\r\n+    return this.imageDetails.at(imageIndex).get('variant Details') as FormArray;\r\n+  }\r\n+\r\n+  addVariant(imageIndex: number) {\r\n+    this.getVariants(imageIndex).push(this.newVariant());\r\n+  }\r\n+\r\n+  removeVariant(imageIndex: number, variantIndex: number) {\r\n+    this.getVariants(imageIndex).removeAt(variantIndex);\r\n+  }\r\n+\r\n+  async onFileChange(event: any, imageIndex: number) {\r\n+    const file = event.target.files[0];\r\n+    if (file) {\r\n+      const base64 = await this.convertToBase64(file);\r\n+      const group = this.imageDetails.at(imageIndex);\r\n+      group.patchValue({ src: base64, preview: base64 });\r\n+    }\r\n+  }\r\n+\r\n+  convertToBase64(file: File): Promise<string> {\r\n+    return new Promise((resolve, reject) => {\r\n+      const reader = new FileReader();\r\n+      reader.readAsDataURL(file);\r\n+      reader.onload = () => resolve(reader.result as string);\r\n+      reader.onerror = (error) => reject(error);\r\n+    });\r\n+  }\r\n+\r\n   jsonTest() {\r\n-    if (this.productForm1.valid) {\r\n-      const formData = this.productForm1.value;\r\n+    console.log('Form Data:', this.productForm.value);\r\n \r\n+    if (this.productForm.valid) {\r\n+      const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n+      formData['images Details'].forEach((img: any) => delete img.preview);\r\n       formData.sale = true;\r\n-      console.log('Form Data:', this.productForm1.value);\r\n+      (formData.tags = ['s', 'm', 'pink', 'blue', 'biba']),\r\n+        console.log('Final Payload:', formData);\r\n     } else {\r\n-      this.productForm1.markAllAsTouched();\r\n+      this.markFormGroupTouched(this.productForm);\r\n+      console.warn('Form Invalid:', this.productForm);\r\n     }\r\n   }\r\n+\r\n+  markFormGroupTouched(formGroup: FormGroup | FormArray) {\r\n+    (Object as any).values(formGroup.controls).forEach((control: any) => {\r\n+      if (control.controls) {\r\n+        this.markFormGroupTouched(control); // recurse\r\n+      } else {\r\n+        control.markAsTouched();\r\n+      }\r\n+    });\r\n+  }\r\n+\r\n+  goToTab(index: number) {\r\n+    this.tabGroup.selectedIndex = index;\r\n+\r\n+    // Allow time for tab change before shifting focus\r\n+    setTimeout(() => {\r\n+      if (index === 1 && this.imageTabFocus) {\r\n+        this.imageTabFocus.nativeElement.focus();\r\n+      }\r\n+    }, 200); // Delay ensures tab is visible before focusing\r\n+  }\r\n }\r\n"
                },
                {
                    "date": 1750347234542,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -206,9 +206,9 @@\n       reader.onerror = (error) => reject(error);\r\n     });\r\n   }\r\n \r\n-  jsonTest() {\r\n+  Submit() {\r\n     console.log('Form Data:', this.productForm.value);\r\n \r\n     if (this.productForm.valid) {\r\n       const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n"
                },
                {
                    "date": 1750347709066,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -150,11 +150,8 @@\n   newImage(): FormGroup {\r\n     return this.fb.group({\r\n       alt: ['image not found.', Validators.required],\r\n       src: ['', Validators.required], // base64 string\r\n-      preview: [\r\n-        'https://repository-images.githubusercontent.com/229240000/2b1bba00-eae1-11ea-8b31-ea57fe8a3f95',\r\n-      ], // for UI preview only\r\n       'variant Details': this.fb.array(\r\n         [this.newVariant()],\r\n         Validators.required\r\n       ),\r\n"
                },
                {
                    "date": 1750347946605,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,8 +34,9 @@\n import { MatButtonModule } from '@angular/material/button';\r\n import { MatCardModule } from '@angular/material/card';\r\n import { MatDividerModule } from '@angular/material/divider';\r\n import { MatTabsModule, MatTabGroup } from '@angular/material/tabs';\r\n+import { ProductService } from '../../services/product.service';\r\n \r\n export interface Fruit {\r\n   name: string;\r\n }\r\n@@ -124,9 +125,9 @@\n \r\n   options: string[] = ['s', 'm', 'l', 'xl', 'xxl'];\r\n   colors: string[] = ['yellow', 'white', 'pink', 'olive', 'navy', 'red'];\r\n \r\n-  constructor(private fb: FormBuilder) {\r\n+  constructor(private fb: FormBuilder, private productService: ProductService) {\r\n     this.productForm = this.fb.group({\r\n       title: ['', Validators.required],\r\n       description: ['', Validators.required],\r\n       type: ['', Validators.required],\r\n@@ -204,19 +205,35 @@\n     });\r\n   }\r\n \r\n   Submit() {\r\n-    console.log('Form Data:', this.productForm.value);\r\n-\r\n     if (this.productForm.valid) {\r\n       const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n-      formData['images Details'].forEach((img: any) => delete img.preview);\r\n+\r\n+      // Clean preview fields if present\r\n+      formData['images Details'].forEach((img: any) => {\r\n+        delete img.preview;\r\n+      });\r\n+\r\n+      // Static values\r\n       formData.sale = true;\r\n-      (formData.tags = ['s', 'm', 'pink', 'blue', 'biba']),\r\n-        console.log('Final Payload:', formData);\r\n+      formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n+\r\n+      // Call service\r\n+      this.productService.createProduct(formData).subscribe({\r\n+        next: (res) => {\r\n+          console.log(' Product created:', res);\r\n+          alert('Product created successfully!');\r\n+          this.productForm.reset();\r\n+        },\r\n+        error: (err) => {\r\n+          console.error(' Error creating product:', err);\r\n+          alert('Failed to create product.');\r\n+        },\r\n+      });\r\n     } else {\r\n       this.markFormGroupTouched(this.productForm);\r\n-      console.warn('Form Invalid:', this.productForm);\r\n+      console.warn(' Form Invalid');\r\n     }\r\n   }\r\n \r\n   markFormGroupTouched(formGroup: FormGroup | FormArray) {\r\n"
                },
                {
                    "date": 1750593536554,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -108,8 +108,9 @@\n   ];\r\n \r\n   categoryArray = [\r\n     { key: 'Fashion', value: 'Women' },\r\n+    \r\n     { key: 'Shoes', value: 'shoes' },\r\n     { key: 'Bags', value: 'bags' },\r\n     { key: 'Watch', value: 'watch' },\r\n     { key: 'Flower', value: 'flower' },\r\n"
                },
                {
                    "date": 1750593583561,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,8 +90,9 @@\n   ];\r\n \r\n   brandArray = [\r\n     { key: 'Nike', value: 'nike' },\r\n+    {key:'Iphone', value: 'iphone'},\r\n     { key: 'Zara', value: 'zara' },\r\n     { key: 'Denim', value: 'denim' },\r\n     { key: 'Madame', value: 'madame' },\r\n     { key: 'Biba', value: 'biba' },\r\n@@ -108,9 +109,8 @@\n   ];\r\n \r\n   categoryArray = [\r\n     { key: 'Fashion', value: 'Women' },\r\n-    \r\n     { key: 'Shoes', value: 'shoes' },\r\n     { key: 'Bags', value: 'bags' },\r\n     { key: 'Watch', value: 'watch' },\r\n     { key: 'Flower', value: 'flower' },\r\n"
                },
                {
                    "date": 1752027649224,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -162,9 +162,9 @@\n \r\n   newVariant(): FormGroup {\r\n     return this.fb.group({\r\n       sku: ['', Validators.required],\r\n-      size: ['', Validators.required],\r\n+      size: ['0', Validators.required],\r\n       color: ['', Validators.required],\r\n     });\r\n   }\r\n \r\n"
                },
                {
                    "date": 1752027701522,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -122,9 +122,9 @@\n     { key: 'Tools', value: 'tools' },\r\n     { key: 'Gym', value: 'gym' },\r\n     { key: 'Marijuana', value: 'marijuana' },\r\n   ];\r\n-\r\n+skuOptions: string[] = ['SKU-001', 'SKU-002', 'SKU-003', 'SKU-004'];\r\n   options: string[] = ['s', 'm', 'l', 'xl', 'xxl'];\r\n   colors: string[] = ['yellow', 'white', 'pink', 'olive', 'navy', 'red'];\r\n \r\n   constructor(private fb: FormBuilder, private productService: ProductService) {\r\n"
                },
                {
                    "date": 1752027759633,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -125,8 +125,10 @@\n   ];\r\n skuOptions: string[] = ['SKU-001', 'SKU-002', 'SKU-003', 'SKU-004'];\r\n   options: string[] = ['s', 'm', 'l', 'xl', 'xxl'];\r\n   colors: string[] = ['yellow', 'white', 'pink', 'olive', 'navy', 'red'];\r\n+sizeOptions: string[] = ['XS', 'S', 'M', 'L', 'XL'];\r\n+colorOptions: string[] = ['Red', 'Blue', 'Green', 'Black', 'White'];\r\n \r\n   constructor(private fb: FormBuilder, private productService: ProductService) {\r\n     this.productForm = this.fb.group({\r\n       title: ['', Validators.required],\r\n"
                },
                {
                    "date": 1752027825969,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -126,9 +126,9 @@\n skuOptions: string[] = ['SKU-001', 'SKU-002', 'SKU-003', 'SKU-004'];\r\n   options: string[] = ['s', 'm', 'l', 'xl', 'xxl'];\r\n   colors: string[] = ['yellow', 'white', 'pink', 'olive', 'navy', 'red'];\r\n sizeOptions: string[] = ['XS', 'S', 'M', 'L', 'XL'];\r\n-colorOptions: string[] = ['Red', 'Blue', 'Green', 'Black', 'White'];\r\n+colorOptions: string[] = ['Red', 'Blue', 'Green', 'Black', 'White', 'Yellow'];\r\n \r\n   constructor(private fb: FormBuilder, private productService: ProductService) {\r\n     this.productForm = this.fb.group({\r\n       title: ['', Validators.required],\r\n"
                },
                {
                    "date": 1752027886765,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -126,9 +126,9 @@\n skuOptions: string[] = ['SKU-001', 'SKU-002', 'SKU-003', 'SKU-004'];\r\n   options: string[] = ['s', 'm', 'l', 'xl', 'xxl'];\r\n   colors: string[] = ['yellow', 'white', 'pink', 'olive', 'navy', 'red'];\r\n sizeOptions: string[] = ['XS', 'S', 'M', 'L', 'XL'];\r\n-colorOptions: string[] = ['Red', 'Blue', 'Green', 'Black', 'White', 'Yellow'];\r\n+colorOptions: string[] = ['Red', 'Blue', 'Green', 'Black', 'White', 'Yellow', 'Pink'];\r\n \r\n   constructor(private fb: FormBuilder, private productService: ProductService) {\r\n     this.productForm = this.fb.group({\r\n       title: ['', Validators.required],\r\n"
                },
                {
                    "date": 1752118812694,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -258,5 +258,435 @@\n         this.imageTabFocus.nativeElement.focus();\r\n       }\r\n     }, 200); // Delay ensures tab is visible before focusing\r\n   }\r\n+\r\n+\r\n+\r\n+\r\n+  callPatch(){\r\n+   const data = {\r\n+    \"_id\": \"686dd61eda29c46f3c3d1c7d\",\r\n+    \"title\": \"Apple iPhone 15\",\r\n+    \"description\": \"About this item\\nDYNAMIC ISLAND COMES TO IPHONE 15  Dynamic Island bubbles up alerts and Live Activities  so you dont miss them while youre doing something else. You can see whos calling, track your next ride, check your flight status, and so much more.\\nINNOVATIVE DESIGN  iPhone 15 features a durable color-infused glass and aluminum design. Its splash, water, and dust resistant. The Ceramic Shield front is tougher than any smartphone glass. And the 6.1\\\" Super Retina XDR display is up to 2x brighter in the sun compared to iPhone 14.\\n48MP MAIN CAMERA WITH 2X TELEPHOTO  The 48MP Main camera shoots in super-high resolution. So its easier than ever to take standout photos with amazing detail. The 2x optical-quality Telephoto lets you frame the perfect close-up.\\nNEXT-GENERATION PORTRAITS  Capture portraits with dramatically more detail and color. Just tap to shift the focus between subjects  even after you take the shot.\\nPOWERHOUSE A16 BIONIC CHIP  The superfast chip powers advanced features like computational photography, fluid Dynamic Island transitions, and Voice Isolation for phone calls. And A16 Bionic is incredibly efficient to help deliver great all-day battery life.\",\r\n+    \"type\": \"electronics\",\r\n+    \"brand\": \"iphone\",\r\n+    \"collection\": [\r\n+        \"new products\"\r\n+    ],\r\n+    \"category\": \"electronics\",\r\n+    \"price\": 79600,\r\n+    \"sale\": true,\r\n+    \"discount\": \"27\",\r\n+    \"stock\": 10,\r\n+    \"new\": true,\r\n+    \"tags\": [\r\n+        \"s\",\r\n+        \"m\",\r\n+        \"pink\",\r\n+        \"blue\",\r\n+        \"biba\",\r\n+        \"iphone\"\r\n+    ],\r\n+    \"variants\": [\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Black\",\r\n+            \"image_id\": 111,\r\n+            \"_id\": \"686dd61eda29c46f3c3d1c7e\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-002\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Black\",\r\n+            \"image_id\": 112,\r\n+            \"_id\": \"686dd61eda29c46f3c3d1c7f\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Black\",\r\n+            \"image_id\": 113,\r\n+            \"_id\": \"686dd61eda29c46f3c3d1c80\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-002\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Green\",\r\n+            \"image_id\": 113,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c81\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-003\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Blue\",\r\n+            \"image_id\": 113,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c82\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-004\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Yellow\",\r\n+            \"image_id\": 113,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c83\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Pink\",\r\n+            \"image_id\": 113,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c84\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Blue\",\r\n+            \"image_id\": 114,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c85\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-002\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Green\",\r\n+            \"image_id\": 114,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c86\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-003\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Black\",\r\n+            \"image_id\": 114,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c87\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-004\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Yellow\",\r\n+            \"image_id\": 114,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c88\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Pink\",\r\n+            \"image_id\": 114,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c89\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Blue\",\r\n+            \"image_id\": 115,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c8a\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-002\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Green\",\r\n+            \"image_id\": 115,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c8b\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-003\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Black\",\r\n+            \"image_id\": 115,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c8c\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-004\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Yellow\",\r\n+            \"image_id\": 115,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c8d\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Pink\",\r\n+            \"image_id\": 115,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c8e\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Blue\",\r\n+            \"image_id\": 116,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c8f\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-002\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Green\",\r\n+            \"image_id\": 116,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c90\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-003\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Black\",\r\n+            \"image_id\": 116,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c91\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-004\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Yellow\",\r\n+            \"image_id\": 116,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c92\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Pink\",\r\n+            \"image_id\": 116,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c93\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Blue\",\r\n+            \"image_id\": 117,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c94\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Blue\",\r\n+            \"image_id\": 118,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c95\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Green\",\r\n+            \"image_id\": 119,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c96\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Green\",\r\n+            \"image_id\": 120,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c97\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Pink\",\r\n+            \"image_id\": 121,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c98\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Pink\",\r\n+            \"image_id\": 122,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c99\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Yellow\",\r\n+            \"image_id\": 123,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c9a\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Yellow\",\r\n+            \"image_id\": 124,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c9b\"\r\n+        }\r\n+    ],\r\n+    \"images\": [\r\n+        {\r\n+            \"image_id\": 111,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_111.jpeg\",\r\n+            \"variant_id\": [\r\n+                101\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c9c\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 112,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_112.jpeg\",\r\n+            \"variant_id\": [\r\n+                102\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c9d\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 113,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_113.jpeg\",\r\n+            \"variant_id\": [\r\n+                103,\r\n+                104,\r\n+                105,\r\n+                106,\r\n+                107\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c9e\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 114,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_114.jpeg\",\r\n+            \"variant_id\": [\r\n+                108,\r\n+                109,\r\n+                110,\r\n+                111,\r\n+                112\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c9f\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 115,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_115.jpeg\",\r\n+            \"variant_id\": [\r\n+                113,\r\n+                114,\r\n+                115,\r\n+                116,\r\n+                117\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca0\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 116,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_116.jpeg\",\r\n+            \"variant_id\": [\r\n+                118,\r\n+                119,\r\n+                120,\r\n+                121,\r\n+                122\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca1\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 117,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_117.jpeg\",\r\n+            \"variant_id\": [\r\n+                123\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca2\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 118,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_118.jpeg\",\r\n+            \"variant_id\": [\r\n+                124\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca3\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 119,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_119.jpeg\",\r\n+            \"variant_id\": [\r\n+                125\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca4\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 120,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_120.jpeg\",\r\n+            \"variant_id\": [\r\n+                126\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca5\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 121,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_121.jpeg\",\r\n+            \"variant_id\": [\r\n+                127\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca6\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 122,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_122.jpeg\",\r\n+            \"variant_id\": [\r\n+                128\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca7\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 123,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_123.jpeg\",\r\n+            \"variant_id\": [\r\n+                129\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca8\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 124,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_124.jpeg\",\r\n+            \"variant_id\": [\r\n+                130\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca9\"\r\n+        }\r\n+    ],\r\n+    \"__v\": 0\r\n }\r\n+    this.patchFormData(data)\r\n+  }\r\n+\r\n+\r\n+  patchFormData(product: any) {\r\n+  this.productForm.patchValue({\r\n+    title: product.title,\r\n+    description: product.description,\r\n+    type: product.type,\r\n+    brand: product.brand,\r\n+    collection: product.collection,\r\n+    category: product.category,\r\n+    price: product.price,\r\n+    discount: product.discount,\r\n+    stock: product.stock,\r\n+    newProduct: product.new,\r\n+  });\r\n+\r\n+  // Clear existing images\r\n+  this.imageDetails.clear();\r\n+\r\n+  // Loop through images and add with corresponding variants\r\n+  product.images.forEach((image:any) => {\r\n+    // Find all variants for this image_id\r\n+    const variants = product.variants.filter(\r\n+      (v:any) => v.image_id === image.image_id\r\n+    );\r\n+\r\n+    const variantFGs = variants.map((variant:any) => this.fb.group({\r\n+      sku: [variant.sku, Validators.required],\r\n+      size: [variant.size, Validators.required],\r\n+      color: [variant.color, Validators.required],\r\n+    }));\r\n+\r\n+    const imageFG = this.fb.group({\r\n+      alt: [image.alt, Validators.required],\r\n+      src: [image.src, Validators.required],\r\n+      'variant Details': this.fb.array(variantFGs, Validators.required)\r\n+    });\r\n+\r\n+    this.imageDetails.push(imageFG);\r\n+  });\r\n+}\r\n+\r\n+}\r\n"
                },
                {
                    "date": 1752118849731,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -144,8 +144,11 @@\n       'images Details': this.fb.array([], Validators.required),\r\n     });\r\n \r\n     this.addImage(); // Add initial image entry\r\n+\r\n+\r\n+    this.callPatch()\r\n   }\r\n \r\n   get imageDetails(): FormArray {\r\n     return this.productForm.get('images Details') as FormArray;\r\n"
                },
                {
                    "date": 1752118917827,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -682,9 +682,9 @@\n       color: [variant.color, Validators.required],\r\n     }));\r\n \r\n     const imageFG = this.fb.group({\r\n-      alt: [image.alt, Validators.required],\r\n+      alt: ['http://localhost:3000/'+image.alt, Validators.required],\r\n       src: [image.src, Validators.required],\r\n       'variant Details': this.fb.array(variantFGs, Validators.required)\r\n     });\r\n \r\n"
                },
                {
                    "date": 1752118927091,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -682,9 +682,9 @@\n       color: [variant.color, Validators.required],\r\n     }));\r\n \r\n     const imageFG = this.fb.group({\r\n-      alt: ['http://localhost:3000/'+image.alt, Validators.required],\r\n+      alt: [image.alt, Validators.required],\r\n       src: [image.src, Validators.required],\r\n       'variant Details': this.fb.array(variantFGs, Validators.required)\r\n     });\r\n \r\n"
                },
                {
                    "date": 1753018532654,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,8 +35,9 @@\n import { MatCardModule } from '@angular/material/card';\r\n import { MatDividerModule } from '@angular/material/divider';\r\n import { MatTabsModule, MatTabGroup } from '@angular/material/tabs';\r\n import { ProductService } from '../../services/product.service';\r\n+import { ProductListComponent } from \"../product-list/product-list.component\";\r\n \r\n export interface Fruit {\r\n   name: string;\r\n }\r\n@@ -57,9 +58,10 @@\n     MatChipsModule,\r\n     MatAutocompleteModule,\r\n     MatSelectModule,\r\n     MatDividerModule,\r\n-  ],\r\n+    ProductListComponent\r\n+],\r\n   templateUrl: './add-product.component.html',\r\n   styleUrl: './add-product.component.scss',\r\n })\r\n export class AddProductComponent {\r\n@@ -683,9 +685,9 @@\n     }));\r\n \r\n     const imageFG = this.fb.group({\r\n       alt: [image.alt, Validators.required],\r\n-      src: [image.src, Validators.required],\r\n+      src: ['http://localhost:3000/'+image.src, Validators.required],\r\n       'variant Details': this.fb.array(variantFGs, Validators.required)\r\n     });\r\n \r\n     this.imageDetails.push(imageFG);\r\n"
                },
                {
                    "date": 1753020311153,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,9 @@\n   ChangeDetectorRef,\r\n   Component,\r\n   ElementRef,\r\n   inject,\r\n+  Input,\r\n   signal,\r\n   ViewChild,\r\n } from '@angular/core';\r\n import { MatSelectModule } from '@angular/material/select';\r\n@@ -64,8 +65,9 @@\n   templateUrl: './add-product.component.html',\r\n   styleUrl: './add-product.component.scss',\r\n })\r\n export class AddProductComponent {\r\n+  @Input() editableProduct: any;\r\n   productForm: FormGroup;\r\n   @ViewChild('tabGroup') tabGroup!: MatTabGroup;\r\n   @ViewChild('imageTabFocus', { static: false }) imageTabFocus!: ElementRef;\r\n   imageUrl: any[] = [\r\n"
                },
                {
                    "date": 1753020373131,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,11 @@\n   Component,\r\n   ElementRef,\r\n   inject,\r\n   Input,\r\n+  OnChanges,\r\n   signal,\r\n+  SimpleChanges,\r\n   ViewChild,\r\n } from '@angular/core';\r\n import { MatSelectModule } from '@angular/material/select';\r\n import { MatInputModule } from '@angular/material/input';\r\n@@ -64,9 +66,9 @@\n ],\r\n   templateUrl: './add-product.component.html',\r\n   styleUrl: './add-product.component.scss',\r\n })\r\n-export class AddProductComponent {\r\n+export class AddProductComponent implements OnChanges {\r\n   @Input() editableProduct: any;\r\n   productForm: FormGroup;\r\n   @ViewChild('tabGroup') tabGroup!: MatTabGroup;\r\n   @ViewChild('imageTabFocus', { static: false }) imageTabFocus!: ElementRef;\r\n@@ -152,8 +154,13 @@\n \r\n \r\n     this.callPatch()\r\n   }\r\n+  ngOnChanges(changes: SimpleChanges): void {\r\n+    if (changes['editableProduct'] && this.editableProduct) {\r\n+      this.patchFormData(this.editableProduct);\r\n+    }\r\n+  }\r\n \r\n   get imageDetails(): FormArray {\r\n     return this.productForm.get('images Details') as FormArray;\r\n   }\r\n"
                },
                {
                    "date": 1753020619695,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -156,8 +156,10 @@\n     this.callPatch()\r\n   }\r\n   ngOnChanges(changes: SimpleChanges): void {\r\n     if (changes['editableProduct'] && this.editableProduct) {\r\n+      console.log('Editable Product:', this.editableProduct);\r\n+\r\n       this.patchFormData(this.editableProduct);\r\n     }\r\n   }\r\n \r\n"
                },
                {
                    "date": 1753020812175,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -704,5 +704,11 @@\n     this.imageDetails.push(imageFG);\r\n   });\r\n }\r\n \r\n+\r\n+\r\n+test(event: any) {\r\n+  console.log('Event emitted from child component:', event);\r\n }\r\n+\r\n+}\r\n"
                },
                {
                    "date": 1753020881465,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -708,7 +708,9 @@\n \r\n \r\n test(event: any) {\r\n   console.log('Event emitted from child component:', event);\r\n+\r\n+  this.patchFormData(event);\r\n }\r\n \r\n }\r\n"
                },
                {
                    "date": 1753020917692,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -158,9 +158,9 @@\n   ngOnChanges(changes: SimpleChanges): void {\r\n     if (changes['editableProduct'] && this.editableProduct) {\r\n       console.log('Editable Product:', this.editableProduct);\r\n \r\n-      this.patchFormData(this.editableProduct);\r\n+      // this.patchFormData(this.editableProduct);\r\n     }\r\n   }\r\n \r\n   get imageDetails(): FormArray {\r\n"
                },
                {
                    "date": 1753020934310,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -660,9 +660,9 @@\n         }\r\n     ],\r\n     \"__v\": 0\r\n }\r\n-    this.patchFormData(data)\r\n+    // this.patchFormData(data)\r\n   }\r\n \r\n \r\n   patchFormData(product: any) {\r\n"
                },
                {
                    "date": 1753020997355,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -706,11 +706,11 @@\n }\r\n \r\n \r\n \r\n-test(event: any) {\r\n-  console.log('Event emitted from child component:', event);\r\n+// test(event: any) {\r\n+//   console.log('Event emitted from child component:', event);\r\n \r\n-  this.patchFormData(event);\r\n-}\r\n+//   this.patchFormData(event);\r\n+// }\r\n \r\n }\r\n"
                },
                {
                    "date": 1753021216002,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -151,10 +151,8 @@\n     });\r\n \r\n     this.addImage(); // Add initial image entry\r\n \r\n-\r\n-    this.callPatch()\r\n   }\r\n   ngOnChanges(changes: SimpleChanges): void {\r\n     if (changes['editableProduct'] && this.editableProduct) {\r\n       console.log('Editable Product:', this.editableProduct);\r\n@@ -278,394 +276,11 @@\n \r\n \r\n \r\n \r\n-  callPatch(){\r\n-   const data = {\r\n-    \"_id\": \"686dd61eda29c46f3c3d1c7d\",\r\n-    \"title\": \"Apple iPhone 15\",\r\n-    \"description\": \"About this item\\nDYNAMIC ISLAND COMES TO IPHONE 15  Dynamic Island bubbles up alerts and Live Activities  so you dont miss them while youre doing something else. You can see whos calling, track your next ride, check your flight status, and so much more.\\nINNOVATIVE DESIGN  iPhone 15 features a durable color-infused glass and aluminum design. Its splash, water, and dust resistant. The Ceramic Shield front is tougher than any smartphone glass. And the 6.1\\\" Super Retina XDR display is up to 2x brighter in the sun compared to iPhone 14.\\n48MP MAIN CAMERA WITH 2X TELEPHOTO  The 48MP Main camera shoots in super-high resolution. So its easier than ever to take standout photos with amazing detail. The 2x optical-quality Telephoto lets you frame the perfect close-up.\\nNEXT-GENERATION PORTRAITS  Capture portraits with dramatically more detail and color. Just tap to shift the focus between subjects  even after you take the shot.\\nPOWERHOUSE A16 BIONIC CHIP  The superfast chip powers advanced features like computational photography, fluid Dynamic Island transitions, and Voice Isolation for phone calls. And A16 Bionic is incredibly efficient to help deliver great all-day battery life.\",\r\n-    \"type\": \"electronics\",\r\n-    \"brand\": \"iphone\",\r\n-    \"collection\": [\r\n-        \"new products\"\r\n-    ],\r\n-    \"category\": \"electronics\",\r\n-    \"price\": 79600,\r\n-    \"sale\": true,\r\n-    \"discount\": \"27\",\r\n-    \"stock\": 10,\r\n-    \"new\": true,\r\n-    \"tags\": [\r\n-        \"s\",\r\n-        \"m\",\r\n-        \"pink\",\r\n-        \"blue\",\r\n-        \"biba\",\r\n-        \"iphone\"\r\n-    ],\r\n-    \"variants\": [\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Black\",\r\n-            \"image_id\": 111,\r\n-            \"_id\": \"686dd61eda29c46f3c3d1c7e\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-002\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Black\",\r\n-            \"image_id\": 112,\r\n-            \"_id\": \"686dd61eda29c46f3c3d1c7f\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Black\",\r\n-            \"image_id\": 113,\r\n-            \"_id\": \"686dd61eda29c46f3c3d1c80\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-002\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Green\",\r\n-            \"image_id\": 113,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c81\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-003\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Blue\",\r\n-            \"image_id\": 113,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c82\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-004\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Yellow\",\r\n-            \"image_id\": 113,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c83\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Pink\",\r\n-            \"image_id\": 113,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c84\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Blue\",\r\n-            \"image_id\": 114,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c85\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-002\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Green\",\r\n-            \"image_id\": 114,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c86\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-003\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Black\",\r\n-            \"image_id\": 114,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c87\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-004\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Yellow\",\r\n-            \"image_id\": 114,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c88\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Pink\",\r\n-            \"image_id\": 114,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c89\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Blue\",\r\n-            \"image_id\": 115,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c8a\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-002\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Green\",\r\n-            \"image_id\": 115,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c8b\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-003\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Black\",\r\n-            \"image_id\": 115,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c8c\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-004\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Yellow\",\r\n-            \"image_id\": 115,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c8d\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Pink\",\r\n-            \"image_id\": 115,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c8e\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Blue\",\r\n-            \"image_id\": 116,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c8f\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-002\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Green\",\r\n-            \"image_id\": 116,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c90\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-003\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Black\",\r\n-            \"image_id\": 116,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c91\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-004\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Yellow\",\r\n-            \"image_id\": 116,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c92\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Pink\",\r\n-            \"image_id\": 116,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c93\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Blue\",\r\n-            \"image_id\": 117,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c94\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Blue\",\r\n-            \"image_id\": 118,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c95\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Green\",\r\n-            \"image_id\": 119,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c96\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Green\",\r\n-            \"image_id\": 120,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c97\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Pink\",\r\n-            \"image_id\": 121,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c98\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Pink\",\r\n-            \"image_id\": 122,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c99\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Yellow\",\r\n-            \"image_id\": 123,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c9a\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Yellow\",\r\n-            \"image_id\": 124,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c9b\"\r\n-        }\r\n-    ],\r\n-    \"images\": [\r\n-        {\r\n-            \"image_id\": 111,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_111.jpeg\",\r\n-            \"variant_id\": [\r\n-                101\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c9c\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 112,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_112.jpeg\",\r\n-            \"variant_id\": [\r\n-                102\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c9d\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 113,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_113.jpeg\",\r\n-            \"variant_id\": [\r\n-                103,\r\n-                104,\r\n-                105,\r\n-                106,\r\n-                107\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c9e\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 114,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_114.jpeg\",\r\n-            \"variant_id\": [\r\n-                108,\r\n-                109,\r\n-                110,\r\n-                111,\r\n-                112\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c9f\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 115,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_115.jpeg\",\r\n-            \"variant_id\": [\r\n-                113,\r\n-                114,\r\n-                115,\r\n-                116,\r\n-                117\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca0\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 116,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_116.jpeg\",\r\n-            \"variant_id\": [\r\n-                118,\r\n-                119,\r\n-                120,\r\n-                121,\r\n-                122\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca1\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 117,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_117.jpeg\",\r\n-            \"variant_id\": [\r\n-                123\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca2\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 118,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_118.jpeg\",\r\n-            \"variant_id\": [\r\n-                124\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca3\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 119,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_119.jpeg\",\r\n-            \"variant_id\": [\r\n-                125\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca4\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 120,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_120.jpeg\",\r\n-            \"variant_id\": [\r\n-                126\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca5\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 121,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_121.jpeg\",\r\n-            \"variant_id\": [\r\n-                127\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca6\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 122,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_122.jpeg\",\r\n-            \"variant_id\": [\r\n-                128\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca7\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 123,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_123.jpeg\",\r\n-            \"variant_id\": [\r\n-                129\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca8\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 124,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_124.jpeg\",\r\n-            \"variant_id\": [\r\n-                130\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca9\"\r\n-        }\r\n-    ],\r\n-    \"__v\": 0\r\n-}\r\n-    // this.patchFormData(data)\r\n-  }\r\n \r\n \r\n+\r\n   patchFormData(product: any) {\r\n   this.productForm.patchValue({\r\n     title: product.title,\r\n     description: product.description,\r\n"
                },
                {
                    "date": 1753021267705,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -66,10 +66,9 @@\n ],\r\n   templateUrl: './add-product.component.html',\r\n   styleUrl: './add-product.component.scss',\r\n })\r\n-export class AddProductComponent implements OnChanges {\r\n-  @Input() editableProduct: any;\r\n+export class AddProductComponent {\r\n   productForm: FormGroup;\r\n   @ViewChild('tabGroup') tabGroup!: MatTabGroup;\r\n   @ViewChild('imageTabFocus', { static: false }) imageTabFocus!: ElementRef;\r\n   imageUrl: any[] = [\r\n@@ -152,15 +151,9 @@\n \r\n     this.addImage(); // Add initial image entry\r\n \r\n   }\r\n-  ngOnChanges(changes: SimpleChanges): void {\r\n-    if (changes['editableProduct'] && this.editableProduct) {\r\n-      console.log('Editable Product:', this.editableProduct);\r\n \r\n-      // this.patchFormData(this.editableProduct);\r\n-    }\r\n-  }\r\n \r\n   get imageDetails(): FormArray {\r\n     return this.productForm.get('images Details') as FormArray;\r\n   }\r\n"
                },
                {
                    "date": 1753021489583,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -214,39 +214,82 @@\n       reader.onerror = (error) => reject(error);\r\n     });\r\n   }\r\n \r\n+  // Submit() {\r\n+  //   if (this.productForm.valid) {\r\n+  //     const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n+\r\n+  //     // Clean preview fields if present\r\n+  //     formData['images Details'].forEach((img: any) => {\r\n+  //       delete img.preview;\r\n+  //     });\r\n+\r\n+  //     // Static values\r\n+  //     formData.sale = true;\r\n+  //     formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n+\r\n+  //     // Call service\r\n+  //     this.productService.createProduct(formData).subscribe({\r\n+  //       next: (res) => {\r\n+  //         console.log(' Product created:', res);\r\n+  //         alert('Product created successfully!');\r\n+  //         this.productForm.reset();\r\n+  //       },\r\n+  //       error: (err) => {\r\n+  //         console.error(' Error creating product:', err);\r\n+  //         alert('Failed to create product.');\r\n+  //       },\r\n+  //     });\r\n+  //   } else {\r\n+  //     this.markFormGroupTouched(this.productForm);\r\n+  //     console.warn(' Form Invalid');\r\n+  //   }\r\n+  // }\r\n+\r\n+\r\n   Submit() {\r\n-    if (this.productForm.valid) {\r\n-      const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n+  if (this.productForm.valid) {\r\n+    const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n+    formData.sale = true;\r\n+    formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n+    formData['images Details'].forEach((img: any) => delete img.preview);\r\n \r\n-      // Clean preview fields if present\r\n-      formData['images Details'].forEach((img: any) => {\r\n-        delete img.preview;\r\n+    if (this.isUpdateMode && this.editProduct && this.editProduct._id) {\r\n+      //  Update\r\n+      this.productService.updateProduct(this.editProduct._id, formData).subscribe({\r\n+        next: (res) => {\r\n+          console.log(' Product updated:', res);\r\n+          alert('Product updated successfully!');\r\n+          this.productForm.reset();\r\n+          this.isUpdateMode = false;\r\n+        },\r\n+        error: (err) => {\r\n+          console.error(' Update failed:', err);\r\n+          alert('Failed to update product.');\r\n+        },\r\n       });\r\n-\r\n-      // Static values\r\n-      formData.sale = true;\r\n-      formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n-\r\n-      // Call service\r\n+    } else {\r\n+      //  Create\r\n       this.productService.createProduct(formData).subscribe({\r\n         next: (res) => {\r\n           console.log(' Product created:', res);\r\n           alert('Product created successfully!');\r\n           this.productForm.reset();\r\n         },\r\n         error: (err) => {\r\n-          console.error(' Error creating product:', err);\r\n+          console.error(' Creation failed:', err);\r\n           alert('Failed to create product.');\r\n         },\r\n       });\r\n-    } else {\r\n-      this.markFormGroupTouched(this.productForm);\r\n-      console.warn(' Form Invalid');\r\n     }\r\n+  } else {\r\n+    this.markFormGroupTouched(this.productForm);\r\n+    console.warn(' Form Invalid');\r\n   }\r\n+}\r\n \r\n+\r\n   markFormGroupTouched(formGroup: FormGroup | FormArray) {\r\n     (Object as any).values(formGroup.controls).forEach((control: any) => {\r\n       if (control.controls) {\r\n         this.markFormGroupTouched(control); // recurse\r\n"
                },
                {
                    "date": 1753021517715,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -67,8 +67,11 @@\n   templateUrl: './add-product.component.html',\r\n   styleUrl: './add-product.component.scss',\r\n })\r\n export class AddProductComponent {\r\n+\r\n+  @Input() editProduct: any; // passed from parent component\r\n+isUpdateMode = false;\r\n   productForm: FormGroup;\r\n   @ViewChild('tabGroup') tabGroup!: MatTabGroup;\r\n   @ViewChild('imageTabFocus', { static: false }) imageTabFocus!: ElementRef;\r\n   imageUrl: any[] = [\r\n"
                },
                {
                    "date": 1753021581461,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -319,8 +319,9 @@\n \r\n \r\n \r\n   patchFormData(product: any) {\r\n+    this.isUpdateMode = true;\r\n   this.productForm.patchValue({\r\n     title: product.title,\r\n     description: product.description,\r\n     type: product.type,\r\n"
                },
                {
                    "date": 1753021651959,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -318,10 +318,12 @@\n \r\n \r\n \r\n \r\n-  patchFormData(product: any) {\r\n-    this.isUpdateMode = true;\r\n+patchFormData(product: any) {\r\n+  this.isUpdateMode = true;\r\n+  this.editProduct = product;\r\n+\r\n   this.productForm.patchValue({\r\n     title: product.title,\r\n     description: product.description,\r\n     type: product.type,\r\n@@ -333,36 +335,39 @@\n     stock: product.stock,\r\n     newProduct: product.new,\r\n   });\r\n \r\n-  // Clear existing images\r\n   this.imageDetails.clear();\r\n \r\n-  // Loop through images and add with corresponding variants\r\n-  product.images.forEach((image:any) => {\r\n-    // Find all variants for this image_id\r\n+  product.images.forEach((image: any) => {\r\n     const variants = product.variants.filter(\r\n-      (v:any) => v.image_id === image.image_id\r\n+      (v: any) => v.image_id === image.image_id\r\n     );\r\n \r\n-    const variantFGs = variants.map((variant:any) => this.fb.group({\r\n-      sku: [variant.sku, Validators.required],\r\n-      size: [variant.size, Validators.required],\r\n-      color: [variant.color, Validators.required],\r\n-    }));\r\n+    const variantFGs = variants.map((variant: any) =>\r\n+      this.fb.group({\r\n+        sku: [variant.sku, Validators.required],\r\n+        size: [variant.size, Validators.required],\r\n+        color: [variant.color, Validators.required],\r\n+      })\r\n+    );\r\n \r\n     const imageFG = this.fb.group({\r\n       alt: [image.alt, Validators.required],\r\n-      src: ['http://localhost:3000/'+image.src, Validators.required],\r\n-      'variant Details': this.fb.array(variantFGs, Validators.required)\r\n+      src: ['http://localhost:3000/' + image.src, Validators.required],\r\n+      'variant Details': this.fb.array(variantFGs, Validators.required),\r\n     });\r\n \r\n     this.imageDetails.push(imageFG);\r\n   });\r\n+\r\n+  // Optional: switch to the correct tab (like image tab)\r\n+  this.goToTab(1);\r\n }\r\n \r\n \r\n \r\n+\r\n // test(event: any) {\r\n //   console.log('Event emitted from child component:', event);\r\n \r\n //   this.patchFormData(event);\r\n"
                },
                {
                    "date": 1753021868239,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -67,11 +67,8 @@\n   templateUrl: './add-product.component.html',\r\n   styleUrl: './add-product.component.scss',\r\n })\r\n export class AddProductComponent {\r\n-\r\n-  @Input() editProduct: any; // passed from parent component\r\n-isUpdateMode = false;\r\n   productForm: FormGroup;\r\n   @ViewChild('tabGroup') tabGroup!: MatTabGroup;\r\n   @ViewChild('imageTabFocus', { static: false }) imageTabFocus!: ElementRef;\r\n   imageUrl: any[] = [\r\n@@ -217,82 +214,39 @@\n       reader.onerror = (error) => reject(error);\r\n     });\r\n   }\r\n \r\n-  // Submit() {\r\n-  //   if (this.productForm.valid) {\r\n-  //     const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n+  Submit() {\r\n+    if (this.productForm.valid) {\r\n+      const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n \r\n-  //     // Clean preview fields if present\r\n-  //     formData['images Details'].forEach((img: any) => {\r\n-  //       delete img.preview;\r\n-  //     });\r\n+      // Clean preview fields if present\r\n+      formData['images Details'].forEach((img: any) => {\r\n+        delete img.preview;\r\n+      });\r\n \r\n-  //     // Static values\r\n-  //     formData.sale = true;\r\n-  //     formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n+      // Static values\r\n+      formData.sale = true;\r\n+      formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n \r\n-  //     // Call service\r\n-  //     this.productService.createProduct(formData).subscribe({\r\n-  //       next: (res) => {\r\n-  //         console.log(' Product created:', res);\r\n-  //         alert('Product created successfully!');\r\n-  //         this.productForm.reset();\r\n-  //       },\r\n-  //       error: (err) => {\r\n-  //         console.error(' Error creating product:', err);\r\n-  //         alert('Failed to create product.');\r\n-  //       },\r\n-  //     });\r\n-  //   } else {\r\n-  //     this.markFormGroupTouched(this.productForm);\r\n-  //     console.warn(' Form Invalid');\r\n-  //   }\r\n-  // }\r\n-\r\n-\r\n-  Submit() {\r\n-  if (this.productForm.valid) {\r\n-    const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n-    formData.sale = true;\r\n-    formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n-    formData['images Details'].forEach((img: any) => delete img.preview);\r\n-\r\n-    if (this.isUpdateMode && this.editProduct && this.editProduct._id) {\r\n-      //  Update\r\n-      this.productService.updateProduct(this.editProduct._id, formData).subscribe({\r\n-        next: (res) => {\r\n-          console.log(' Product updated:', res);\r\n-          alert('Product updated successfully!');\r\n-          this.productForm.reset();\r\n-          this.isUpdateMode = false;\r\n-        },\r\n-        error: (err) => {\r\n-          console.error(' Update failed:', err);\r\n-          alert('Failed to update product.');\r\n-        },\r\n-      });\r\n-    } else {\r\n-      //  Create\r\n+      // Call service\r\n       this.productService.createProduct(formData).subscribe({\r\n         next: (res) => {\r\n           console.log(' Product created:', res);\r\n           alert('Product created successfully!');\r\n           this.productForm.reset();\r\n         },\r\n         error: (err) => {\r\n-          console.error(' Creation failed:', err);\r\n+          console.error(' Error creating product:', err);\r\n           alert('Failed to create product.');\r\n         },\r\n       });\r\n+    } else {\r\n+      this.markFormGroupTouched(this.productForm);\r\n+      console.warn(' Form Invalid');\r\n     }\r\n-  } else {\r\n-    this.markFormGroupTouched(this.productForm);\r\n-    console.warn(' Form Invalid');\r\n   }\r\n-}\r\n \r\n-\r\n   markFormGroupTouched(formGroup: FormGroup | FormArray) {\r\n     (Object as any).values(formGroup.controls).forEach((control: any) => {\r\n       if (control.controls) {\r\n         this.markFormGroupTouched(control); // recurse\r\n@@ -318,12 +272,9 @@\n \r\n \r\n \r\n \r\n-patchFormData(product: any) {\r\n-  this.isUpdateMode = true;\r\n-  this.editProduct = product;\r\n-\r\n+  patchFormData(product: any) {\r\n   this.productForm.patchValue({\r\n     title: product.title,\r\n     description: product.description,\r\n     type: product.type,\r\n@@ -335,39 +286,36 @@\n     stock: product.stock,\r\n     newProduct: product.new,\r\n   });\r\n \r\n+  // Clear existing images\r\n   this.imageDetails.clear();\r\n \r\n-  product.images.forEach((image: any) => {\r\n+  // Loop through images and add with corresponding variants\r\n+  product.images.forEach((image:any) => {\r\n+    // Find all variants for this image_id\r\n     const variants = product.variants.filter(\r\n-      (v: any) => v.image_id === image.image_id\r\n+      (v:any) => v.image_id === image.image_id\r\n     );\r\n \r\n-    const variantFGs = variants.map((variant: any) =>\r\n-      this.fb.group({\r\n-        sku: [variant.sku, Validators.required],\r\n-        size: [variant.size, Validators.required],\r\n-        color: [variant.color, Validators.required],\r\n-      })\r\n-    );\r\n+    const variantFGs = variants.map((variant:any) => this.fb.group({\r\n+      sku: [variant.sku, Validators.required],\r\n+      size: [variant.size, Validators.required],\r\n+      color: [variant.color, Validators.required],\r\n+    }));\r\n \r\n     const imageFG = this.fb.group({\r\n       alt: [image.alt, Validators.required],\r\n-      src: ['http://localhost:3000/' + image.src, Validators.required],\r\n-      'variant Details': this.fb.array(variantFGs, Validators.required),\r\n+      src: ['http://localhost:3000/'+image.src, Validators.required],\r\n+      'variant Details': this.fb.array(variantFGs, Validators.required)\r\n     });\r\n \r\n     this.imageDetails.push(imageFG);\r\n   });\r\n-\r\n-  // Optional: switch to the correct tab (like image tab)\r\n-  this.goToTab(1);\r\n }\r\n \r\n \r\n \r\n-\r\n // test(event: any) {\r\n //   console.log('Event emitted from child component:', event);\r\n \r\n //   this.patchFormData(event);\r\n"
                },
                {
                    "date": 1753022541813,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -214,22 +214,36 @@\n       reader.onerror = (error) => reject(error);\r\n     });\r\n   }\r\n \r\n-  Submit() {\r\n-    if (this.productForm.valid) {\r\n-      const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n+Submit() {\r\n+  if (this.productForm.valid) {\r\n+    const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n \r\n-      // Clean preview fields if present\r\n-      formData['images Details'].forEach((img: any) => {\r\n-        delete img.preview;\r\n-      });\r\n+    formData['images Details'].forEach((img: any) => {\r\n+      delete img.preview;\r\n+    });\r\n \r\n-      // Static values\r\n-      formData.sale = true;\r\n-      formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n+    formData.sale = true;\r\n+    formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n \r\n-      // Call service\r\n+    if (this.isEditMode && this.editProductId) {\r\n+      //  Update existing product\r\n+      this.productService.updateProduct(this.editProductId, formData).subscribe({\r\n+        next: (res) => {\r\n+          console.log(' Product updated:', res);\r\n+          alert('Product updated successfully!');\r\n+          this.productForm.reset();\r\n+          this.isEditMode = false;\r\n+          this.editProductId = null;\r\n+        },\r\n+        error: (err) => {\r\n+          console.error(' Error updating product:', err);\r\n+          alert('Failed to update product.');\r\n+        },\r\n+      });\r\n+    } else {\r\n+      //  Create new product\r\n       this.productService.createProduct(formData).subscribe({\r\n         next: (res) => {\r\n           console.log(' Product created:', res);\r\n           alert('Product created successfully!');\r\n@@ -239,14 +253,16 @@\n           console.error(' Error creating product:', err);\r\n           alert('Failed to create product.');\r\n         },\r\n       });\r\n-    } else {\r\n-      this.markFormGroupTouched(this.productForm);\r\n-      console.warn(' Form Invalid');\r\n     }\r\n+  } else {\r\n+    this.markFormGroupTouched(this.productForm);\r\n+    console.warn(' Form Invalid');\r\n   }\r\n+}\r\n \r\n+\r\n   markFormGroupTouched(formGroup: FormGroup | FormArray) {\r\n     (Object as any).values(formGroup.controls).forEach((control: any) => {\r\n       if (control.controls) {\r\n         this.markFormGroupTouched(control); // recurse\r\n"
                },
                {
                    "date": 1753022593165,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -214,36 +214,22 @@\n       reader.onerror = (error) => reject(error);\r\n     });\r\n   }\r\n \r\n-Submit() {\r\n-  if (this.productForm.valid) {\r\n-    const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n+  Submit() {\r\n+    if (this.productForm.valid) {\r\n+      const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n \r\n-    formData['images Details'].forEach((img: any) => {\r\n-      delete img.preview;\r\n-    });\r\n+      // Clean preview fields if present\r\n+      formData['images Details'].forEach((img: any) => {\r\n+        delete img.preview;\r\n+      });\r\n \r\n-    formData.sale = true;\r\n-    formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n+      // Static values\r\n+      formData.sale = true;\r\n+      formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n \r\n-    if (this.isEditMode && this.editProductId) {\r\n-      //  Update existing product\r\n-      this.productService.updateProduct(this.editProductId, formData).subscribe({\r\n-        next: (res) => {\r\n-          console.log(' Product updated:', res);\r\n-          alert('Product updated successfully!');\r\n-          this.productForm.reset();\r\n-          this.isEditMode = false;\r\n-          this.editProductId = null;\r\n-        },\r\n-        error: (err) => {\r\n-          console.error(' Error updating product:', err);\r\n-          alert('Failed to update product.');\r\n-        },\r\n-      });\r\n-    } else {\r\n-      //  Create new product\r\n+      // Call service\r\n       this.productService.createProduct(formData).subscribe({\r\n         next: (res) => {\r\n           console.log(' Product created:', res);\r\n           alert('Product created successfully!');\r\n@@ -253,16 +239,14 @@\n           console.error(' Error creating product:', err);\r\n           alert('Failed to create product.');\r\n         },\r\n       });\r\n+    } else {\r\n+      this.markFormGroupTouched(this.productForm);\r\n+      console.warn(' Form Invalid');\r\n     }\r\n-  } else {\r\n-    this.markFormGroupTouched(this.productForm);\r\n-    console.warn(' Form Invalid');\r\n   }\r\n-}\r\n \r\n-\r\n   markFormGroupTouched(formGroup: FormGroup | FormArray) {\r\n     (Object as any).values(formGroup.controls).forEach((control: any) => {\r\n       if (control.controls) {\r\n         this.markFormGroupTouched(control); // recurse\r\n"
                },
                {
                    "date": 1753022661050,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -272,50 +272,48 @@\n \r\n \r\n \r\n \r\n-  patchFormData(product: any) {\r\n+patchFormData(product: any) {\r\n+  this.isEditMode = true;\r\n+  this.editProductId = product._id;\r\n+\r\n   this.productForm.patchValue({\r\n     title: product.title,\r\n-    description: product.description,\r\n-    type: product.type,\r\n-    brand: product.brand,\r\n-    collection: product.collection,\r\n-    category: product.category,\r\n-    price: product.price,\r\n-    discount: product.discount,\r\n-    stock: product.stock,\r\n-    newProduct: product.new,\r\n+    // ... other fields\r\n   });\r\n \r\n-  // Clear existing images\r\n   this.imageDetails.clear();\r\n \r\n-  // Loop through images and add with corresponding variants\r\n-  product.images.forEach((image:any) => {\r\n-    // Find all variants for this image_id\r\n+  product.images.forEach((image: any) => {\r\n     const variants = product.variants.filter(\r\n-      (v:any) => v.image_id === image.image_id\r\n+      (v: any) => v.image_id === image.image_id\r\n     );\r\n \r\n-    const variantFGs = variants.map((variant:any) => this.fb.group({\r\n-      sku: [variant.sku, Validators.required],\r\n-      size: [variant.size, Validators.required],\r\n-      color: [variant.color, Validators.required],\r\n-    }));\r\n+    const variantFGs = variants.map((variant: any) =>\r\n+      this.fb.group({\r\n+        sku: [variant.sku, Validators.required],\r\n+        size: [variant.size, Validators.required],\r\n+        color: [variant.color, Validators.required],\r\n+      })\r\n+    );\r\n \r\n     const imageFG = this.fb.group({\r\n       alt: [image.alt, Validators.required],\r\n-      src: ['http://localhost:3000/'+image.src, Validators.required],\r\n-      'variant Details': this.fb.array(variantFGs, Validators.required)\r\n+      src: ['http://localhost:3000/' + image.src, Validators.required],\r\n+      'variant Details': this.fb.array(variantFGs, Validators.required),\r\n     });\r\n \r\n     this.imageDetails.push(imageFG);\r\n   });\r\n+\r\n+  // Optionally: switch to second tab\r\n+  this.goToTab(1);\r\n }\r\n \r\n \r\n \r\n+\r\n // test(event: any) {\r\n //   console.log('Event emitted from child component:', event);\r\n \r\n //   this.patchFormData(event);\r\n"
                },
                {
                    "date": 1753022696374,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -67,8 +67,11 @@\n   templateUrl: './add-product.component.html',\r\n   styleUrl: './add-product.component.scss',\r\n })\r\n export class AddProductComponent {\r\n+  isEditMode = false;\r\n+editProductId: string | null = null;\r\n+\r\n   productForm: FormGroup;\r\n   @ViewChild('tabGroup') tabGroup!: MatTabGroup;\r\n   @ViewChild('imageTabFocus', { static: false }) imageTabFocus!: ElementRef;\r\n   imageUrl: any[] = [\r\n"
                },
                {
                    "date": 1753022716331,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -217,39 +217,60 @@\n       reader.onerror = (error) => reject(error);\r\n     });\r\n   }\r\n \r\n-  Submit() {\r\n-    if (this.productForm.valid) {\r\n-      const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n+Submit() {\r\n+  if (this.productForm.valid) {\r\n+    const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n \r\n-      // Clean preview fields if present\r\n-      formData['images Details'].forEach((img: any) => {\r\n-        delete img.preview;\r\n-      });\r\n+    // Clean up previews or temp data\r\n+    formData['images Details'].forEach((img: any) => {\r\n+      delete img.preview;\r\n+    });\r\n \r\n-      // Static values\r\n-      formData.sale = true;\r\n-      formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n+    formData.sale = true;\r\n+    formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n \r\n-      // Call service\r\n+    if (this.isEditMode && this.editProductId) {\r\n+      //  Update product\r\n+      this.productService.updateProduct(this.editProductId, formData).subscribe({\r\n+        next: (res) => {\r\n+          console.log(' Product updated:', res);\r\n+          alert('Product updated successfully!');\r\n+          this.productForm.reset();\r\n+          this.imageDetails.clear();\r\n+          this.addImage();\r\n+          this.isEditMode = false;\r\n+          this.editProductId = null;\r\n+        },\r\n+        error: (err) => {\r\n+          console.error(' Error updating product:', err);\r\n+          alert('Failed to update product.');\r\n+        }\r\n+      });\r\n+    } else {\r\n+      //  Create new product\r\n       this.productService.createProduct(formData).subscribe({\r\n         next: (res) => {\r\n           console.log(' Product created:', res);\r\n           alert('Product created successfully!');\r\n           this.productForm.reset();\r\n+          this.imageDetails.clear();\r\n+          this.addImage();\r\n         },\r\n         error: (err) => {\r\n           console.error(' Error creating product:', err);\r\n           alert('Failed to create product.');\r\n         },\r\n       });\r\n-    } else {\r\n-      this.markFormGroupTouched(this.productForm);\r\n-      console.warn(' Form Invalid');\r\n     }\r\n+  } else {\r\n+    this.markFormGroupTouched(this.productForm);\r\n+    console.warn(' Form Invalid');\r\n   }\r\n+}\r\n \r\n+\r\n   markFormGroupTouched(formGroup: FormGroup | FormArray) {\r\n     (Object as any).values(formGroup.controls).forEach((control: any) => {\r\n       if (control.controls) {\r\n         this.markFormGroupTouched(control); // recurse\r\n"
                },
                {
                    "date": 1753022731964,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -268,9 +268,18 @@\n     console.warn(' Form Invalid');\r\n   }\r\n }\r\n \r\n+resetForm() {\r\n+  this.productForm.reset();\r\n+  this.imageDetails.clear();\r\n+  this.addImage();\r\n+  this.isEditMode = false;\r\n+  this.editProductId = null;\r\n+}\r\n \r\n+\r\n+\r\n   markFormGroupTouched(formGroup: FormGroup | FormArray) {\r\n     (Object as any).values(formGroup.controls).forEach((control: any) => {\r\n       if (control.controls) {\r\n         this.markFormGroupTouched(control); // recurse\r\n"
                },
                {
                    "date": 1753022765219,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -278,8 +278,9 @@\n }\r\n \r\n \r\n \r\n+\r\n   markFormGroupTouched(formGroup: FormGroup | FormArray) {\r\n     (Object as any).values(formGroup.controls).forEach((control: any) => {\r\n       if (control.controls) {\r\n         this.markFormGroupTouched(control); // recurse\r\n"
                },
                {
                    "date": 1753023035612,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -310,44 +310,56 @@\n patchFormData(product: any) {\r\n   this.isEditMode = true;\r\n   this.editProductId = product._id;\r\n \r\n+  // Patch top-level product fields\r\n   this.productForm.patchValue({\r\n     title: product.title,\r\n-    // ... other fields\r\n+    description: product.description,\r\n+    type: product.type,\r\n+    brand: product.brand,\r\n+    collection: product.collection,\r\n+    category: product.category,\r\n+    price: product.price,\r\n+    discount: product.discount,\r\n+    stock: product.stock,\r\n+    newProduct: product.new, // maps 'new' from API to 'newProduct' field in form\r\n   });\r\n \r\n+  // Clear previous images\r\n   this.imageDetails.clear();\r\n \r\n+  // Reconstruct image + variant form groups\r\n   product.images.forEach((image: any) => {\r\n     const variants = product.variants.filter(\r\n-      (v: any) => v.image_id === image.image_id\r\n+      (variant: any) => variant.image_id === image.image_id\r\n     );\r\n \r\n-    const variantFGs = variants.map((variant: any) =>\r\n+    const variantFormGroups = variants.map((variant: any) =>\r\n       this.fb.group({\r\n         sku: [variant.sku, Validators.required],\r\n         size: [variant.size, Validators.required],\r\n         color: [variant.color, Validators.required],\r\n       })\r\n     );\r\n \r\n-    const imageFG = this.fb.group({\r\n+    const imageFormGroup = this.fb.group({\r\n       alt: [image.alt, Validators.required],\r\n-      src: ['http://localhost:3000/' + image.src, Validators.required],\r\n-      'variant Details': this.fb.array(variantFGs, Validators.required),\r\n+      src: [`http://localhost:3000/${image.src}`, Validators.required],\r\n+      variantDetails: this.fb.array(variantFormGroups, Validators.required),\r\n     });\r\n \r\n-    this.imageDetails.push(imageFG);\r\n+    this.imageDetails.push(imageFormGroup);\r\n   });\r\n \r\n-  // Optionally: switch to second tab\r\n+  // Optionally go to Images & Variants tab\r\n   this.goToTab(1);\r\n }\r\n \r\n \r\n \r\n \r\n+\r\n // test(event: any) {\r\n //   console.log('Event emitted from child component:', event);\r\n \r\n //   this.patchFormData(event);\r\n"
                },
                {
                    "date": 1753023103526,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,12 +2,9 @@\n   ChangeDetectorRef,\r\n   Component,\r\n   ElementRef,\r\n   inject,\r\n-  Input,\r\n-  OnChanges,\r\n   signal,\r\n-  SimpleChanges,\r\n   ViewChild,\r\n } from '@angular/core';\r\n import { MatSelectModule } from '@angular/material/select';\r\n import { MatInputModule } from '@angular/material/input';\r\n@@ -38,9 +35,8 @@\n import { MatCardModule } from '@angular/material/card';\r\n import { MatDividerModule } from '@angular/material/divider';\r\n import { MatTabsModule, MatTabGroup } from '@angular/material/tabs';\r\n import { ProductService } from '../../services/product.service';\r\n-import { ProductListComponent } from \"../product-list/product-list.component\";\r\n \r\n export interface Fruit {\r\n   name: string;\r\n }\r\n@@ -61,17 +57,13 @@\n     MatChipsModule,\r\n     MatAutocompleteModule,\r\n     MatSelectModule,\r\n     MatDividerModule,\r\n-    ProductListComponent\r\n-],\r\n+  ],\r\n   templateUrl: './add-product.component.html',\r\n   styleUrl: './add-product.component.scss',\r\n })\r\n export class AddProductComponent {\r\n-  isEditMode = false;\r\n-editProductId: string | null = null;\r\n-\r\n   productForm: FormGroup;\r\n   @ViewChild('tabGroup') tabGroup!: MatTabGroup;\r\n   @ViewChild('imageTabFocus', { static: false }) imageTabFocus!: ElementRef;\r\n   imageUrl: any[] = [\r\n@@ -153,11 +145,12 @@\n     });\r\n \r\n     this.addImage(); // Add initial image entry\r\n \r\n+\r\n+    this.callPatch()\r\n   }\r\n \r\n-\r\n   get imageDetails(): FormArray {\r\n     return this.productForm.get('images Details') as FormArray;\r\n   }\r\n \r\n@@ -217,70 +210,39 @@\n       reader.onerror = (error) => reject(error);\r\n     });\r\n   }\r\n \r\n-Submit() {\r\n-  if (this.productForm.valid) {\r\n-    const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n+  Submit() {\r\n+    if (this.productForm.valid) {\r\n+      const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n \r\n-    // Clean up previews or temp data\r\n-    formData['images Details'].forEach((img: any) => {\r\n-      delete img.preview;\r\n-    });\r\n+      // Clean preview fields if present\r\n+      formData['images Details'].forEach((img: any) => {\r\n+        delete img.preview;\r\n+      });\r\n \r\n-    formData.sale = true;\r\n-    formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n+      // Static values\r\n+      formData.sale = true;\r\n+      formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n \r\n-    if (this.isEditMode && this.editProductId) {\r\n-      //  Update product\r\n-      this.productService.updateProduct(this.editProductId, formData).subscribe({\r\n-        next: (res) => {\r\n-          console.log(' Product updated:', res);\r\n-          alert('Product updated successfully!');\r\n-          this.productForm.reset();\r\n-          this.imageDetails.clear();\r\n-          this.addImage();\r\n-          this.isEditMode = false;\r\n-          this.editProductId = null;\r\n-        },\r\n-        error: (err) => {\r\n-          console.error(' Error updating product:', err);\r\n-          alert('Failed to update product.');\r\n-        }\r\n-      });\r\n-    } else {\r\n-      //  Create new product\r\n+      // Call service\r\n       this.productService.createProduct(formData).subscribe({\r\n         next: (res) => {\r\n           console.log(' Product created:', res);\r\n           alert('Product created successfully!');\r\n           this.productForm.reset();\r\n-          this.imageDetails.clear();\r\n-          this.addImage();\r\n         },\r\n         error: (err) => {\r\n           console.error(' Error creating product:', err);\r\n           alert('Failed to create product.');\r\n         },\r\n       });\r\n+    } else {\r\n+      this.markFormGroupTouched(this.productForm);\r\n+      console.warn(' Form Invalid');\r\n     }\r\n-  } else {\r\n-    this.markFormGroupTouched(this.productForm);\r\n-    console.warn(' Form Invalid');\r\n   }\r\n-}\r\n \r\n-resetForm() {\r\n-  this.productForm.reset();\r\n-  this.imageDetails.clear();\r\n-  this.addImage();\r\n-  this.isEditMode = false;\r\n-  this.editProductId = null;\r\n-}\r\n-\r\n-\r\n-\r\n-\r\n   markFormGroupTouched(formGroup: FormGroup | FormArray) {\r\n     (Object as any).values(formGroup.controls).forEach((control: any) => {\r\n       if (control.controls) {\r\n         this.markFormGroupTouched(control); // recurse\r\n@@ -303,16 +265,395 @@\n \r\n \r\n \r\n \r\n+  callPatch(){\r\n+   const data = {\r\n+    \"_id\": \"686dd61eda29c46f3c3d1c7d\",\r\n+    \"title\": \"Apple iPhone 15\",\r\n+    \"description\": \"About this item\\nDYNAMIC ISLAND COMES TO IPHONE 15  Dynamic Island bubbles up alerts and Live Activities  so you dont miss them while youre doing something else. You can see whos calling, track your next ride, check your flight status, and so much more.\\nINNOVATIVE DESIGN  iPhone 15 features a durable color-infused glass and aluminum design. Its splash, water, and dust resistant. The Ceramic Shield front is tougher than any smartphone glass. And the 6.1\\\" Super Retina XDR display is up to 2x brighter in the sun compared to iPhone 14.\\n48MP MAIN CAMERA WITH 2X TELEPHOTO  The 48MP Main camera shoots in super-high resolution. So its easier than ever to take standout photos with amazing detail. The 2x optical-quality Telephoto lets you frame the perfect close-up.\\nNEXT-GENERATION PORTRAITS  Capture portraits with dramatically more detail and color. Just tap to shift the focus between subjects  even after you take the shot.\\nPOWERHOUSE A16 BIONIC CHIP  The superfast chip powers advanced features like computational photography, fluid Dynamic Island transitions, and Voice Isolation for phone calls. And A16 Bionic is incredibly efficient to help deliver great all-day battery life.\",\r\n+    \"type\": \"electronics\",\r\n+    \"brand\": \"iphone\",\r\n+    \"collection\": [\r\n+        \"new products\"\r\n+    ],\r\n+    \"category\": \"electronics\",\r\n+    \"price\": 79600,\r\n+    \"sale\": true,\r\n+    \"discount\": \"27\",\r\n+    \"stock\": 10,\r\n+    \"new\": true,\r\n+    \"tags\": [\r\n+        \"s\",\r\n+        \"m\",\r\n+        \"pink\",\r\n+        \"blue\",\r\n+        \"biba\",\r\n+        \"iphone\"\r\n+    ],\r\n+    \"variants\": [\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Black\",\r\n+            \"image_id\": 111,\r\n+            \"_id\": \"686dd61eda29c46f3c3d1c7e\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-002\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Black\",\r\n+            \"image_id\": 112,\r\n+            \"_id\": \"686dd61eda29c46f3c3d1c7f\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Black\",\r\n+            \"image_id\": 113,\r\n+            \"_id\": \"686dd61eda29c46f3c3d1c80\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-002\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Green\",\r\n+            \"image_id\": 113,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c81\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-003\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Blue\",\r\n+            \"image_id\": 113,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c82\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-004\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Yellow\",\r\n+            \"image_id\": 113,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c83\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Pink\",\r\n+            \"image_id\": 113,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c84\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Blue\",\r\n+            \"image_id\": 114,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c85\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-002\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Green\",\r\n+            \"image_id\": 114,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c86\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-003\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Black\",\r\n+            \"image_id\": 114,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c87\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-004\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Yellow\",\r\n+            \"image_id\": 114,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c88\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Pink\",\r\n+            \"image_id\": 114,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c89\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Blue\",\r\n+            \"image_id\": 115,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c8a\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-002\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Green\",\r\n+            \"image_id\": 115,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c8b\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-003\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Black\",\r\n+            \"image_id\": 115,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c8c\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-004\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Yellow\",\r\n+            \"image_id\": 115,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c8d\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Pink\",\r\n+            \"image_id\": 115,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c8e\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Blue\",\r\n+            \"image_id\": 116,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c8f\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-002\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Green\",\r\n+            \"image_id\": 116,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c90\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-003\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Black\",\r\n+            \"image_id\": 116,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c91\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-004\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Yellow\",\r\n+            \"image_id\": 116,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c92\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Pink\",\r\n+            \"image_id\": 116,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c93\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Blue\",\r\n+            \"image_id\": 117,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c94\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Blue\",\r\n+            \"image_id\": 118,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c95\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Green\",\r\n+            \"image_id\": 119,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c96\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Green\",\r\n+            \"image_id\": 120,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c97\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Pink\",\r\n+            \"image_id\": 121,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c98\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Pink\",\r\n+            \"image_id\": 122,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c99\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Yellow\",\r\n+            \"image_id\": 123,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c9a\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Yellow\",\r\n+            \"image_id\": 124,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c9b\"\r\n+        }\r\n+    ],\r\n+    \"images\": [\r\n+        {\r\n+            \"image_id\": 111,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_111.jpeg\",\r\n+            \"variant_id\": [\r\n+                101\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c9c\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 112,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_112.jpeg\",\r\n+            \"variant_id\": [\r\n+                102\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c9d\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 113,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_113.jpeg\",\r\n+            \"variant_id\": [\r\n+                103,\r\n+                104,\r\n+                105,\r\n+                106,\r\n+                107\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c9e\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 114,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_114.jpeg\",\r\n+            \"variant_id\": [\r\n+                108,\r\n+                109,\r\n+                110,\r\n+                111,\r\n+                112\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c9f\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 115,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_115.jpeg\",\r\n+            \"variant_id\": [\r\n+                113,\r\n+                114,\r\n+                115,\r\n+                116,\r\n+                117\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca0\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 116,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_116.jpeg\",\r\n+            \"variant_id\": [\r\n+                118,\r\n+                119,\r\n+                120,\r\n+                121,\r\n+                122\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca1\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 117,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_117.jpeg\",\r\n+            \"variant_id\": [\r\n+                123\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca2\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 118,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_118.jpeg\",\r\n+            \"variant_id\": [\r\n+                124\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca3\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 119,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_119.jpeg\",\r\n+            \"variant_id\": [\r\n+                125\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca4\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 120,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_120.jpeg\",\r\n+            \"variant_id\": [\r\n+                126\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca5\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 121,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_121.jpeg\",\r\n+            \"variant_id\": [\r\n+                127\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca6\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 122,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_122.jpeg\",\r\n+            \"variant_id\": [\r\n+                128\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca7\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 123,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_123.jpeg\",\r\n+            \"variant_id\": [\r\n+                129\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca8\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 124,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_124.jpeg\",\r\n+            \"variant_id\": [\r\n+                130\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca9\"\r\n+        }\r\n+    ],\r\n+    \"__v\": 0\r\n+}\r\n+    this.patchFormData(data)\r\n+  }\r\n \r\n \r\n-\r\n-patchFormData(product: any) {\r\n-  this.isEditMode = true;\r\n-  this.editProductId = product._id;\r\n-\r\n-  // Patch top-level product fields\r\n+  patchFormData(product: any) {\r\n   this.productForm.patchValue({\r\n     title: product.title,\r\n     description: product.description,\r\n     type: product.type,\r\n@@ -321,48 +662,34 @@\n     category: product.category,\r\n     price: product.price,\r\n     discount: product.discount,\r\n     stock: product.stock,\r\n-    newProduct: product.new, // maps 'new' from API to 'newProduct' field in form\r\n+    newProduct: product.new,\r\n   });\r\n \r\n-  // Clear previous images\r\n+  // Clear existing images\r\n   this.imageDetails.clear();\r\n \r\n-  // Reconstruct image + variant form groups\r\n-  product.images.forEach((image: any) => {\r\n+  // Loop through images and add with corresponding variants\r\n+  product.images.forEach((image:any) => {\r\n+    // Find all variants for this image_id\r\n     const variants = product.variants.filter(\r\n-      (variant: any) => variant.image_id === image.image_id\r\n+      (v:any) => v.image_id === image.image_id\r\n     );\r\n \r\n-    const variantFormGroups = variants.map((variant: any) =>\r\n-      this.fb.group({\r\n-        sku: [variant.sku, Validators.required],\r\n-        size: [variant.size, Validators.required],\r\n-        color: [variant.color, Validators.required],\r\n-      })\r\n-    );\r\n+    const variantFGs = variants.map((variant:any) => this.fb.group({\r\n+      sku: [variant.sku, Validators.required],\r\n+      size: [variant.size, Validators.required],\r\n+      color: [variant.color, Validators.required],\r\n+    }));\r\n \r\n-    const imageFormGroup = this.fb.group({\r\n+    const imageFG = this.fb.group({\r\n       alt: [image.alt, Validators.required],\r\n-      src: [`http://localhost:3000/${image.src}`, Validators.required],\r\n-      variantDetails: this.fb.array(variantFormGroups, Validators.required),\r\n+      src: ['http://localhost:3000/'+image.src, Validators.required],\r\n+      'variant Details': this.fb.array(variantFGs, Validators.required)\r\n     });\r\n \r\n-    this.imageDetails.push(imageFormGroup);\r\n+    this.imageDetails.push(imageFG);\r\n   });\r\n-\r\n-  // Optionally go to Images & Variants tab\r\n-  this.goToTab(1);\r\n }\r\n \r\n-\r\n-\r\n-\r\n-\r\n-// test(event: any) {\r\n-//   console.log('Event emitted from child component:', event);\r\n-\r\n-//   this.patchFormData(event);\r\n-// }\r\n-\r\n }\r\n"
                },
                {
                    "date": 1753023148623,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,8 +35,9 @@\n import { MatCardModule } from '@angular/material/card';\r\n import { MatDividerModule } from '@angular/material/divider';\r\n import { MatTabsModule, MatTabGroup } from '@angular/material/tabs';\r\n import { ProductService } from '../../services/product.service';\r\n+import { ProductListComponent } from \"../product-list/product-list.component\";\r\n \r\n export interface Fruit {\r\n   name: string;\r\n }\r\n@@ -57,9 +58,10 @@\n     MatChipsModule,\r\n     MatAutocompleteModule,\r\n     MatSelectModule,\r\n     MatDividerModule,\r\n-  ],\r\n+    ProductListComponent\r\n+],\r\n   templateUrl: './add-product.component.html',\r\n   styleUrl: './add-product.component.scss',\r\n })\r\n export class AddProductComponent {\r\n"
                },
                {
                    "date": 1753023199987,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -148,9 +148,8 @@\n \r\n     this.addImage(); // Add initial image entry\r\n \r\n \r\n-    this.callPatch()\r\n   }\r\n \r\n   get imageDetails(): FormArray {\r\n     return this.productForm.get('images Details') as FormArray;\r\n@@ -267,394 +266,8 @@\n \r\n \r\n \r\n \r\n-  callPatch(){\r\n-   const data = {\r\n-    \"_id\": \"686dd61eda29c46f3c3d1c7d\",\r\n-    \"title\": \"Apple iPhone 15\",\r\n-    \"description\": \"About this item\\nDYNAMIC ISLAND COMES TO IPHONE 15  Dynamic Island bubbles up alerts and Live Activities  so you dont miss them while youre doing something else. You can see whos calling, track your next ride, check your flight status, and so much more.\\nINNOVATIVE DESIGN  iPhone 15 features a durable color-infused glass and aluminum design. Its splash, water, and dust resistant. The Ceramic Shield front is tougher than any smartphone glass. And the 6.1\\\" Super Retina XDR display is up to 2x brighter in the sun compared to iPhone 14.\\n48MP MAIN CAMERA WITH 2X TELEPHOTO  The 48MP Main camera shoots in super-high resolution. So its easier than ever to take standout photos with amazing detail. The 2x optical-quality Telephoto lets you frame the perfect close-up.\\nNEXT-GENERATION PORTRAITS  Capture portraits with dramatically more detail and color. Just tap to shift the focus between subjects  even after you take the shot.\\nPOWERHOUSE A16 BIONIC CHIP  The superfast chip powers advanced features like computational photography, fluid Dynamic Island transitions, and Voice Isolation for phone calls. And A16 Bionic is incredibly efficient to help deliver great all-day battery life.\",\r\n-    \"type\": \"electronics\",\r\n-    \"brand\": \"iphone\",\r\n-    \"collection\": [\r\n-        \"new products\"\r\n-    ],\r\n-    \"category\": \"electronics\",\r\n-    \"price\": 79600,\r\n-    \"sale\": true,\r\n-    \"discount\": \"27\",\r\n-    \"stock\": 10,\r\n-    \"new\": true,\r\n-    \"tags\": [\r\n-        \"s\",\r\n-        \"m\",\r\n-        \"pink\",\r\n-        \"blue\",\r\n-        \"biba\",\r\n-        \"iphone\"\r\n-    ],\r\n-    \"variants\": [\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Black\",\r\n-            \"image_id\": 111,\r\n-            \"_id\": \"686dd61eda29c46f3c3d1c7e\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-002\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Black\",\r\n-            \"image_id\": 112,\r\n-            \"_id\": \"686dd61eda29c46f3c3d1c7f\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Black\",\r\n-            \"image_id\": 113,\r\n-            \"_id\": \"686dd61eda29c46f3c3d1c80\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-002\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Green\",\r\n-            \"image_id\": 113,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c81\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-003\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Blue\",\r\n-            \"image_id\": 113,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c82\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-004\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Yellow\",\r\n-            \"image_id\": 113,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c83\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Pink\",\r\n-            \"image_id\": 113,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c84\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Blue\",\r\n-            \"image_id\": 114,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c85\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-002\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Green\",\r\n-            \"image_id\": 114,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c86\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-003\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Black\",\r\n-            \"image_id\": 114,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c87\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-004\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Yellow\",\r\n-            \"image_id\": 114,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c88\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Pink\",\r\n-            \"image_id\": 114,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c89\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Blue\",\r\n-            \"image_id\": 115,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c8a\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-002\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Green\",\r\n-            \"image_id\": 115,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c8b\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-003\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Black\",\r\n-            \"image_id\": 115,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c8c\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-004\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Yellow\",\r\n-            \"image_id\": 115,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c8d\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Pink\",\r\n-            \"image_id\": 115,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c8e\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Blue\",\r\n-            \"image_id\": 116,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c8f\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-002\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Green\",\r\n-            \"image_id\": 116,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c90\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-003\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Black\",\r\n-            \"image_id\": 116,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c91\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-004\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Yellow\",\r\n-            \"image_id\": 116,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c92\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Pink\",\r\n-            \"image_id\": 116,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c93\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Blue\",\r\n-            \"image_id\": 117,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c94\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Blue\",\r\n-            \"image_id\": 118,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c95\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Green\",\r\n-            \"image_id\": 119,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c96\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Green\",\r\n-            \"image_id\": 120,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c97\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Pink\",\r\n-            \"image_id\": 121,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c98\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Pink\",\r\n-            \"image_id\": 122,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c99\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Yellow\",\r\n-            \"image_id\": 123,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c9a\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Yellow\",\r\n-            \"image_id\": 124,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c9b\"\r\n-        }\r\n-    ],\r\n-    \"images\": [\r\n-        {\r\n-            \"image_id\": 111,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_111.jpeg\",\r\n-            \"variant_id\": [\r\n-                101\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c9c\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 112,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_112.jpeg\",\r\n-            \"variant_id\": [\r\n-                102\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c9d\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 113,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_113.jpeg\",\r\n-            \"variant_id\": [\r\n-                103,\r\n-                104,\r\n-                105,\r\n-                106,\r\n-                107\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c9e\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 114,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_114.jpeg\",\r\n-            \"variant_id\": [\r\n-                108,\r\n-                109,\r\n-                110,\r\n-                111,\r\n-                112\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c9f\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 115,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_115.jpeg\",\r\n-            \"variant_id\": [\r\n-                113,\r\n-                114,\r\n-                115,\r\n-                116,\r\n-                117\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca0\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 116,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_116.jpeg\",\r\n-            \"variant_id\": [\r\n-                118,\r\n-                119,\r\n-                120,\r\n-                121,\r\n-                122\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca1\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 117,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_117.jpeg\",\r\n-            \"variant_id\": [\r\n-                123\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca2\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 118,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_118.jpeg\",\r\n-            \"variant_id\": [\r\n-                124\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca3\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 119,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_119.jpeg\",\r\n-            \"variant_id\": [\r\n-                125\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca4\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 120,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_120.jpeg\",\r\n-            \"variant_id\": [\r\n-                126\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca5\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 121,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_121.jpeg\",\r\n-            \"variant_id\": [\r\n-                127\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca6\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 122,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_122.jpeg\",\r\n-            \"variant_id\": [\r\n-                128\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca7\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 123,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_123.jpeg\",\r\n-            \"variant_id\": [\r\n-                129\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca8\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 124,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_124.jpeg\",\r\n-            \"variant_id\": [\r\n-                130\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca9\"\r\n-        }\r\n-    ],\r\n-    \"__v\": 0\r\n-}\r\n-    this.patchFormData(data)\r\n-  }\r\n-\r\n-\r\n   patchFormData(product: any) {\r\n   this.productForm.patchValue({\r\n     title: product.title,\r\n     description: product.description,\r\n"
                },
                {
                    "date": 1753023387533,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,47 +1,36 @@\n+// Updated and cleaned up Angular component for adding a product\r\n+\r\n import {\r\n   ChangeDetectorRef,\r\n   Component,\r\n   ElementRef,\r\n-  inject,\r\n-  signal,\r\n   ViewChild,\r\n } from '@angular/core';\r\n-import { MatSelectModule } from '@angular/material/select';\r\n-import { MatInputModule } from '@angular/material/input';\r\n-import { MatFormFieldModule } from '@angular/material/form-field';\r\n-import { MatIconModule } from '@angular/material/icon';\r\n-import { NgFor, NgIf } from '@angular/common';\r\n-import { MatExpansionModule } from '@angular/material/expansion';\r\n import {\r\n   FormArray,\r\n   FormBuilder,\r\n   FormControl,\r\n   FormGroup,\r\n+  Validators,\r\n   ReactiveFormsModule,\r\n-  Validators,\r\n } from '@angular/forms';\r\n+import { MatTabGroup } from '@angular/material/tabs';\r\n+import { DomSanitizer } from '@angular/platform-browser';\r\n+import { ProductService } from '../../services/product.service';\r\n+import { ProductListComponent } from '../product-list/product-list.component';\r\n import {\r\n-  MatChipEditedEvent,\r\n-  MatChipInputEvent,\r\n-  MatChipsModule,\r\n-} from '@angular/material/chips';\r\n-import { COMMA, ENTER } from '@angular/cdk/keycodes';\r\n-import { LiveAnnouncer } from '@angular/cdk/a11y';\r\n-import { Observable } from 'rxjs';\r\n-import { map, startWith } from 'rxjs/operators';\r\n-import { AsyncPipe } from '@angular/common';\r\n-import { MatAutocompleteModule } from '@angular/material/autocomplete';\r\n-import { MatButtonModule } from '@angular/material/button';\r\n-import { MatCardModule } from '@angular/material/card';\r\n-import { MatDividerModule } from '@angular/material/divider';\r\n-import { MatTabsModule, MatTabGroup } from '@angular/material/tabs';\r\n-import { ProductService } from '../../services/product.service';\r\n-import { ProductListComponent } from \"../product-list/product-list.component\";\r\n+  MatTabsModule,\r\n+  MatCardModule,\r\n+  MatIconModule,\r\n+  MatFormFieldModule,\r\n+  MatInputModule,\r\n+  MatButtonModule,\r\n+  MatSelectModule,\r\n+  MatDividerModule,\r\n+} from '@angular/material';\r\n+import { NgIf, NgFor } from '@angular/common';\r\n \r\n-export interface Fruit {\r\n-  name: string;\r\n-}\r\n @Component({\r\n   selector: 'app-add-product',\r\n   standalone: true,\r\n   imports: [\r\n@@ -53,86 +42,33 @@\n     MatIconModule,\r\n     MatFormFieldModule,\r\n     MatInputModule,\r\n     MatButtonModule,\r\n-    MatExpansionModule,\r\n-    MatChipsModule,\r\n-    MatAutocompleteModule,\r\n     MatSelectModule,\r\n     MatDividerModule,\r\n-    ProductListComponent\r\n-],\r\n+    ProductListComponent,\r\n+  ],\r\n   templateUrl: './add-product.component.html',\r\n   styleUrl: './add-product.component.scss',\r\n })\r\n export class AddProductComponent {\r\n   productForm: FormGroup;\r\n   @ViewChild('tabGroup') tabGroup!: MatTabGroup;\r\n   @ViewChild('imageTabFocus', { static: false }) imageTabFocus!: ElementRef;\r\n-  imageUrl: any[] = [\r\n-    '../../../assts/add-img.webp',\r\n-    '../../../assts/add-img.webp',\r\n-    '../../../assts/add-img.webp',\r\n-    '../../../assts/add-img.webp',\r\n-  ];\r\n \r\n-  typeArray = [\r\n-    { key: 'Fashion', value: 'fashion' },\r\n-    { key: 'Shoes', value: 'shoes' },\r\n-    { key: 'Bags', value: 'bags' },\r\n-    { key: 'Watch', value: 'watch' },\r\n-    { key: 'Flower', value: 'flower' },\r\n-    { key: 'Pets', value: 'pets' },\r\n-    { key: 'Electronics', value: 'electronics' },\r\n-    { key: 'Vegetables', value: 'vegetables' },\r\n-    { key: 'Furniture', value: 'furniture' },\r\n-    { key: 'Beauty', value: 'beauty' },\r\n-    { key: 'Tools', value: 'tools' },\r\n-    { key: 'Gym', value: 'gym' },\r\n-    { key: 'Marijuana', value: 'marijuana' },\r\n-  ];\r\n+  typeArray = [...];\r\n+  brandArray = [...];\r\n+  collectionArray = [...];\r\n+  categoryArray = [...];\r\n+  skuOptions: string[] = ['SKU-001', 'SKU-002', 'SKU-003', 'SKU-004'];\r\n+  sizeOptions: string[] = ['XS', 'S', 'M', 'L', 'XL'];\r\n+  colorOptions: string[] = ['Red', 'Blue', 'Green', 'Black', 'White', 'Yellow', 'Pink'];\r\n \r\n-  brandArray = [\r\n-    { key: 'Nike', value: 'nike' },\r\n-    {key:'Iphone', value: 'iphone'},\r\n-    { key: 'Zara', value: 'zara' },\r\n-    { key: 'Denim', value: 'denim' },\r\n-    { key: 'Madame', value: 'madame' },\r\n-    { key: 'Biba', value: 'biba' },\r\n-    { key: 'Max', value: 'max' },\r\n-  ];\r\n-\r\n-  collectionArray = [\r\n-    { key: 'New products', value: 'new products' },\r\n-    { key: 'Best sellers', value: 'best sellers' },\r\n-    { key: 'Featured products', value: 'featured products' },\r\n-    { key: 'On sale', value: 'on sale' },\r\n-    { key: 'New arrival', value: 'new arrival' },\r\n-    { key: 'Trending product', value: 'trending product' },\r\n-  ];\r\n-\r\n-  categoryArray = [\r\n-    { key: 'Fashion', value: 'Women' },\r\n-    { key: 'Shoes', value: 'shoes' },\r\n-    { key: 'Bags', value: 'bags' },\r\n-    { key: 'Watch', value: 'watch' },\r\n-    { key: 'Flower', value: 'flower' },\r\n-    { key: 'Pets', value: 'pets' },\r\n-    { key: 'Electronics', value: 'electronics' },\r\n-    { key: 'Vegetables', value: 'vegetables' },\r\n-    { key: 'Furniture', value: 'furniture' },\r\n-    { key: 'Beauty', value: 'beauty' },\r\n-    { key: 'Tools', value: 'tools' },\r\n-    { key: 'Gym', value: 'gym' },\r\n-    { key: 'Marijuana', value: 'marijuana' },\r\n-  ];\r\n-skuOptions: string[] = ['SKU-001', 'SKU-002', 'SKU-003', 'SKU-004'];\r\n-  options: string[] = ['s', 'm', 'l', 'xl', 'xxl'];\r\n-  colors: string[] = ['yellow', 'white', 'pink', 'olive', 'navy', 'red'];\r\n-sizeOptions: string[] = ['XS', 'S', 'M', 'L', 'XL'];\r\n-colorOptions: string[] = ['Red', 'Blue', 'Green', 'Black', 'White', 'Yellow', 'Pink'];\r\n-\r\n-  constructor(private fb: FormBuilder, private productService: ProductService) {\r\n+  constructor(\r\n+    private fb: FormBuilder,\r\n+    private sanitizer: DomSanitizer,\r\n+    private productService: ProductService\r\n+  ) {\r\n     this.productForm = this.fb.group({\r\n       title: ['', Validators.required],\r\n       description: ['', Validators.required],\r\n       type: ['', Validators.required],\r\n@@ -141,29 +77,25 @@\n       category: ['', Validators.required],\r\n       price: ['', Validators.required],\r\n       discount: ['', Validators.required],\r\n       stock: ['', Validators.required],\r\n-      newProduct: [false, Validators.requiredTrue],\r\n-      'images Details': this.fb.array([], Validators.required),\r\n+      newProduct: [true, Validators.requiredTrue],\r\n+      imagesDetails: this.fb.array([], Validators.required),\r\n     });\r\n \r\n-    this.addImage(); // Add initial image entry\r\n-\r\n-\r\n+    this.addImage();\r\n   }\r\n \r\n-  get imageDetails(): FormArray {\r\n-    return this.productForm.get('images Details') as FormArray;\r\n+  get imagesDetails(): FormArray {\r\n+    return this.productForm.get('imagesDetails') as FormArray;\r\n   }\r\n \r\n   newImage(): FormGroup {\r\n     return this.fb.group({\r\n-      alt: ['image not found.', Validators.required],\r\n-      src: ['', Validators.required], // base64 string\r\n-      'variant Details': this.fb.array(\r\n-        [this.newVariant()],\r\n-        Validators.required\r\n-      ),\r\n+      alt: ['Image not found.', Validators.required],\r\n+      src: ['', Validators.required],\r\n+      preview: [''],\r\n+      variantDetails: this.fb.array([this.newVariant()], Validators.required),\r\n     });\r\n   }\r\n \r\n   newVariant(): FormGroup {\r\n@@ -174,17 +106,17 @@\n     });\r\n   }\r\n \r\n   addImage() {\r\n-    this.imageDetails.push(this.newImage());\r\n+    this.imagesDetails.push(this.newImage());\r\n   }\r\n \r\n   removeImage(index: number) {\r\n-    this.imageDetails.removeAt(index);\r\n+    this.imagesDetails.removeAt(index);\r\n   }\r\n \r\n   getVariants(imageIndex: number): FormArray {\r\n-    return this.imageDetails.at(imageIndex).get('variant Details') as FormArray;\r\n+    return this.imagesDetails.at(imageIndex).get('variantDetails') as FormArray;\r\n   }\r\n \r\n   addVariant(imageIndex: number) {\r\n     this.getVariants(imageIndex).push(this.newVariant());\r\n@@ -197,9 +129,9 @@\n   async onFileChange(event: any, imageIndex: number) {\r\n     const file = event.target.files[0];\r\n     if (file) {\r\n       const base64 = await this.convertToBase64(file);\r\n-      const group = this.imageDetails.at(imageIndex);\r\n+      const group = this.imagesDetails.at(imageIndex);\r\n       group.patchValue({ src: base64, preview: base64 });\r\n     }\r\n   }\r\n \r\n@@ -211,100 +143,88 @@\n       reader.onerror = (error) => reject(error);\r\n     });\r\n   }\r\n \r\n+  getSafeUrl(url: string) {\r\n+    return this.sanitizer.bypassSecurityTrustUrl(url);\r\n+  }\r\n+\r\n   Submit() {\r\n     if (this.productForm.valid) {\r\n       const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n \r\n-      // Clean preview fields if present\r\n-      formData['images Details'].forEach((img: any) => {\r\n+      formData.imagesDetails.forEach((img: any) => {\r\n         delete img.preview;\r\n       });\r\n \r\n-      // Static values\r\n       formData.sale = true;\r\n       formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n \r\n-      // Call service\r\n       this.productService.createProduct(formData).subscribe({\r\n         next: (res) => {\r\n-          console.log(' Product created:', res);\r\n           alert('Product created successfully!');\r\n           this.productForm.reset();\r\n         },\r\n         error: (err) => {\r\n-          console.error(' Error creating product:', err);\r\n           alert('Failed to create product.');\r\n         },\r\n       });\r\n     } else {\r\n       this.markFormGroupTouched(this.productForm);\r\n-      console.warn(' Form Invalid');\r\n     }\r\n   }\r\n \r\n   markFormGroupTouched(formGroup: FormGroup | FormArray) {\r\n-    (Object as any).values(formGroup.controls).forEach((control: any) => {\r\n+    Object.values(formGroup.controls).forEach((control: any) => {\r\n       if (control.controls) {\r\n-        this.markFormGroupTouched(control); // recurse\r\n+        this.markFormGroupTouched(control);\r\n       } else {\r\n         control.markAsTouched();\r\n       }\r\n     });\r\n   }\r\n \r\n   goToTab(index: number) {\r\n     this.tabGroup.selectedIndex = index;\r\n-\r\n-    // Allow time for tab change before shifting focus\r\n     setTimeout(() => {\r\n       if (index === 1 && this.imageTabFocus) {\r\n         this.imageTabFocus.nativeElement.focus();\r\n       }\r\n-    }, 200); // Delay ensures tab is visible before focusing\r\n+    }, 200);\r\n   }\r\n \r\n+  patchFormData(product: any) {\r\n+    this.productForm.patchValue({\r\n+      title: product.title,\r\n+      description: product.description,\r\n+      type: product.type,\r\n+      brand: product.brand,\r\n+      collection: product.collection,\r\n+      category: product.category,\r\n+      price: product.price,\r\n+      discount: product.discount,\r\n+      stock: product.stock,\r\n+      newProduct: product.new,\r\n+    });\r\n \r\n+    this.imagesDetails.clear();\r\n \r\n+    product.images.forEach((image: any) => {\r\n+      const variants = product.variants.filter((v: any) => v.image_id === image.image_id);\r\n \r\n-  patchFormData(product: any) {\r\n-  this.productForm.patchValue({\r\n-    title: product.title,\r\n-    description: product.description,\r\n-    type: product.type,\r\n-    brand: product.brand,\r\n-    collection: product.collection,\r\n-    category: product.category,\r\n-    price: product.price,\r\n-    discount: product.discount,\r\n-    stock: product.stock,\r\n-    newProduct: product.new,\r\n-  });\r\n+      const variantFGs = variants.map((variant: any) => this.fb.group({\r\n+        sku: [variant.sku, Validators.required],\r\n+        size: [variant.size, Validators.required],\r\n+        color: [variant.color, Validators.required],\r\n+      }));\r\n \r\n-  // Clear existing images\r\n-  this.imageDetails.clear();\r\n+      const imageFG = this.fb.group({\r\n+        alt: [image.alt, Validators.required],\r\n+        src: ['http://localhost:3000/' + image.src, Validators.required],\r\n+        preview: ['http://localhost:3000/' + image.src],\r\n+        variantDetails: this.fb.array(variantFGs, Validators.required),\r\n+      });\r\n \r\n-  // Loop through images and add with corresponding variants\r\n-  product.images.forEach((image:any) => {\r\n-    // Find all variants for this image_id\r\n-    const variants = product.variants.filter(\r\n-      (v:any) => v.image_id === image.image_id\r\n-    );\r\n-\r\n-    const variantFGs = variants.map((variant:any) => this.fb.group({\r\n-      sku: [variant.sku, Validators.required],\r\n-      size: [variant.size, Validators.required],\r\n-      color: [variant.color, Validators.required],\r\n-    }));\r\n-\r\n-    const imageFG = this.fb.group({\r\n-      alt: [image.alt, Validators.required],\r\n-      src: ['http://localhost:3000/'+image.src, Validators.required],\r\n-      'variant Details': this.fb.array(variantFGs, Validators.required)\r\n+      this.imagesDetails.push(imageFG);\r\n     });\r\n-\r\n-    this.imageDetails.push(imageFG);\r\n-  });\r\n-}\r\n-\r\n-}\r\n+  }\r\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1753023409629,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,36 +1,46 @@\n-// Updated and cleaned up Angular component for adding a product\r\n-\r\n import {\r\n   ChangeDetectorRef,\r\n   Component,\r\n   ElementRef,\r\n+  inject,\r\n+  signal,\r\n   ViewChild,\r\n } from '@angular/core';\r\n+import { MatSelectModule } from '@angular/material/select';\r\n+import { MatInputModule } from '@angular/material/input';\r\n+import { MatFormFieldModule } from '@angular/material/form-field';\r\n+import { MatIconModule } from '@angular/material/icon';\r\n+import { NgFor, NgIf } from '@angular/common';\r\n+import { MatExpansionModule } from '@angular/material/expansion';\r\n import {\r\n   FormArray,\r\n   FormBuilder,\r\n   FormControl,\r\n   FormGroup,\r\n+  ReactiveFormsModule,\r\n   Validators,\r\n-  ReactiveFormsModule,\r\n } from '@angular/forms';\r\n-import { MatTabGroup } from '@angular/material/tabs';\r\n-import { DomSanitizer } from '@angular/platform-browser';\r\n+import {\r\n+  MatChipEditedEvent,\r\n+  MatChipInputEvent,\r\n+  MatChipsModule,\r\n+} from '@angular/material/chips';\r\n+import { COMMA, ENTER } from '@angular/cdk/keycodes';\r\n+import { LiveAnnouncer } from '@angular/cdk/a11y';\r\n+import { Observable } from 'rxjs';\r\n+import { map, startWith } from 'rxjs/operators';\r\n+import { AsyncPipe } from '@angular/common';\r\n+import { MatAutocompleteModule } from '@angular/material/autocomplete';\r\n+import { MatButtonModule } from '@angular/material/button';\r\n+import { MatCardModule } from '@angular/material/card';\r\n+import { MatDividerModule } from '@angular/material/divider';\r\n+import { MatTabsModule, MatTabGroup } from '@angular/material/tabs';\r\n import { ProductService } from '../../services/product.service';\r\n-import { ProductListComponent } from '../product-list/product-list.component';\r\n-import {\r\n-  MatTabsModule,\r\n-  MatCardModule,\r\n-  MatIconModule,\r\n-  MatFormFieldModule,\r\n-  MatInputModule,\r\n-  MatButtonModule,\r\n-  MatSelectModule,\r\n-  MatDividerModule,\r\n-} from '@angular/material';\r\n-import { NgIf, NgFor } from '@angular/common';\r\n \r\n+export interface Fruit {\r\n+  name: string;\r\n+}\r\n @Component({\r\n   selector: 'app-add-product',\r\n   standalone: true,\r\n   imports: [\r\n@@ -42,33 +52,85 @@\n     MatIconModule,\r\n     MatFormFieldModule,\r\n     MatInputModule,\r\n     MatButtonModule,\r\n+    MatExpansionModule,\r\n+    MatChipsModule,\r\n+    MatAutocompleteModule,\r\n     MatSelectModule,\r\n     MatDividerModule,\r\n-    ProductListComponent,\r\n   ],\r\n   templateUrl: './add-product.component.html',\r\n   styleUrl: './add-product.component.scss',\r\n })\r\n export class AddProductComponent {\r\n   productForm: FormGroup;\r\n   @ViewChild('tabGroup') tabGroup!: MatTabGroup;\r\n   @ViewChild('imageTabFocus', { static: false }) imageTabFocus!: ElementRef;\r\n+  imageUrl: any[] = [\r\n+    '../../../assts/add-img.webp',\r\n+    '../../../assts/add-img.webp',\r\n+    '../../../assts/add-img.webp',\r\n+    '../../../assts/add-img.webp',\r\n+  ];\r\n \r\n-  typeArray = [...];\r\n-  brandArray = [...];\r\n-  collectionArray = [...];\r\n-  categoryArray = [...];\r\n-  skuOptions: string[] = ['SKU-001', 'SKU-002', 'SKU-003', 'SKU-004'];\r\n-  sizeOptions: string[] = ['XS', 'S', 'M', 'L', 'XL'];\r\n-  colorOptions: string[] = ['Red', 'Blue', 'Green', 'Black', 'White', 'Yellow', 'Pink'];\r\n+  typeArray = [\r\n+    { key: 'Fashion', value: 'fashion' },\r\n+    { key: 'Shoes', value: 'shoes' },\r\n+    { key: 'Bags', value: 'bags' },\r\n+    { key: 'Watch', value: 'watch' },\r\n+    { key: 'Flower', value: 'flower' },\r\n+    { key: 'Pets', value: 'pets' },\r\n+    { key: 'Electronics', value: 'electronics' },\r\n+    { key: 'Vegetables', value: 'vegetables' },\r\n+    { key: 'Furniture', value: 'furniture' },\r\n+    { key: 'Beauty', value: 'beauty' },\r\n+    { key: 'Tools', value: 'tools' },\r\n+    { key: 'Gym', value: 'gym' },\r\n+    { key: 'Marijuana', value: 'marijuana' },\r\n+  ];\r\n \r\n-  constructor(\r\n-    private fb: FormBuilder,\r\n-    private sanitizer: DomSanitizer,\r\n-    private productService: ProductService\r\n-  ) {\r\n+  brandArray = [\r\n+    { key: 'Nike', value: 'nike' },\r\n+    {key:'Iphone', value: 'iphone'},\r\n+    { key: 'Zara', value: 'zara' },\r\n+    { key: 'Denim', value: 'denim' },\r\n+    { key: 'Madame', value: 'madame' },\r\n+    { key: 'Biba', value: 'biba' },\r\n+    { key: 'Max', value: 'max' },\r\n+  ];\r\n+\r\n+  collectionArray = [\r\n+    { key: 'New products', value: 'new products' },\r\n+    { key: 'Best sellers', value: 'best sellers' },\r\n+    { key: 'Featured products', value: 'featured products' },\r\n+    { key: 'On sale', value: 'on sale' },\r\n+    { key: 'New arrival', value: 'new arrival' },\r\n+    { key: 'Trending product', value: 'trending product' },\r\n+  ];\r\n+\r\n+  categoryArray = [\r\n+    { key: 'Fashion', value: 'Women' },\r\n+    { key: 'Shoes', value: 'shoes' },\r\n+    { key: 'Bags', value: 'bags' },\r\n+    { key: 'Watch', value: 'watch' },\r\n+    { key: 'Flower', value: 'flower' },\r\n+    { key: 'Pets', value: 'pets' },\r\n+    { key: 'Electronics', value: 'electronics' },\r\n+    { key: 'Vegetables', value: 'vegetables' },\r\n+    { key: 'Furniture', value: 'furniture' },\r\n+    { key: 'Beauty', value: 'beauty' },\r\n+    { key: 'Tools', value: 'tools' },\r\n+    { key: 'Gym', value: 'gym' },\r\n+    { key: 'Marijuana', value: 'marijuana' },\r\n+  ];\r\n+skuOptions: string[] = ['SKU-001', 'SKU-002', 'SKU-003', 'SKU-004'];\r\n+  options: string[] = ['s', 'm', 'l', 'xl', 'xxl'];\r\n+  colors: string[] = ['yellow', 'white', 'pink', 'olive', 'navy', 'red'];\r\n+sizeOptions: string[] = ['XS', 'S', 'M', 'L', 'XL'];\r\n+colorOptions: string[] = ['Red', 'Blue', 'Green', 'Black', 'White', 'Yellow', 'Pink'];\r\n+\r\n+  constructor(private fb: FormBuilder, private productService: ProductService) {\r\n     this.productForm = this.fb.group({\r\n       title: ['', Validators.required],\r\n       description: ['', Validators.required],\r\n       type: ['', Validators.required],\r\n@@ -77,25 +139,30 @@\n       category: ['', Validators.required],\r\n       price: ['', Validators.required],\r\n       discount: ['', Validators.required],\r\n       stock: ['', Validators.required],\r\n-      newProduct: [true, Validators.requiredTrue],\r\n-      imagesDetails: this.fb.array([], Validators.required),\r\n+      newProduct: [false, Validators.requiredTrue],\r\n+      'images Details': this.fb.array([], Validators.required),\r\n     });\r\n \r\n-    this.addImage();\r\n+    this.addImage(); // Add initial image entry\r\n+\r\n+\r\n+    this.callPatch()\r\n   }\r\n \r\n-  get imagesDetails(): FormArray {\r\n-    return this.productForm.get('imagesDetails') as FormArray;\r\n+  get imageDetails(): FormArray {\r\n+    return this.productForm.get('images Details') as FormArray;\r\n   }\r\n \r\n   newImage(): FormGroup {\r\n     return this.fb.group({\r\n-      alt: ['Image not found.', Validators.required],\r\n-      src: ['', Validators.required],\r\n-      preview: [''],\r\n-      variantDetails: this.fb.array([this.newVariant()], Validators.required),\r\n+      alt: ['image not found.', Validators.required],\r\n+      src: ['', Validators.required], // base64 string\r\n+      'variant Details': this.fb.array(\r\n+        [this.newVariant()],\r\n+        Validators.required\r\n+      ),\r\n     });\r\n   }\r\n \r\n   newVariant(): FormGroup {\r\n@@ -106,17 +173,17 @@\n     });\r\n   }\r\n \r\n   addImage() {\r\n-    this.imagesDetails.push(this.newImage());\r\n+    this.imageDetails.push(this.newImage());\r\n   }\r\n \r\n   removeImage(index: number) {\r\n-    this.imagesDetails.removeAt(index);\r\n+    this.imageDetails.removeAt(index);\r\n   }\r\n \r\n   getVariants(imageIndex: number): FormArray {\r\n-    return this.imagesDetails.at(imageIndex).get('variantDetails') as FormArray;\r\n+    return this.imageDetails.at(imageIndex).get('variant Details') as FormArray;\r\n   }\r\n \r\n   addVariant(imageIndex: number) {\r\n     this.getVariants(imageIndex).push(this.newVariant());\r\n@@ -129,9 +196,9 @@\n   async onFileChange(event: any, imageIndex: number) {\r\n     const file = event.target.files[0];\r\n     if (file) {\r\n       const base64 = await this.convertToBase64(file);\r\n-      const group = this.imagesDetails.at(imageIndex);\r\n+      const group = this.imageDetails.at(imageIndex);\r\n       group.patchValue({ src: base64, preview: base64 });\r\n     }\r\n   }\r\n \r\n@@ -143,88 +210,486 @@\n       reader.onerror = (error) => reject(error);\r\n     });\r\n   }\r\n \r\n-  getSafeUrl(url: string) {\r\n-    return this.sanitizer.bypassSecurityTrustUrl(url);\r\n-  }\r\n-\r\n   Submit() {\r\n     if (this.productForm.valid) {\r\n       const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n \r\n-      formData.imagesDetails.forEach((img: any) => {\r\n+      // Clean preview fields if present\r\n+      formData['images Details'].forEach((img: any) => {\r\n         delete img.preview;\r\n       });\r\n \r\n+      // Static values\r\n       formData.sale = true;\r\n       formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n \r\n+      // Call service\r\n       this.productService.createProduct(formData).subscribe({\r\n         next: (res) => {\r\n+          console.log(' Product created:', res);\r\n           alert('Product created successfully!');\r\n           this.productForm.reset();\r\n         },\r\n         error: (err) => {\r\n+          console.error(' Error creating product:', err);\r\n           alert('Failed to create product.');\r\n         },\r\n       });\r\n     } else {\r\n       this.markFormGroupTouched(this.productForm);\r\n+      console.warn(' Form Invalid');\r\n     }\r\n   }\r\n \r\n   markFormGroupTouched(formGroup: FormGroup | FormArray) {\r\n-    Object.values(formGroup.controls).forEach((control: any) => {\r\n+    (Object as any).values(formGroup.controls).forEach((control: any) => {\r\n       if (control.controls) {\r\n-        this.markFormGroupTouched(control);\r\n+        this.markFormGroupTouched(control); // recurse\r\n       } else {\r\n         control.markAsTouched();\r\n       }\r\n     });\r\n   }\r\n \r\n   goToTab(index: number) {\r\n     this.tabGroup.selectedIndex = index;\r\n+\r\n+    // Allow time for tab change before shifting focus\r\n     setTimeout(() => {\r\n       if (index === 1 && this.imageTabFocus) {\r\n         this.imageTabFocus.nativeElement.focus();\r\n       }\r\n-    }, 200);\r\n+    }, 200); // Delay ensures tab is visible before focusing\r\n   }\r\n \r\n+\r\n+\r\n+\r\n+  callPatch(){\r\n+   const data = {\r\n+    \"_id\": \"686dd61eda29c46f3c3d1c7d\",\r\n+    \"title\": \"Apple iPhone 15\",\r\n+    \"description\": \"About this item\\nDYNAMIC ISLAND COMES TO IPHONE 15  Dynamic Island bubbles up alerts and Live Activities  so you dont miss them while youre doing something else. You can see whos calling, track your next ride, check your flight status, and so much more.\\nINNOVATIVE DESIGN  iPhone 15 features a durable color-infused glass and aluminum design. Its splash, water, and dust resistant. The Ceramic Shield front is tougher than any smartphone glass. And the 6.1\\\" Super Retina XDR display is up to 2x brighter in the sun compared to iPhone 14.\\n48MP MAIN CAMERA WITH 2X TELEPHOTO  The 48MP Main camera shoots in super-high resolution. So its easier than ever to take standout photos with amazing detail. The 2x optical-quality Telephoto lets you frame the perfect close-up.\\nNEXT-GENERATION PORTRAITS  Capture portraits with dramatically more detail and color. Just tap to shift the focus between subjects  even after you take the shot.\\nPOWERHOUSE A16 BIONIC CHIP  The superfast chip powers advanced features like computational photography, fluid Dynamic Island transitions, and Voice Isolation for phone calls. And A16 Bionic is incredibly efficient to help deliver great all-day battery life.\",\r\n+    \"type\": \"electronics\",\r\n+    \"brand\": \"iphone\",\r\n+    \"collection\": [\r\n+        \"new products\"\r\n+    ],\r\n+    \"category\": \"electronics\",\r\n+    \"price\": 79600,\r\n+    \"sale\": true,\r\n+    \"discount\": \"27\",\r\n+    \"stock\": 10,\r\n+    \"new\": true,\r\n+    \"tags\": [\r\n+        \"s\",\r\n+        \"m\",\r\n+        \"pink\",\r\n+        \"blue\",\r\n\\ No newline at end of file\n+        \"biba\",\r\n+        \"iphone\"\r\n+    ],\r\n+    \"variants\": [\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Black\",\r\n+            \"image_id\": 111,\r\n+            \"_id\": \"686dd61eda29c46f3c3d1c7e\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-002\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Black\",\r\n+            \"image_id\": 112,\r\n+            \"_id\": \"686dd61eda29c46f3c3d1c7f\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Black\",\r\n+            \"image_id\": 113,\r\n+            \"_id\": \"686dd61eda29c46f3c3d1c80\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-002\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Green\",\r\n+            \"image_id\": 113,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c81\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-003\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Blue\",\r\n+            \"image_id\": 113,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c82\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-004\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Yellow\",\r\n+            \"image_id\": 113,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c83\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Pink\",\r\n+            \"image_id\": 113,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c84\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Blue\",\r\n+            \"image_id\": 114,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c85\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-002\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Green\",\r\n+            \"image_id\": 114,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c86\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-003\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Black\",\r\n+            \"image_id\": 114,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c87\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-004\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Yellow\",\r\n+            \"image_id\": 114,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c88\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Pink\",\r\n+            \"image_id\": 114,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c89\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Blue\",\r\n+            \"image_id\": 115,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c8a\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-002\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Green\",\r\n+            \"image_id\": 115,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c8b\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-003\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Black\",\r\n+            \"image_id\": 115,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c8c\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-004\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Yellow\",\r\n+            \"image_id\": 115,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c8d\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Pink\",\r\n+            \"image_id\": 115,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c8e\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Blue\",\r\n+            \"image_id\": 116,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c8f\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-002\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Green\",\r\n+            \"image_id\": 116,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c90\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-003\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Black\",\r\n+            \"image_id\": 116,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c91\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-004\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Yellow\",\r\n+            \"image_id\": 116,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c92\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Pink\",\r\n+            \"image_id\": 116,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c93\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Blue\",\r\n+            \"image_id\": 117,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c94\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Blue\",\r\n+            \"image_id\": 118,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c95\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Green\",\r\n+            \"image_id\": 119,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c96\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Green\",\r\n+            \"image_id\": 120,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c97\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Pink\",\r\n+            \"image_id\": 121,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c98\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Pink\",\r\n+            \"image_id\": 122,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c99\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Yellow\",\r\n+            \"image_id\": 123,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c9a\"\r\n+        },\r\n+        {\r\n+            \"sku\": \"SKU-001\",\r\n+            \"size\": \"0\",\r\n+            \"color\": \"Yellow\",\r\n+            \"image_id\": 124,\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c9b\"\r\n+        }\r\n+    ],\r\n+    \"images\": [\r\n+        {\r\n+            \"image_id\": 111,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_111.jpeg\",\r\n+            \"variant_id\": [\r\n+                101\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c9c\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 112,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_112.jpeg\",\r\n+            \"variant_id\": [\r\n+                102\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c9d\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 113,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_113.jpeg\",\r\n+            \"variant_id\": [\r\n+                103,\r\n+                104,\r\n+                105,\r\n+                106,\r\n+                107\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c9e\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 114,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_114.jpeg\",\r\n+            \"variant_id\": [\r\n+                108,\r\n+                109,\r\n+                110,\r\n+                111,\r\n+                112\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1c9f\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 115,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_115.jpeg\",\r\n+            \"variant_id\": [\r\n+                113,\r\n+                114,\r\n+                115,\r\n+                116,\r\n+                117\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca0\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 116,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_116.jpeg\",\r\n+            \"variant_id\": [\r\n+                118,\r\n+                119,\r\n+                120,\r\n+                121,\r\n+                122\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca1\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 117,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_117.jpeg\",\r\n+            \"variant_id\": [\r\n+                123\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca2\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 118,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_118.jpeg\",\r\n+            \"variant_id\": [\r\n+                124\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca3\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 119,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_119.jpeg\",\r\n+            \"variant_id\": [\r\n+                125\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca4\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 120,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_120.jpeg\",\r\n+            \"variant_id\": [\r\n+                126\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca5\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 121,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_121.jpeg\",\r\n+            \"variant_id\": [\r\n+                127\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca6\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 122,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_122.jpeg\",\r\n+            \"variant_id\": [\r\n+                128\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca7\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 123,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_123.jpeg\",\r\n+            \"variant_id\": [\r\n+                129\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca8\"\r\n+        },\r\n+        {\r\n+            \"image_id\": 124,\r\n+            \"alt\": \"image not found.\",\r\n+            \"src\": \"uploads/image_124.jpeg\",\r\n+            \"variant_id\": [\r\n+                130\r\n+            ],\r\n+            \"_id\": \"686dd61fda29c46f3c3d1ca9\"\r\n+        }\r\n+    ],\r\n+    \"__v\": 0\r\n+}\r\n+    this.patchFormData(data)\r\n+  }\r\n+\r\n+\r\n   patchFormData(product: any) {\r\n-    this.productForm.patchValue({\r\n-      title: product.title,\r\n-      description: product.description,\r\n-      type: product.type,\r\n-      brand: product.brand,\r\n-      collection: product.collection,\r\n-      category: product.category,\r\n-      price: product.price,\r\n-      discount: product.discount,\r\n-      stock: product.stock,\r\n-      newProduct: product.new,\r\n-    });\r\n+  this.productForm.patchValue({\r\n+    title: product.title,\r\n+    description: product.description,\r\n+    type: product.type,\r\n+    brand: product.brand,\r\n+    collection: product.collection,\r\n+    category: product.category,\r\n+    price: product.price,\r\n+    discount: product.discount,\r\n+    stock: product.stock,\r\n+    newProduct: product.new,\r\n+  });\r\n \r\n-    this.imagesDetails.clear();\r\n+  // Clear existing images\r\n+  this.imageDetails.clear();\r\n \r\n-    product.images.forEach((image: any) => {\r\n-      const variants = product.variants.filter((v: any) => v.image_id === image.image_id);\r\n+  // Loop through images and add with corresponding variants\r\n+  product.images.forEach((image:any) => {\r\n+    // Find all variants for this image_id\r\n+    const variants = product.variants.filter(\r\n+      (v:any) => v.image_id === image.image_id\r\n+    );\r\n \r\n-      const variantFGs = variants.map((variant: any) => this.fb.group({\r\n-        sku: [variant.sku, Validators.required],\r\n-        size: [variant.size, Validators.required],\r\n-        color: [variant.color, Validators.required],\r\n-      }));\r\n+    const variantFGs = variants.map((variant:any) => this.fb.group({\r\n+      sku: [variant.sku, Validators.required],\r\n+      size: [variant.size, Validators.required],\r\n+      color: [variant.color, Validators.required],\r\n+    }));\r\n \r\n-      const imageFG = this.fb.group({\r\n-        alt: [image.alt, Validators.required],\r\n-        src: ['http://localhost:3000/' + image.src, Validators.required],\r\n-        preview: ['http://localhost:3000/' + image.src],\r\n-        variantDetails: this.fb.array(variantFGs, Validators.required),\r\n-      });\r\n+    const imageFG = this.fb.group({\r\n+      alt: [image.alt, Validators.required],\r\n+      src: ['http://localhost:3000/'+image.src, Validators.required],\r\n+      'variant Details': this.fb.array(variantFGs, Validators.required)\r\n+    });\r\n \r\n-      this.imagesDetails.push(imageFG);\r\n-    });\r\n-  }\r\n-}\n+    this.imageDetails.push(imageFG);\r\n+  });\r\n+}\r\n+\r\n+}\r\n"
                },
                {
                    "date": 1753023488382,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,8 +35,9 @@\n import { MatCardModule } from '@angular/material/card';\r\n import { MatDividerModule } from '@angular/material/divider';\r\n import { MatTabsModule, MatTabGroup } from '@angular/material/tabs';\r\n import { ProductService } from '../../services/product.service';\r\n+import { ProductListComponent } from \"../product-list/product-list.component\";\r\n \r\n export interface Fruit {\r\n   name: string;\r\n }\r\n@@ -57,9 +58,10 @@\n     MatChipsModule,\r\n     MatAutocompleteModule,\r\n     MatSelectModule,\r\n     MatDividerModule,\r\n-  ],\r\n+    ProductListComponent\r\n+],\r\n   templateUrl: './add-product.component.html',\r\n   styleUrl: './add-product.component.scss',\r\n })\r\n export class AddProductComponent {\r\n@@ -146,9 +148,8 @@\n \r\n     this.addImage(); // Add initial image entry\r\n \r\n \r\n-    this.callPatch()\r\n   }\r\n \r\n   get imageDetails(): FormArray {\r\n     return this.productForm.get('images Details') as FormArray;\r\n@@ -265,394 +266,8 @@\n \r\n \r\n \r\n \r\n-  callPatch(){\r\n-   const data = {\r\n-    \"_id\": \"686dd61eda29c46f3c3d1c7d\",\r\n-    \"title\": \"Apple iPhone 15\",\r\n-    \"description\": \"About this item\\nDYNAMIC ISLAND COMES TO IPHONE 15  Dynamic Island bubbles up alerts and Live Activities  so you dont miss them while youre doing something else. You can see whos calling, track your next ride, check your flight status, and so much more.\\nINNOVATIVE DESIGN  iPhone 15 features a durable color-infused glass and aluminum design. Its splash, water, and dust resistant. The Ceramic Shield front is tougher than any smartphone glass. And the 6.1\\\" Super Retina XDR display is up to 2x brighter in the sun compared to iPhone 14.\\n48MP MAIN CAMERA WITH 2X TELEPHOTO  The 48MP Main camera shoots in super-high resolution. So its easier than ever to take standout photos with amazing detail. The 2x optical-quality Telephoto lets you frame the perfect close-up.\\nNEXT-GENERATION PORTRAITS  Capture portraits with dramatically more detail and color. Just tap to shift the focus between subjects  even after you take the shot.\\nPOWERHOUSE A16 BIONIC CHIP  The superfast chip powers advanced features like computational photography, fluid Dynamic Island transitions, and Voice Isolation for phone calls. And A16 Bionic is incredibly efficient to help deliver great all-day battery life.\",\r\n-    \"type\": \"electronics\",\r\n-    \"brand\": \"iphone\",\r\n-    \"collection\": [\r\n-        \"new products\"\r\n-    ],\r\n-    \"category\": \"electronics\",\r\n-    \"price\": 79600,\r\n-    \"sale\": true,\r\n-    \"discount\": \"27\",\r\n-    \"stock\": 10,\r\n-    \"new\": true,\r\n-    \"tags\": [\r\n-        \"s\",\r\n-        \"m\",\r\n-        \"pink\",\r\n-        \"blue\",\r\n-        \"biba\",\r\n-        \"iphone\"\r\n-    ],\r\n-    \"variants\": [\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Black\",\r\n-            \"image_id\": 111,\r\n-            \"_id\": \"686dd61eda29c46f3c3d1c7e\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-002\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Black\",\r\n-            \"image_id\": 112,\r\n-            \"_id\": \"686dd61eda29c46f3c3d1c7f\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Black\",\r\n-            \"image_id\": 113,\r\n-            \"_id\": \"686dd61eda29c46f3c3d1c80\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-002\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Green\",\r\n-            \"image_id\": 113,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c81\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-003\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Blue\",\r\n-            \"image_id\": 113,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c82\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-004\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Yellow\",\r\n-            \"image_id\": 113,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c83\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Pink\",\r\n-            \"image_id\": 113,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c84\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Blue\",\r\n-            \"image_id\": 114,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c85\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-002\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Green\",\r\n-            \"image_id\": 114,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c86\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-003\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Black\",\r\n-            \"image_id\": 114,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c87\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-004\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Yellow\",\r\n-            \"image_id\": 114,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c88\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Pink\",\r\n-            \"image_id\": 114,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c89\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Blue\",\r\n-            \"image_id\": 115,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c8a\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-002\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Green\",\r\n-            \"image_id\": 115,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c8b\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-003\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Black\",\r\n-            \"image_id\": 115,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c8c\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-004\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Yellow\",\r\n-            \"image_id\": 115,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c8d\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Pink\",\r\n-            \"image_id\": 115,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c8e\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Blue\",\r\n-            \"image_id\": 116,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c8f\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-002\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Green\",\r\n-            \"image_id\": 116,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c90\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-003\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Black\",\r\n-            \"image_id\": 116,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c91\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-004\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Yellow\",\r\n-            \"image_id\": 116,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c92\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Pink\",\r\n-            \"image_id\": 116,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c93\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Blue\",\r\n-            \"image_id\": 117,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c94\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Blue\",\r\n-            \"image_id\": 118,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c95\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Green\",\r\n-            \"image_id\": 119,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c96\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Green\",\r\n-            \"image_id\": 120,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c97\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Pink\",\r\n-            \"image_id\": 121,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c98\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Pink\",\r\n-            \"image_id\": 122,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c99\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Yellow\",\r\n-            \"image_id\": 123,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c9a\"\r\n-        },\r\n-        {\r\n-            \"sku\": \"SKU-001\",\r\n-            \"size\": \"0\",\r\n-            \"color\": \"Yellow\",\r\n-            \"image_id\": 124,\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c9b\"\r\n-        }\r\n-    ],\r\n-    \"images\": [\r\n-        {\r\n-            \"image_id\": 111,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_111.jpeg\",\r\n-            \"variant_id\": [\r\n-                101\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c9c\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 112,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_112.jpeg\",\r\n-            \"variant_id\": [\r\n-                102\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c9d\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 113,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_113.jpeg\",\r\n-            \"variant_id\": [\r\n-                103,\r\n-                104,\r\n-                105,\r\n-                106,\r\n-                107\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c9e\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 114,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_114.jpeg\",\r\n-            \"variant_id\": [\r\n-                108,\r\n-                109,\r\n-                110,\r\n-                111,\r\n-                112\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1c9f\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 115,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_115.jpeg\",\r\n-            \"variant_id\": [\r\n-                113,\r\n-                114,\r\n-                115,\r\n-                116,\r\n-                117\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca0\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 116,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_116.jpeg\",\r\n-            \"variant_id\": [\r\n-                118,\r\n-                119,\r\n-                120,\r\n-                121,\r\n-                122\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca1\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 117,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_117.jpeg\",\r\n-            \"variant_id\": [\r\n-                123\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca2\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 118,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_118.jpeg\",\r\n-            \"variant_id\": [\r\n-                124\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca3\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 119,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_119.jpeg\",\r\n-            \"variant_id\": [\r\n-                125\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca4\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 120,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_120.jpeg\",\r\n-            \"variant_id\": [\r\n-                126\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca5\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 121,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_121.jpeg\",\r\n-            \"variant_id\": [\r\n-                127\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca6\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 122,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_122.jpeg\",\r\n-            \"variant_id\": [\r\n-                128\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca7\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 123,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_123.jpeg\",\r\n-            \"variant_id\": [\r\n-                129\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca8\"\r\n-        },\r\n-        {\r\n-            \"image_id\": 124,\r\n-            \"alt\": \"image not found.\",\r\n-            \"src\": \"uploads/image_124.jpeg\",\r\n-            \"variant_id\": [\r\n-                130\r\n-            ],\r\n-            \"_id\": \"686dd61fda29c46f3c3d1ca9\"\r\n-        }\r\n-    ],\r\n-    \"__v\": 0\r\n-}\r\n-    this.patchFormData(data)\r\n-  }\r\n-\r\n-\r\n   patchFormData(product: any) {\r\n   this.productForm.patchValue({\r\n     title: product.title,\r\n     description: product.description,\r\n@@ -691,5 +306,5 @@\n     this.imageDetails.push(imageFG);\r\n   });\r\n }\r\n \r\n-}\n\\ No newline at end of file\n+}\r\n"
                },
                {
                    "date": 1753023528344,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -266,9 +266,9 @@\n \r\n \r\n \r\n \r\n-  patchFormData(product: any) {\r\n+patchFormData(product: any) {\r\n   this.productForm.patchValue({\r\n     title: product.title,\r\n     description: product.description,\r\n     type: product.type,\r\n@@ -280,31 +280,34 @@\n     stock: product.stock,\r\n     newProduct: product.new,\r\n   });\r\n \r\n-  // Clear existing images\r\n+  // Clear existing image form array\r\n   this.imageDetails.clear();\r\n \r\n-  // Loop through images and add with corresponding variants\r\n-  product.images.forEach((image:any) => {\r\n-    // Find all variants for this image_id\r\n+  // Loop through images and attach variants\r\n+  product.images.forEach((image: any) => {\r\n     const variants = product.variants.filter(\r\n-      (v:any) => v.image_id === image.image_id\r\n+      (variant: any) => variant.image_id === image.image_id\r\n     );\r\n \r\n-    const variantFGs = variants.map((variant:any) => this.fb.group({\r\n-      sku: [variant.sku, Validators.required],\r\n-      size: [variant.size, Validators.required],\r\n-      color: [variant.color, Validators.required],\r\n-    }));\r\n+    const variantFormGroups = variants.map((variant: any) =>\r\n+      this.fb.group({\r\n+        sku: [variant.sku, Validators.required],\r\n+        size: [variant.size, Validators.required],\r\n+        color: [variant.color, Validators.required],\r\n+      })\r\n+    );\r\n \r\n-    const imageFG = this.fb.group({\r\n+    const imageFormGroup = this.fb.group({\r\n       alt: [image.alt, Validators.required],\r\n-      src: ['http://localhost:3000/'+image.src, Validators.required],\r\n-      'variant Details': this.fb.array(variantFGs, Validators.required)\r\n+      src: [`http://localhost:3000/${image.src}`, Validators.required],\r\n+      preview: [`http://localhost:3000/${image.src}`],\r\n+      variantDetails: this.fb.array(variantFormGroups, Validators.required),\r\n     });\r\n \r\n-    this.imageDetails.push(imageFG);\r\n+    this.imageDetails.push(imageFormGroup);\r\n   });\r\n }\r\n \r\n+\r\n }\r\n"
                },
                {
                    "date": 1753023713360,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -301,13 +301,14 @@\n     const imageFormGroup = this.fb.group({\r\n       alt: [image.alt, Validators.required],\r\n       src: [`http://localhost:3000/${image.src}`, Validators.required],\r\n       preview: [`http://localhost:3000/${image.src}`],\r\n-      variantDetails: this.fb.array(variantFormGroups, Validators.required),\r\n+      'variant Details': this.fb.array(variantFormGroups, Validators.required), //  match form key name\r\n     });\r\n \r\n     this.imageDetails.push(imageFormGroup);\r\n   });\r\n }\r\n \r\n \r\n+\r\n }\r\n"
                },
                {
                    "date": 1753023807666,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,8 +65,10 @@\n   styleUrl: './add-product.component.scss',\r\n })\r\n export class AddProductComponent {\r\n   productForm: FormGroup;\r\n+  productIdToUpdate: string | null = null;\r\n+\r\n   @ViewChild('tabGroup') tabGroup!: MatTabGroup;\r\n   @ViewChild('imageTabFocus', { static: false }) imageTabFocus!: ElementRef;\r\n   imageUrl: any[] = [\r\n     '../../../assts/add-img.webp',\r\n@@ -267,8 +269,10 @@\n \r\n \r\n \r\n patchFormData(product: any) {\r\n+  this.productIdToUpdate = product._id; // Set ID for update\r\n+\r\n   this.productForm.patchValue({\r\n     title: product.title,\r\n     description: product.description,\r\n     type: product.type,\r\n@@ -280,12 +284,10 @@\n     stock: product.stock,\r\n     newProduct: product.new,\r\n   });\r\n \r\n-  // Clear existing image form array\r\n   this.imageDetails.clear();\r\n \r\n-  // Loop through images and attach variants\r\n   product.images.forEach((image: any) => {\r\n     const variants = product.variants.filter(\r\n       (variant: any) => variant.image_id === image.image_id\r\n     );\r\n@@ -301,14 +303,15 @@\n     const imageFormGroup = this.fb.group({\r\n       alt: [image.alt, Validators.required],\r\n       src: [`http://localhost:3000/${image.src}`, Validators.required],\r\n       preview: [`http://localhost:3000/${image.src}`],\r\n-      'variant Details': this.fb.array(variantFormGroups, Validators.required), //  match form key name\r\n+      'variant Details': this.fb.array(variantFormGroups, Validators.required),\r\n     });\r\n \r\n     this.imageDetails.push(imageFormGroup);\r\n   });\r\n }\r\n \r\n \r\n \r\n+\r\n }\r\n"
                },
                {
                    "date": 1753023823605,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -213,22 +213,68 @@\n       reader.onerror = (error) => reject(error);\r\n     });\r\n   }\r\n \r\n+  // Submit() {\r\n+  //   if (this.productForm.valid) {\r\n+  //     const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n+\r\n+  //     // Clean preview fields if present\r\n+  //     formData['images Details'].forEach((img: any) => {\r\n+  //       delete img.preview;\r\n+  //     });\r\n+\r\n+  //     // Static values\r\n+  //     formData.sale = true;\r\n+  //     formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n+\r\n+  //     // Call service\r\n+  //     this.productService.createProduct(formData).subscribe({\r\n+  //       next: (res) => {\r\n+  //         console.log(' Product created:', res);\r\n+  //         alert('Product created successfully!');\r\n+  //         this.productForm.reset();\r\n+  //       },\r\n+  //       error: (err) => {\r\n+  //         console.error(' Error creating product:', err);\r\n+  //         alert('Failed to create product.');\r\n+  //       },\r\n+  //     });\r\n+  //   } else {\r\n+  //     this.markFormGroupTouched(this.productForm);\r\n+  //     console.warn(' Form Invalid');\r\n+  //   }\r\n+  // }\r\n+\r\n+\r\n   Submit() {\r\n-    if (this.productForm.valid) {\r\n-      const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n+  if (this.productForm.valid) {\r\n+    const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n \r\n-      // Clean preview fields if present\r\n-      formData['images Details'].forEach((img: any) => {\r\n-        delete img.preview;\r\n-      });\r\n+    // Clean up previews\r\n+    formData['images Details'].forEach((img: any) => {\r\n+      delete img.preview;\r\n+    });\r\n \r\n-      // Static values\r\n-      formData.sale = true;\r\n-      formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n+    formData.sale = true;\r\n+    formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n \r\n-      // Call service\r\n+    if (this.productIdToUpdate) {\r\n+      //  Update\r\n+      this.productService.updateProduct(this.productIdToUpdate, formData).subscribe({\r\n+        next: (res) => {\r\n+          console.log(' Product updated:', res);\r\n+          alert('Product updated successfully!');\r\n+          this.productForm.reset();\r\n+          this.productIdToUpdate = null; // Reset after update\r\n+        },\r\n+        error: (err) => {\r\n+          console.error(' Error updating product:', err);\r\n+          alert('Failed to update product.');\r\n+        },\r\n+      });\r\n+    } else {\r\n+      //  Create\r\n       this.productService.createProduct(formData).subscribe({\r\n         next: (res) => {\r\n           console.log(' Product created:', res);\r\n           alert('Product created successfully!');\r\n@@ -238,14 +284,16 @@\n           console.error(' Error creating product:', err);\r\n           alert('Failed to create product.');\r\n         },\r\n       });\r\n-    } else {\r\n-      this.markFormGroupTouched(this.productForm);\r\n-      console.warn(' Form Invalid');\r\n     }\r\n+  } else {\r\n+    this.markFormGroupTouched(this.productForm);\r\n+    console.warn(' Form Invalid');\r\n   }\r\n+}\r\n \r\n+\r\n   markFormGroupTouched(formGroup: FormGroup | FormArray) {\r\n     (Object as any).values(formGroup.controls).forEach((control: any) => {\r\n       if (control.controls) {\r\n         this.markFormGroupTouched(control); // recurse\r\n"
                },
                {
                    "date": 1753024989796,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -245,15 +245,67 @@\n   //   }\r\n   // }\r\n \r\n \r\n-  Submit() {\r\n+//   Submit() {\r\n+//   if (this.productForm.valid) {\r\n+//     const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n+\r\n+//     // Clean up previews\r\n+//     formData['images Details'].forEach((img: any) => {\r\n+//       delete img.preview;\r\n+//     });\r\n+\r\n+//     formData.sale = true;\r\n+//     formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n+\r\n+//     if (this.productIdToUpdate) {\r\n+//       //  Update\r\n+//       this.productService.updateProduct(this.productIdToUpdate, formData).subscribe({\r\n+//         next: (res) => {\r\n+//           console.log(' Product updated:', res);\r\n+//           alert('Product updated successfully!');\r\n+//           this.productForm.reset();\r\n+//           this.productIdToUpdate = null; // Reset after update\r\n+//         },\r\n+//         error: (err) => {\r\n+//           console.error(' Error updating product:', err);\r\n+//           alert('Failed to update product.');\r\n+//         },\r\n+//       });\r\n+//     } else {\r\n+//       //  Create\r\n+//       this.productService.createProduct(formData).subscribe({\r\n+//         next: (res) => {\r\n+//           console.log(' Product created:', res);\r\n+//           alert('Product created successfully!');\r\n+//           this.productForm.reset();\r\n+//         },\r\n+//         error: (err) => {\r\n+//           console.error(' Error creating product:', err);\r\n+//           alert('Failed to create product.');\r\n+//         },\r\n+//       });\r\n+//     }\r\n+//   } else {\r\n+//     this.markFormGroupTouched(this.productForm);\r\n+//     console.warn(' Form Invalid');\r\n+//   }\r\n+// }\r\n+\r\n+\r\n+Submit() {\r\n   if (this.productForm.valid) {\r\n     const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n \r\n-    // Clean up previews\r\n     formData['images Details'].forEach((img: any) => {\r\n+      // Remove preview key if present\r\n       delete img.preview;\r\n+\r\n+      //  Normalize `src` to relative path if it's a full URL\r\n+      if (img.src && typeof img.src === 'string' && img.src.startsWith('http://localhost:3000/')) {\r\n+        img.src = img.src.replace(/^http:\\/\\/localhost:3000\\//, '');\r\n+      }\r\n     });\r\n \r\n     formData.sale = true;\r\n     formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n@@ -264,9 +316,9 @@\n         next: (res) => {\r\n           console.log(' Product updated:', res);\r\n           alert('Product updated successfully!');\r\n           this.productForm.reset();\r\n-          this.productIdToUpdate = null; // Reset after update\r\n+          this.productIdToUpdate = null;\r\n         },\r\n         error: (err) => {\r\n           console.error(' Error updating product:', err);\r\n           alert('Failed to update product.');\r\n@@ -292,8 +344,9 @@\n   }\r\n }\r\n \r\n \r\n+\r\n   markFormGroupTouched(formGroup: FormGroup | FormArray) {\r\n     (Object as any).values(formGroup.controls).forEach((control: any) => {\r\n       if (control.controls) {\r\n         this.markFormGroupTouched(control); // recurse\r\n"
                },
                {
                    "date": 1753067882473,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -66,9 +66,9 @@\n })\r\n export class AddProductComponent {\r\n   productForm: FormGroup;\r\n   productIdToUpdate: string | null = null;\r\n-\r\n+  checker:any\r\n   @ViewChild('tabGroup') tabGroup!: MatTabGroup;\r\n   @ViewChild('imageTabFocus', { static: false }) imageTabFocus!: ElementRef;\r\n   imageUrl: any[] = [\r\n     '../../../assts/add-img.webp',\r\n"
                },
                {
                    "date": 1753067962621,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -294,8 +294,9 @@\n \r\n \r\n Submit() {\r\n   if (this.productForm.valid) {\r\n+    this.checker = 'valid'\r\n     const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n \r\n     formData['images Details'].forEach((img: any) => {\r\n       // Remove preview key if present\r\n"
                },
                {
                    "date": 1753067991719,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -318,8 +318,9 @@\n           console.log(' Product updated:', res);\r\n           alert('Product updated successfully!');\r\n           this.productForm.reset();\r\n           this.productIdToUpdate = null;\r\n+          this.checker = 'submitted'; // Reset checker\r\n         },\r\n         error: (err) => {\r\n           console.error(' Error updating product:', err);\r\n           alert('Failed to update product.');\r\n"
                },
                {
                    "date": 1753068000574,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -332,8 +332,9 @@\n         next: (res) => {\r\n           console.log(' Product created:', res);\r\n           alert('Product created successfully!');\r\n           this.productForm.reset();\r\n+           this.checker = 'submitted'; // Reset checker\r\n         },\r\n         error: (err) => {\r\n           console.error(' Error creating product:', err);\r\n           alert('Failed to create product.');\r\n"
                },
                {
                    "date": 1753068307966,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -293,8 +293,9 @@\n // }\r\n \r\n \r\n Submit() {\r\n+  console.log('Form Submitted:', this.productForm.value);\r\n   if (this.productForm.valid) {\r\n     this.checker = 'valid'\r\n     const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n \r\n"
                },
                {
                    "date": 1754503532006,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -67,10 +67,15 @@\n export class AddProductComponent {\r\n   productForm: FormGroup;\r\n   productIdToUpdate: string | null = null;\r\n   checker:any\r\n+  // @ViewChild('tabGroup') tabGroup!: MatTabGroup;\r\n+  @ViewChild('imageTabFocus', { static: false }) imageTabFocus!: ElementRef;\r\n   @ViewChild('tabGroup') tabGroup!: MatTabGroup;\r\n-  @ViewChild('imageTabFocus', { static: false }) imageTabFocus!: ElementRef;\r\n+\r\n+\r\n+\r\n+\r\n   imageUrl: any[] = [\r\n     '../../../assts/add-img.webp',\r\n     '../../../assts/add-img.webp',\r\n     '../../../assts/add-img.webp',\r\n@@ -95,8 +100,9 @@\n \r\n   brandArray = [\r\n     { key: 'Nike', value: 'nike' },\r\n     {key:'Iphone', value: 'iphone'},\r\n+    { key: 'samsung', value: 'samsung' },\r\n     { key: 'Zara', value: 'zara' },\r\n     { key: 'Denim', value: 'denim' },\r\n     { key: 'Madame', value: 'madame' },\r\n     { key: 'Biba', value: 'biba' },\r\n@@ -359,22 +365,18 @@\n       }\r\n     });\r\n   }\r\n \r\n-  goToTab(index: number) {\r\n-    this.tabGroup.selectedIndex = index;\r\n+goToTab(index: number): void {\r\n \r\n-    // Allow time for tab change before shifting focus\r\n-    setTimeout(() => {\r\n-      if (index === 1 && this.imageTabFocus) {\r\n-        this.imageTabFocus.nativeElement.focus();\r\n-      }\r\n-    }, 200); // Delay ensures tab is visible before focusing\r\n-  }\r\n+  this.tabGroup.selectedIndex = index;\r\n \r\n+  console.log('Tab changed to index:', this.tabGroup.selectedIndex);\r\n+}\r\n \r\n \r\n \r\n+\r\n patchFormData(product: any) {\r\n   this.productIdToUpdate = product._id; // Set ID for update\r\n \r\n   this.productForm.patchValue({\r\n"
                },
                {
                    "date": 1755348099126,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -118,8 +118,9 @@\n     { key: 'Trending product', value: 'trending product' },\r\n   ];\r\n \r\n   categoryArray = [\r\n+    { key: 'Homemade Products', value: 'Homemade Products' },\r\n     { key: 'Fashion', value: 'Women' },\r\n     { key: 'Shoes', value: 'shoes' },\r\n     { key: 'Bags', value: 'bags' },\r\n     { key: 'Watch', value: 'watch' },\r\n"
                },
                {
                    "date": 1755348109443,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -82,8 +82,9 @@\n     '../../../assts/add-img.webp',\r\n   ];\r\n \r\n   typeArray = [\r\n+    { key: 'Homemade Products', value: 'Homemade Products' },\r\n     { key: 'Fashion', value: 'fashion' },\r\n     { key: 'Shoes', value: 'shoes' },\r\n     { key: 'Bags', value: 'bags' },\r\n     { key: 'Watch', value: 'watch' },\r\n"
                },
                {
                    "date": 1755348313090,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -99,8 +99,9 @@\n     { key: 'Marijuana', value: 'marijuana' },\r\n   ];\r\n \r\n   brandArray = [\r\n+    { key: 'Dreamy Craft', value: 'Dreamy Craft' },\r\n     { key: 'Nike', value: 'nike' },\r\n     {key:'Iphone', value: 'iphone'},\r\n     { key: 'samsung', value: 'samsung' },\r\n     { key: 'Zara', value: 'zara' },\r\n"
                },
                {
                    "date": 1761019476138,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,431 @@\n+import {\r\n+  ChangeDetectorRef,\r\n+  Component,\r\n+  ElementRef,\r\n+  inject,\r\n+  signal,\r\n+  ViewChild,\r\n+} from '@angular/core';\r\n+import { MatSelectModule } from '@angular/material/select';\r\n+import { MatInputModule } from '@angular/material/input';\r\n+import { MatFormFieldModule } from '@angular/material/form-field';\r\n+import { MatIconModule } from '@angular/material/icon';\r\n+import { NgFor, NgIf } from '@angular/common';\r\n+import { MatExpansionModule } from '@angular/material/expansion';\r\n+import {\r\n+  FormArray,\r\n+  FormBuilder,\r\n+  FormControl,\r\n+  FormGroup,\r\n+  ReactiveFormsModule,\r\n+  Validators,\r\n+} from '@angular/forms';\r\n+import {\r\n+  MatChipEditedEvent,\r\n+  MatChipInputEvent,\r\n+  MatChipsModule,\r\n+} from '@angular/material/chips';\r\n+import { COMMA, ENTER } from '@angular/cdk/keycodes';\r\n+import { LiveAnnouncer } from '@angular/cdk/a11y';\r\n+import { Observable } from 'rxjs';\r\n+import { map, startWith } from 'rxjs/operators';\r\n+import { AsyncPipe } from '@angular/common';\r\n+import { MatAutocompleteModule } from '@angular/material/autocomplete';\r\n+import { MatButtonModule } from '@angular/material/button';\r\n+import { MatCardModule } from '@angular/material/card';\r\n+import { MatDividerModule } from '@angular/material/divider';\r\n+import { MatTabsModule, MatTabGroup } from '@angular/material/tabs';\r\n+import { ProductService } from '../../services/product.service';\r\n+import { ProductListComponent } from \"../product-list/product-list.component\";\r\n+\r\n+export interface Fruit {\r\n+  name: string;\r\n+}\r\n+@Component({\r\n+  selector: 'app-add-product',\r\n+  standalone: true,\r\n+  imports: [\r\n+    ReactiveFormsModule,\r\n+    NgFor,\r\n+    NgIf,\r\n+    MatTabsModule,\r\n+    MatCardModule,\r\n+    MatIconModule,\r\n+    MatFormFieldModule,\r\n+    MatInputModule,\r\n+    MatButtonModule,\r\n+    MatExpansionModule,\r\n+    MatChipsModule,\r\n+    MatAutocompleteModule,\r\n+    MatSelectModule,\r\n+    MatDividerModule,\r\n+    ProductListComponent\r\n+],\r\n+  templateUrl: './add-product.component.html',\r\n+  styleUrl: './add-product.component.scss',\r\n+})\r\n+export class AddProductComponent {\r\n+  productForm: FormGroup;\r\n+  productIdToUpdate: string | null = null;\r\n+  checker:any\r\n+  // @ViewChild('tabGroup') tabGroup!: MatTabGroup;\r\n+  @ViewChild('imageTabFocus', { static: false }) imageTabFocus!: ElementRef;\r\n+  @ViewChild('tabGroup') tabGroup!: MatTabGroup;\r\n+\r\n+\r\n+\r\n+\r\n+  imageUrl: any[] = [\r\n+    '../../../assts/add-img.webp',\r\n+    '../../../assts/add-img.webp',\r\n+    '../../../assts/add-img.webp',\r\n+    '../../../assts/add-img.webp',\r\n+  ];\r\n+\r\n+  typeArray = [\r\n+    { key: 'Homemade Products', value: 'Homemade Products' },\r\n+    { key: 'Fashion', value: 'fashion' },\r\n+    { key: 'Shoes', value: 'shoes' },\r\n+    { key: 'Bags', value: 'bags' },\r\n+    { key: 'Watch', value: 'watch' },\r\n+    { key: 'Flower', value: 'flower' },\r\n+    { key: 'Pets', value: 'pets' },\r\n+    { key: 'Electronics', value: 'electronics' },\r\n+    { key: 'Vegetables', value: 'vegetables' },\r\n+    { key: 'Furniture', value: 'furniture' },\r\n+    { key: 'Beauty', value: 'beauty' },\r\n+    { key: 'Tools', value: 'tools' },\r\n+    { key: 'Gym', value: 'gym' },\r\n+    { key: 'Marijuana', value: 'marijuana' },\r\n+  ];\r\n+\r\n+  brandArray = [\r\n+    { key: 'Dreamy Craft', value: 'Dreamy Craft' },\r\n+    { key: 'Nike', value: 'nike' },\r\n+    {key:'Iphone', value: 'iphone'},\r\n+    { key: 'samsung', value: 'samsung' },\r\n+    { key: 'Zara', value: 'zara' },\r\n+    { key: 'Denim', value: 'denim' },\r\n+    { key: 'Madame', value: 'madame' },\r\n+    { key: 'Biba', value: 'biba' },\r\n+    { key: 'Max', value: 'max' },\r\n+  ];\r\n+\r\n+  collectionArray = [\r\n+    { key: 'New products', value: 'new products' },\r\n+    { key: 'Best sellers', value: 'best sellers' },\r\n+    { key: 'Featured products', value: 'featured products' },\r\n+    { key: 'On sale', value: 'on sale' },\r\n+    { key: 'New arrival', value: 'new arrival' },\r\n+    { key: 'Trending product', value: 'trending product' },\r\n+  ];\r\n+\r\n+  categoryArray = [\r\n+    { key: 'Homemade Products', value: 'Homemade Products' },\r\n+    { key: 'Fashion', value: 'Women' },\r\n+    { key: 'Shoes', value: 'shoes' },\r\n+    { key: 'Bags', value: 'bags' },\r\n+    { key: 'Watch', value: 'watch' },\r\n+    { key: 'Flower', value: 'flower' },\r\n+    { key: 'Pets', value: 'pets' },\r\n+    { key: 'Electronics', value: 'electronics' },\r\n+    { key: 'Vegetables', value: 'vegetables' },\r\n+    { key: 'Furniture', value: 'furniture' },\r\n+    { key: 'Beauty', value: 'beauty' },\r\n+    { key: 'Tools', value: 'tools' },\r\n+    { key: 'Gym', value: 'gym' },\r\n+    { key: 'Marijuana', value: 'marijuana' },\r\n+  ];\r\n+skuOptions: string[] = ['SKU-001', 'SKU-002', 'SKU-003', 'SKU-004'];\r\n+  options: string[] = ['s', 'm', 'l', 'xl', 'xxl'];\r\n+  colors: string[] = ['yellow', 'white', 'pink', 'olive', 'navy', 'red'];\r\n+sizeOptions: string[] = ['XS', 'S', 'M', 'L', 'XL'];\r\n+colorOptions: string[] = ['Red', 'Blue', 'Green', 'Black', 'White', 'Yellow', 'Pink'];\r\n+\r\n+  constructor(private fb: FormBuilder, private productService: ProductService) {\r\n+    this.productForm = this.fb.group({\r\n+      title: ['', Validators.required],\r\n+      description: ['', Validators.required],\r\n+      type: ['', Validators.required],\r\n+      brand: ['', Validators.required],\r\n+      collection: [[], Validators.required],\r\n+      category: ['', Validators.required],\r\n+      price: ['', Validators.required],\r\n+      discount: ['', Validators.required],\r\n+      stock: ['', Validators.required],\r\n+      newProduct: [false, Validators.requiredTrue],\r\n+      'images Details': this.fb.array([], Validators.required),\r\n+        length: [0],\r\n+  breadth: [0],\r\n+  height: [0],\r\n+  weight: [0]\r\n+    });\r\n+\r\n+    this.addImage(); // Add initial image entry\r\n+\r\n+\r\n+  }\r\n+\r\n+  get imageDetails(): FormArray {\r\n+    return this.productForm.get('images Details') as FormArray;\r\n+  }\r\n+\r\n+  newImage(): FormGroup {\r\n+    return this.fb.group({\r\n+      alt: ['image not found.', Validators.required],\r\n+      src: ['', Validators.required], // base64 string\r\n+      'variant Details': this.fb.array(\r\n+        [this.newVariant()],\r\n+        Validators.required\r\n+      ),\r\n+    });\r\n+  }\r\n+\r\n+  newVariant(): FormGroup {\r\n+    return this.fb.group({\r\n+      sku: ['', Validators.required],\r\n+      size: ['0', Validators.required],\r\n+      color: ['', Validators.required],\r\n+    });\r\n+  }\r\n+\r\n+  addImage() {\r\n+    this.imageDetails.push(this.newImage());\r\n+  }\r\n+\r\n+  removeImage(index: number) {\r\n+    this.imageDetails.removeAt(index);\r\n+  }\r\n+\r\n+  getVariants(imageIndex: number): FormArray {\r\n+    return this.imageDetails.at(imageIndex).get('variant Details') as FormArray;\r\n+  }\r\n+\r\n+  addVariant(imageIndex: number) {\r\n+    this.getVariants(imageIndex).push(this.newVariant());\r\n+  }\r\n+\r\n+  removeVariant(imageIndex: number, variantIndex: number) {\r\n+    this.getVariants(imageIndex).removeAt(variantIndex);\r\n+  }\r\n+\r\n+  async onFileChange(event: any, imageIndex: number) {\r\n+    const file = event.target.files[0];\r\n+    if (file) {\r\n+      const base64 = await this.convertToBase64(file);\r\n+      const group = this.imageDetails.at(imageIndex);\r\n+      group.patchValue({ src: base64, preview: base64 });\r\n+    }\r\n+  }\r\n+\r\n+  convertToBase64(file: File): Promise<string> {\r\n+    return new Promise((resolve, reject) => {\r\n+      const reader = new FileReader();\r\n+      reader.readAsDataURL(file);\r\n+      reader.onload = () => resolve(reader.result as string);\r\n+      reader.onerror = (error) => reject(error);\r\n+    });\r\n+  }\r\n+\r\n+  // Submit() {\r\n+  //   if (this.productForm.valid) {\r\n+  //     const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n+\r\n+  //     // Clean preview fields if present\r\n+  //     formData['images Details'].forEach((img: any) => {\r\n+  //       delete img.preview;\r\n+  //     });\r\n+\r\n+  //     // Static values\r\n+  //     formData.sale = true;\r\n+  //     formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n+\r\n+  //     // Call service\r\n+  //     this.productService.createProduct(formData).subscribe({\r\n+  //       next: (res) => {\r\n+  //         console.log(' Product created:', res);\r\n+  //         alert('Product created successfully!');\r\n+  //         this.productForm.reset();\r\n+  //       },\r\n+  //       error: (err) => {\r\n+  //         console.error(' Error creating product:', err);\r\n+  //         alert('Failed to create product.');\r\n+  //       },\r\n+  //     });\r\n+  //   } else {\r\n+  //     this.markFormGroupTouched(this.productForm);\r\n+  //     console.warn(' Form Invalid');\r\n+  //   }\r\n+  // }\r\n+\r\n+\r\n+//   Submit() {\r\n+//   if (this.productForm.valid) {\r\n+//     const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n+\r\n+//     // Clean up previews\r\n+//     formData['images Details'].forEach((img: any) => {\r\n+//       delete img.preview;\r\n+//     });\r\n+\r\n+//     formData.sale = true;\r\n+//     formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n+\r\n+//     if (this.productIdToUpdate) {\r\n+//       //  Update\r\n+//       this.productService.updateProduct(this.productIdToUpdate, formData).subscribe({\r\n+//         next: (res) => {\r\n+//           console.log(' Product updated:', res);\r\n+//           alert('Product updated successfully!');\r\n+//           this.productForm.reset();\r\n+//           this.productIdToUpdate = null; // Reset after update\r\n+//         },\r\n+//         error: (err) => {\r\n+//           console.error(' Error updating product:', err);\r\n+//           alert('Failed to update product.');\r\n+//         },\r\n+//       });\r\n+//     } else {\r\n+//       //  Create\r\n+//       this.productService.createProduct(formData).subscribe({\r\n+//         next: (res) => {\r\n+//           console.log(' Product created:', res);\r\n+//           alert('Product created successfully!');\r\n+//           this.productForm.reset();\r\n+//         },\r\n+//         error: (err) => {\r\n+//           console.error(' Error creating product:', err);\r\n+//           alert('Failed to create product.');\r\n+//         },\r\n+//       });\r\n+//     }\r\n+//   } else {\r\n+//     this.markFormGroupTouched(this.productForm);\r\n+//     console.warn(' Form Invalid');\r\n+//   }\r\n+// }\r\n+\r\n+\r\n+Submit() {\r\n+  console.log('Form Submitted:', this.productForm.value);\r\n+  if (this.productForm.valid) {\r\n+    this.checker = 'valid'\r\n+    const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n+\r\n+    formData['images Details'].forEach((img: any) => {\r\n+      // Remove preview key if present\r\n+      delete img.preview;\r\n+\r\n+      //  Normalize `src` to relative path if it's a full URL\r\n+      if (img.src && typeof img.src === 'string' && img.src.startsWith('http://localhost:3000/')) {\r\n+        img.src = img.src.replace(/^http:\\/\\/localhost:3000\\//, '');\r\n+      }\r\n+    });\r\n+\r\n+    formData.sale = true;\r\n+    formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n+\r\n+    if (this.productIdToUpdate) {\r\n+      //  Update\r\n+      this.productService.updateProduct(this.productIdToUpdate, formData).subscribe({\r\n+        next: (res) => {\r\n+          console.log(' Product updated:', res);\r\n+          alert('Product updated successfully!');\r\n+          this.productForm.reset();\r\n+          this.productIdToUpdate = null;\r\n+          this.checker = 'submitted'; // Reset checker\r\n+        },\r\n+        error: (err) => {\r\n+          console.error(' Error updating product:', err);\r\n+          alert('Failed to update product.');\r\n+        },\r\n+      });\r\n+    } else {\r\n+      //  Create\r\n+      this.productService.createProduct(formData).subscribe({\r\n+        next: (res) => {\r\n+          console.log(' Product created:', res);\r\n+          alert('Product created successfully!');\r\n+          this.productForm.reset();\r\n+           this.checker = 'submitted'; // Reset checker\r\n+        },\r\n+        error: (err) => {\r\n+          console.error(' Error creating product:', err);\r\n+          alert('Failed to create product.');\r\n+        },\r\n+      });\r\n+    }\r\n+  } else {\r\n+    this.markFormGroupTouched(this.productForm);\r\n+    console.warn(' Form Invalid');\r\n+  }\r\n+}\r\n+\r\n+\r\n+\r\n+  markFormGroupTouched(formGroup: FormGroup | FormArray) {\r\n+    (Object as any).values(formGroup.controls).forEach((control: any) => {\r\n+      if (control.controls) {\r\n+        this.markFormGroupTouched(control); // recurse\r\n+      } else {\r\n+        control.markAsTouched();\r\n+      }\r\n+    });\r\n+  }\r\n+\r\n+goToTab(index: number): void {\r\n+\r\n+  this.tabGroup.selectedIndex = index;\r\n+\r\n+  console.log('Tab changed to index:', this.tabGroup.selectedIndex);\r\n+}\r\n+\r\n+\r\n+\r\n+\r\n+patchFormData(product: any) {\r\n+  this.productIdToUpdate = product._id; // Set ID for update\r\n+\r\n+  this.productForm.patchValue({\r\n+    title: product.title,\r\n+    description: product.description,\r\n+    type: product.type,\r\n+    brand: product.brand,\r\n+    collection: product.collection,\r\n+    category: product.category,\r\n+    price: product.price,\r\n+    discount: product.discount,\r\n+    stock: product.stock,\r\n+    newProduct: product.new,\r\n+  });\r\n+\r\n+  this.imageDetails.clear();\r\n+\r\n+  product.images.forEach((image: any) => {\r\n+    const variants = product.variants.filter(\r\n+      (variant: any) => variant.image_id === image.image_id\r\n+    );\r\n+\r\n+    const variantFormGroups = variants.map((variant: any) =>\r\n+      this.fb.group({\r\n+        sku: [variant.sku, Validators.required],\r\n+        size: [variant.size, Validators.required],\r\n+        color: [variant.color, Validators.required],\r\n+      })\r\n+    );\r\n+\r\n+    const imageFormGroup = this.fb.group({\r\n+      alt: [image.alt, Validators.required],\r\n+      src: [`http://localhost:3000/${image.src}`, Validators.required],\r\n+      preview: [`http://localhost:3000/${image.src}`],\r\n+      'variant Details': this.fb.array(variantFormGroups, Validators.required),\r\n+    });\r\n+\r\n+    this.imageDetails.push(imageFormGroup);\r\n+  });\r\n+}\r\n+\r\n+\r\n+\r\n+\r\n+}\r\n"
                },
                {
                    "date": 1761409352206,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -226,87 +226,9 @@\n       reader.onerror = (error) => reject(error);\r\n     });\r\n   }\r\n \r\n-  // Submit() {\r\n-  //   if (this.productForm.valid) {\r\n-  //     const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n \r\n-  //     // Clean preview fields if present\r\n-  //     formData['images Details'].forEach((img: any) => {\r\n-  //       delete img.preview;\r\n-  //     });\r\n-\r\n-  //     // Static values\r\n-  //     formData.sale = true;\r\n-  //     formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n-\r\n-  //     // Call service\r\n-  //     this.productService.createProduct(formData).subscribe({\r\n-  //       next: (res) => {\r\n-  //         console.log(' Product created:', res);\r\n-  //         alert('Product created successfully!');\r\n-  //         this.productForm.reset();\r\n-  //       },\r\n-  //       error: (err) => {\r\n-  //         console.error(' Error creating product:', err);\r\n-  //         alert('Failed to create product.');\r\n-  //       },\r\n-  //     });\r\n-  //   } else {\r\n-  //     this.markFormGroupTouched(this.productForm);\r\n-  //     console.warn(' Form Invalid');\r\n-  //   }\r\n-  // }\r\n-\r\n-\r\n-//   Submit() {\r\n-//   if (this.productForm.valid) {\r\n-//     const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n-\r\n-//     // Clean up previews\r\n-//     formData['images Details'].forEach((img: any) => {\r\n-//       delete img.preview;\r\n-//     });\r\n-\r\n-//     formData.sale = true;\r\n-//     formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n-\r\n-//     if (this.productIdToUpdate) {\r\n-//       //  Update\r\n-//       this.productService.updateProduct(this.productIdToUpdate, formData).subscribe({\r\n-//         next: (res) => {\r\n-//           console.log(' Product updated:', res);\r\n-//           alert('Product updated successfully!');\r\n-//           this.productForm.reset();\r\n-//           this.productIdToUpdate = null; // Reset after update\r\n-//         },\r\n-//         error: (err) => {\r\n-//           console.error(' Error updating product:', err);\r\n-//           alert('Failed to update product.');\r\n-//         },\r\n-//       });\r\n-//     } else {\r\n-//       //  Create\r\n-//       this.productService.createProduct(formData).subscribe({\r\n-//         next: (res) => {\r\n-//           console.log(' Product created:', res);\r\n-//           alert('Product created successfully!');\r\n-//           this.productForm.reset();\r\n-//         },\r\n-//         error: (err) => {\r\n-//           console.error(' Error creating product:', err);\r\n-//           alert('Failed to create product.');\r\n-//         },\r\n-//       });\r\n-//     }\r\n-//   } else {\r\n-//     this.markFormGroupTouched(this.productForm);\r\n-//     console.warn(' Form Invalid');\r\n-//   }\r\n-// }\r\n-\r\n-\r\n Submit() {\r\n   console.log('Form Submitted:', this.productForm.value);\r\n   if (this.productForm.valid) {\r\n     this.checker = 'valid'\r\n@@ -428,431 +350,4 @@\n \r\n \r\n \r\n }\r\n-import {\r\n-  ChangeDetectorRef,\r\n-  Component,\r\n-  ElementRef,\r\n-  inject,\r\n-  signal,\r\n-  ViewChild,\r\n-} from '@angular/core';\r\n-import { MatSelectModule } from '@angular/material/select';\r\n-import { MatInputModule } from '@angular/material/input';\r\n-import { MatFormFieldModule } from '@angular/material/form-field';\r\n-import { MatIconModule } from '@angular/material/icon';\r\n-import { NgFor, NgIf } from '@angular/common';\r\n-import { MatExpansionModule } from '@angular/material/expansion';\r\n-import {\r\n-  FormArray,\r\n-  FormBuilder,\r\n-  FormControl,\r\n-  FormGroup,\r\n-  ReactiveFormsModule,\r\n-  Validators,\r\n-} from '@angular/forms';\r\n-import {\r\n-  MatChipEditedEvent,\r\n-  MatChipInputEvent,\r\n-  MatChipsModule,\r\n-} from '@angular/material/chips';\r\n-import { COMMA, ENTER } from '@angular/cdk/keycodes';\r\n-import { LiveAnnouncer } from '@angular/cdk/a11y';\r\n-import { Observable } from 'rxjs';\r\n-import { map, startWith } from 'rxjs/operators';\r\n-import { AsyncPipe } from '@angular/common';\r\n-import { MatAutocompleteModule } from '@angular/material/autocomplete';\r\n-import { MatButtonModule } from '@angular/material/button';\r\n-import { MatCardModule } from '@angular/material/card';\r\n-import { MatDividerModule } from '@angular/material/divider';\r\n-import { MatTabsModule, MatTabGroup } from '@angular/material/tabs';\r\n-import { ProductService } from '../../services/product.service';\r\n-import { ProductListComponent } from \"../product-list/product-list.component\";\r\n-\r\n-export interface Fruit {\r\n-  name: string;\r\n-}\r\n-@Component({\r\n-  selector: 'app-add-product',\r\n-  standalone: true,\r\n-  imports: [\r\n-    ReactiveFormsModule,\r\n-    NgFor,\r\n-    NgIf,\r\n-    MatTabsModule,\r\n-    MatCardModule,\r\n-    MatIconModule,\r\n-    MatFormFieldModule,\r\n-    MatInputModule,\r\n-    MatButtonModule,\r\n-    MatExpansionModule,\r\n-    MatChipsModule,\r\n-    MatAutocompleteModule,\r\n-    MatSelectModule,\r\n-    MatDividerModule,\r\n-    ProductListComponent\r\n-],\r\n-  templateUrl: './add-product.component.html',\r\n-  styleUrl: './add-product.component.scss',\r\n-})\r\n-export class AddProductComponent {\r\n-  productForm: FormGroup;\r\n-  productIdToUpdate: string | null = null;\r\n-  checker:any\r\n-  // @ViewChild('tabGroup') tabGroup!: MatTabGroup;\r\n-  @ViewChild('imageTabFocus', { static: false }) imageTabFocus!: ElementRef;\r\n-  @ViewChild('tabGroup') tabGroup!: MatTabGroup;\r\n-\r\n-\r\n-\r\n-\r\n-  imageUrl: any[] = [\r\n-    '../../../assts/add-img.webp',\r\n-    '../../../assts/add-img.webp',\r\n-    '../../../assts/add-img.webp',\r\n-    '../../../assts/add-img.webp',\r\n-  ];\r\n-\r\n-  typeArray = [\r\n-    { key: 'Homemade Products', value: 'Homemade Products' },\r\n-    { key: 'Fashion', value: 'fashion' },\r\n-    { key: 'Shoes', value: 'shoes' },\r\n-    { key: 'Bags', value: 'bags' },\r\n-    { key: 'Watch', value: 'watch' },\r\n-    { key: 'Flower', value: 'flower' },\r\n-    { key: 'Pets', value: 'pets' },\r\n-    { key: 'Electronics', value: 'electronics' },\r\n-    { key: 'Vegetables', value: 'vegetables' },\r\n-    { key: 'Furniture', value: 'furniture' },\r\n-    { key: 'Beauty', value: 'beauty' },\r\n-    { key: 'Tools', value: 'tools' },\r\n-    { key: 'Gym', value: 'gym' },\r\n-    { key: 'Marijuana', value: 'marijuana' },\r\n-  ];\r\n-\r\n-  brandArray = [\r\n-    { key: 'Dreamy Craft', value: 'Dreamy Craft' },\r\n-    { key: 'Nike', value: 'nike' },\r\n-    {key:'Iphone', value: 'iphone'},\r\n-    { key: 'samsung', value: 'samsung' },\r\n-    { key: 'Zara', value: 'zara' },\r\n-    { key: 'Denim', value: 'denim' },\r\n-    { key: 'Madame', value: 'madame' },\r\n-    { key: 'Biba', value: 'biba' },\r\n-    { key: 'Max', value: 'max' },\r\n-  ];\r\n-\r\n-  collectionArray = [\r\n-    { key: 'New products', value: 'new products' },\r\n-    { key: 'Best sellers', value: 'best sellers' },\r\n-    { key: 'Featured products', value: 'featured products' },\r\n-    { key: 'On sale', value: 'on sale' },\r\n-    { key: 'New arrival', value: 'new arrival' },\r\n-    { key: 'Trending product', value: 'trending product' },\r\n-  ];\r\n-\r\n-  categoryArray = [\r\n-    { key: 'Homemade Products', value: 'Homemade Products' },\r\n-    { key: 'Fashion', value: 'Women' },\r\n-    { key: 'Shoes', value: 'shoes' },\r\n-    { key: 'Bags', value: 'bags' },\r\n-    { key: 'Watch', value: 'watch' },\r\n-    { key: 'Flower', value: 'flower' },\r\n-    { key: 'Pets', value: 'pets' },\r\n-    { key: 'Electronics', value: 'electronics' },\r\n-    { key: 'Vegetables', value: 'vegetables' },\r\n-    { key: 'Furniture', value: 'furniture' },\r\n-    { key: 'Beauty', value: 'beauty' },\r\n-    { key: 'Tools', value: 'tools' },\r\n-    { key: 'Gym', value: 'gym' },\r\n-    { key: 'Marijuana', value: 'marijuana' },\r\n-  ];\r\n-skuOptions: string[] = ['SKU-001', 'SKU-002', 'SKU-003', 'SKU-004'];\r\n-  options: string[] = ['s', 'm', 'l', 'xl', 'xxl'];\r\n-  colors: string[] = ['yellow', 'white', 'pink', 'olive', 'navy', 'red'];\r\n-sizeOptions: string[] = ['XS', 'S', 'M', 'L', 'XL'];\r\n-colorOptions: string[] = ['Red', 'Blue', 'Green', 'Black', 'White', 'Yellow', 'Pink'];\r\n-\r\n-  constructor(private fb: FormBuilder, private productService: ProductService) {\r\n-    this.productForm = this.fb.group({\r\n-      title: ['', Validators.required],\r\n-      description: ['', Validators.required],\r\n-      type: ['', Validators.required],\r\n-      brand: ['', Validators.required],\r\n-      collection: [[], Validators.required],\r\n-      category: ['', Validators.required],\r\n-      price: ['', Validators.required],\r\n-      discount: ['', Validators.required],\r\n-      stock: ['', Validators.required],\r\n-      newProduct: [false, Validators.requiredTrue],\r\n-      'images Details': this.fb.array([], Validators.required),\r\n-    });\r\n-\r\n-    this.addImage(); // Add initial image entry\r\n-\r\n-\r\n-  }\r\n-\r\n-  get imageDetails(): FormArray {\r\n-    return this.productForm.get('images Details') as FormArray;\r\n-  }\r\n-\r\n-  newImage(): FormGroup {\r\n-    return this.fb.group({\r\n-      alt: ['image not found.', Validators.required],\r\n-      src: ['', Validators.required], // base64 string\r\n-      'variant Details': this.fb.array(\r\n-        [this.newVariant()],\r\n-        Validators.required\r\n-      ),\r\n-    });\r\n-  }\r\n-\r\n-  newVariant(): FormGroup {\r\n-    return this.fb.group({\r\n-      sku: ['', Validators.required],\r\n-      size: ['0', Validators.required],\r\n-      color: ['', Validators.required],\r\n-    });\r\n-  }\r\n-\r\n-  addImage() {\r\n-    this.imageDetails.push(this.newImage());\r\n-  }\r\n-\r\n-  removeImage(index: number) {\r\n-    this.imageDetails.removeAt(index);\r\n-  }\r\n-\r\n-  getVariants(imageIndex: number): FormArray {\r\n-    return this.imageDetails.at(imageIndex).get('variant Details') as FormArray;\r\n-  }\r\n-\r\n-  addVariant(imageIndex: number) {\r\n-    this.getVariants(imageIndex).push(this.newVariant());\r\n-  }\r\n-\r\n-  removeVariant(imageIndex: number, variantIndex: number) {\r\n-    this.getVariants(imageIndex).removeAt(variantIndex);\r\n-  }\r\n-\r\n-  async onFileChange(event: any, imageIndex: number) {\r\n-    const file = event.target.files[0];\r\n-    if (file) {\r\n-      const base64 = await this.convertToBase64(file);\r\n-      const group = this.imageDetails.at(imageIndex);\r\n-      group.patchValue({ src: base64, preview: base64 });\r\n-    }\r\n-  }\r\n-\r\n-  convertToBase64(file: File): Promise<string> {\r\n-    return new Promise((resolve, reject) => {\r\n-      const reader = new FileReader();\r\n-      reader.readAsDataURL(file);\r\n-      reader.onload = () => resolve(reader.result as string);\r\n-      reader.onerror = (error) => reject(error);\r\n-    });\r\n-  }\r\n-\r\n-  // Submit() {\r\n-  //   if (this.productForm.valid) {\r\n-  //     const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n-\r\n-  //     // Clean preview fields if present\r\n-  //     formData['images Details'].forEach((img: any) => {\r\n-  //       delete img.preview;\r\n-  //     });\r\n-\r\n-  //     // Static values\r\n-  //     formData.sale = true;\r\n-  //     formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n-\r\n-  //     // Call service\r\n-  //     this.productService.createProduct(formData).subscribe({\r\n-  //       next: (res) => {\r\n-  //         console.log(' Product created:', res);\r\n-  //         alert('Product created successfully!');\r\n-  //         this.productForm.reset();\r\n-  //       },\r\n-  //       error: (err) => {\r\n-  //         console.error(' Error creating product:', err);\r\n-  //         alert('Failed to create product.');\r\n-  //       },\r\n-  //     });\r\n-  //   } else {\r\n-  //     this.markFormGroupTouched(this.productForm);\r\n-  //     console.warn(' Form Invalid');\r\n-  //   }\r\n-  // }\r\n-\r\n-\r\n-//   Submit() {\r\n-//   if (this.productForm.valid) {\r\n-//     const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n-\r\n-//     // Clean up previews\r\n-//     formData['images Details'].forEach((img: any) => {\r\n-//       delete img.preview;\r\n-//     });\r\n-\r\n-//     formData.sale = true;\r\n-//     formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n-\r\n-//     if (this.productIdToUpdate) {\r\n-//       //  Update\r\n-//       this.productService.updateProduct(this.productIdToUpdate, formData).subscribe({\r\n-//         next: (res) => {\r\n-//           console.log(' Product updated:', res);\r\n-//           alert('Product updated successfully!');\r\n-//           this.productForm.reset();\r\n-//           this.productIdToUpdate = null; // Reset after update\r\n-//         },\r\n-//         error: (err) => {\r\n-//           console.error(' Error updating product:', err);\r\n-//           alert('Failed to update product.');\r\n-//         },\r\n-//       });\r\n-//     } else {\r\n-//       //  Create\r\n-//       this.productService.createProduct(formData).subscribe({\r\n-//         next: (res) => {\r\n-//           console.log(' Product created:', res);\r\n-//           alert('Product created successfully!');\r\n-//           this.productForm.reset();\r\n-//         },\r\n-//         error: (err) => {\r\n-//           console.error(' Error creating product:', err);\r\n-//           alert('Failed to create product.');\r\n-//         },\r\n-//       });\r\n-//     }\r\n-//   } else {\r\n-//     this.markFormGroupTouched(this.productForm);\r\n-//     console.warn(' Form Invalid');\r\n-//   }\r\n-// }\r\n-\r\n-\r\n-Submit() {\r\n-  console.log('Form Submitted:', this.productForm.value);\r\n-  if (this.productForm.valid) {\r\n-    this.checker = 'valid'\r\n-    const formData = JSON.parse(JSON.stringify(this.productForm.value));\r\n-\r\n-    formData['images Details'].forEach((img: any) => {\r\n-      // Remove preview key if present\r\n-      delete img.preview;\r\n-\r\n-      //  Normalize `src` to relative path if it's a full URL\r\n-      if (img.src && typeof img.src === 'string' && img.src.startsWith('http://localhost:3000/')) {\r\n-        img.src = img.src.replace(/^http:\\/\\/localhost:3000\\//, '');\r\n-      }\r\n-    });\r\n-\r\n-    formData.sale = true;\r\n-    formData.tags = ['s', 'm', 'pink', 'blue', 'biba'];\r\n-\r\n-    if (this.productIdToUpdate) {\r\n-      //  Update\r\n-      this.productService.updateProduct(this.productIdToUpdate, formData).subscribe({\r\n-        next: (res) => {\r\n-          console.log(' Product updated:', res);\r\n-          alert('Product updated successfully!');\r\n-          this.productForm.reset();\r\n-          this.productIdToUpdate = null;\r\n-          this.checker = 'submitted'; // Reset checker\r\n-        },\r\n-        error: (err) => {\r\n-          console.error(' Error updating product:', err);\r\n-          alert('Failed to update product.');\r\n-        },\r\n-      });\r\n-    } else {\r\n-      //  Create\r\n-      this.productService.createProduct(formData).subscribe({\r\n-        next: (res) => {\r\n-          console.log(' Product created:', res);\r\n-          alert('Product created successfully!');\r\n-          this.productForm.reset();\r\n-           this.checker = 'submitted'; // Reset checker\r\n-        },\r\n-        error: (err) => {\r\n-          console.error(' Error creating product:', err);\r\n-          alert('Failed to create product.');\r\n-        },\r\n-      });\r\n-    }\r\n-  } else {\r\n-    this.markFormGroupTouched(this.productForm);\r\n-    console.warn(' Form Invalid');\r\n-  }\r\n-}\r\n-\r\n-\r\n-\r\n-  markFormGroupTouched(formGroup: FormGroup | FormArray) {\r\n-    (Object as any).values(formGroup.controls).forEach((control: any) => {\r\n-      if (control.controls) {\r\n-        this.markFormGroupTouched(control); // recurse\r\n-      } else {\r\n-        control.markAsTouched();\r\n-      }\r\n-    });\r\n-  }\r\n-\r\n-goToTab(index: number): void {\r\n-\r\n-  this.tabGroup.selectedIndex = index;\r\n-\r\n-  console.log('Tab changed to index:', this.tabGroup.selectedIndex);\r\n-}\r\n-\r\n-\r\n-\r\n-\r\n-patchFormData(product: any) {\r\n-  this.productIdToUpdate = product._id; // Set ID for update\r\n-\r\n-  this.productForm.patchValue({\r\n-    title: product.title,\r\n-    description: product.description,\r\n-    type: product.type,\r\n-    brand: product.brand,\r\n-    collection: product.collection,\r\n-    category: product.category,\r\n-    price: product.price,\r\n-    discount: product.discount,\r\n-    stock: product.stock,\r\n-    newProduct: product.new,\r\n-  });\r\n-\r\n-  this.imageDetails.clear();\r\n-\r\n-  product.images.forEach((image: any) => {\r\n-    const variants = product.variants.filter(\r\n-      (variant: any) => variant.image_id === image.image_id\r\n-    );\r\n-\r\n-    const variantFormGroups = variants.map((variant: any) =>\r\n-      this.fb.group({\r\n-        sku: [variant.sku, Validators.required],\r\n-        size: [variant.size, Validators.required],\r\n-        color: [variant.color, Validators.required],\r\n-      })\r\n-    );\r\n-\r\n-    const imageFormGroup = this.fb.group({\r\n-      alt: [image.alt, Validators.required],\r\n-      src: [`http://localhost:3000/${image.src}`, Validators.required],\r\n-      preview: [`http://localhost:3000/${image.src}`],\r\n-      'variant Details': this.fb.array(variantFormGroups, Validators.required),\r\n-    });\r\n-\r\n-    this.imageDetails.push(imageFormGroup);\r\n-  });\r\n-}\r\n-\r\n-\r\n-\r\n-\r\n-}\r\n"
                },
                {
                    "date": 1761409470751,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -318,8 +318,12 @@\n     price: product.price,\r\n     discount: product.discount,\r\n     stock: product.stock,\r\n     newProduct: product.new,\r\n+        length: product.dimensions?.length || 0,\r\n+    breadth: product.dimensions?.breadth || 0,\r\n+    height: product.dimensions?.height || 0,\r\n+    weight: product.dimensions?.weight || 0\r\n   });\r\n \r\n   this.imageDetails.clear();\r\n \r\n"
                }
            ],
            "date": 1749782917810,
            "name": "Commit-0",
            "content": "import { ChangeDetectorRef, Component, ElementRef, inject, signal, ViewChild } from '@angular/core';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon'\r\nimport { NgFor } from '@angular/common';\r\nimport { MatExpansionModule } from '@angular/material/expansion';\r\nimport { FormBuilder, FormControl, FormGroup, ReactiveFormsModule, Validators } from '@angular/forms';\r\nimport {MatChipEditedEvent, MatChipInputEvent, MatChipsModule} from '@angular/material/chips';\r\nimport {COMMA, ENTER} from '@angular/cdk/keycodes';\r\nimport { LiveAnnouncer } from '@angular/cdk/a11y';\r\nimport {Observable} from 'rxjs';\r\nimport {map, startWith} from 'rxjs/operators';\r\nimport {AsyncPipe} from '@angular/common';\r\nimport {MatAutocompleteModule} from '@angular/material/autocomplete';\r\nexport interface Fruit {\r\n  name: string;\r\n}\r\n@Component({\r\n  selector: 'app-add-product',\r\n  standalone: true,\r\n  imports: [MatFormFieldModule, MatInputModule, AsyncPipe, MatAutocompleteModule, MatInputModule, MatIconModule, MatChipsModule, MatIconModule, MatSelectModule, NgFor, MatExpansionModule, ReactiveFormsModule],\r\n  templateUrl: './add-product.component.html',\r\n  styleUrl: './add-product.component.scss'\r\n})\r\nexport class AddProductComponent {\r\n  @ViewChild('fileInput') el!: ElementRef;\r\n  imageUrl: any = [\"../../../assts/add-img.webp\",\"../../../assts/add-img.webp\",\"../../../assts/add-img.webp\",\"../../../assts/add-img.webp\"];\r\n  registrationForm!: FormGroup\r\n  editFile: boolean = true;\r\n  removeUpload: boolean = false;\r\n    readonly addOnBlur = true;\r\n  readonly separatorKeysCodes = [ENTER, COMMA] as const;\r\n  readonly fruits = signal<any[]>([{name: 'Lemon'}, {name: 'Lime'}, {name: 'Apple'}]);\r\n  readonly announcer = inject(LiveAnnouncer);\r\n  productForm!: FormGroup;\r\n    myControl = new FormControl('');\r\n        myControl1 = new FormControl('');\r\n  options: string[] = ['s', 'm', 'l', 'xl', 'xxl'];\r\n  colors: string[] = ['yellow','white','pink','olive','navy','red']\r\n  filteredOptions!: Observable<string[]>;\r\n  filteredColors!: Observable<string[]>;\r\n  constructor(private fb: FormBuilder, private cd: ChangeDetectorRef) {\r\nthis.productForm = this.fb.group({\r\n      title: ['', Validators.required],\r\n      description: [''],\r\n      type: [''],\r\n      brand: [''],\r\n      collection: [[]],\r\n      category: [''],\r\n      price: [''],\r\n      discount: [''],\r\n      stock: [''],\r\n      newProduct: [false]\r\n    });\r\n  }\r\n\r\n  typeArray = [\r\n    { key: 'Fashion', value: 'fashion' },\r\n    { key: 'Shoes', value: 'shoes' },\r\n    { key: 'Bags', value: 'bags' },\r\n    { key: 'Watch', value: 'watch' },\r\n    { key: 'Flower', value: 'flower' },\r\n    { key: 'Pets', value: 'pets' },\r\n    { key: 'Electronics', value: 'electronics' },\r\n    { key: 'Vegetables', value: 'vegetables' },\r\n    { key: 'Furniture', value: 'furniture' },\r\n    { key: 'Beauty', value: 'beauty' },\r\n    { key: 'Tools', value: 'tools' },\r\n    { key: 'Gym', value: 'gym' },\r\n    { key: 'Marijuana', value: 'marijuana' },\r\n  ]\r\n\r\n  brandArray = [\r\n    { key: 'Nike', value: 'nike' },\r\n    { key: 'Zara', value: 'zara' },\r\n    { key: 'Denim', value: 'denim' },\r\n    { key: 'Madame', value: 'madame' },\r\n    { key: 'Biba', value: 'biba' },\r\n    { key: 'Max', value: 'max' },\r\n  ]\r\n\r\n  collectionArray = [\r\n    { key: 'New products', value: 'new products' },\r\n    { key: 'Best sellers', value: 'best sellers' },\r\n    { key: 'Featured products', value: 'featured products' },\r\n    { key: 'On sale', value: 'on sale' },\r\n    { key: 'New arrival', value: 'new arrival' },\r\n    { key: 'Trending product', value: 'trending product' },\r\n  ]\r\n  categoryArray = [\r\n    { key: 'Fashion', value: 'Women' },\r\n    { key: 'Shoes', value: 'shoes' },\r\n    { key: 'Bags', value: 'bags' },\r\n    { key: 'Watch', value: 'watch' },\r\n    { key: 'Flower', value: 'flower' },\r\n    { key: 'Pets', value: 'pets' },\r\n    { key: 'Electronics', value: 'electronics' },\r\n    { key: 'Vegetables', value: 'vegetables' },\r\n    { key: 'Furniture', value: 'furniture' },\r\n    { key: 'Beauty', value: 'beauty' },\r\n    { key: 'Tools', value: 'tools' },\r\n    { key: 'Gym', value: 'gym' },\r\n    { key: 'Marijuana', value: 'marijuana' },\r\n  ]\r\n\r\n    ngOnInit() {\r\n    this.filteredOptions = this.myControl.valueChanges.pipe(\r\n      startWith(''),\r\n      map(value => this._filter(value || '')),\r\n    );\r\n\r\n        this.filteredColors = this.myControl1.valueChanges.pipe(\r\n      startWith(''),\r\n      map(value => this._filter1(value || '')),\r\n    );\r\n  }\r\n\r\n  private _filter(value: string): string[] {\r\n    const filterValue = value.toLowerCase();\r\n\r\n    return this.options.filter(option => option.toLowerCase().includes(filterValue));\r\n  }\r\n\r\n    private _filter1(value: string): string[] {\r\n    const filterValue = value.toLowerCase();\r\n\r\n    return this.colors.filter(option => option.toLowerCase().includes(filterValue));\r\n  }\r\n\r\n  uploadFile(event: any) {\r\n    let reader = new FileReader(); // HTML5 FileReader API\r\n    let file = event.target.files[0];\r\n    if (event.target.files && event.target.files[0]) {\r\n      reader.readAsDataURL(file);\r\n\r\n      // When file uploads set it to file formcontrol\r\n      reader.onload = () => {\r\n        this.imageUrl = reader.result;\r\n        this.registrationForm.patchValue({\r\n          file: reader.result\r\n        });\r\n        this.editFile = false;\r\n        this.removeUpload = true;\r\n      }\r\n      // ChangeDetectorRef since file is loading outside the zone\r\n      this.cd.markForCheck();\r\n    }\r\n  }\r\n\r\n\r\n   add(event: MatChipInputEvent): void {\r\n    const value = (event.value || '').trim();\r\n\r\n    // Add our fruit\r\n    if (value) {\r\n      this.fruits.update(fruits => [...fruits, {name: value}]);\r\n    }\r\n\r\n    // Clear the input value\r\n    event.chipInput!.clear();\r\n  }\r\n\r\n  remove(fruit: Fruit): void {\r\n    this.fruits.update(fruits => {\r\n      const index = fruits.indexOf(fruit);\r\n      if (index < 0) {\r\n        return fruits;\r\n      }\r\n\r\n      fruits.splice(index, 1);\r\n      this.announcer.announce(`Removed ${fruit.name}`);\r\n      return [...fruits];\r\n    });\r\n  }\r\n\r\n  edit(fruit: Fruit, event: MatChipEditedEvent) {\r\n    const value = event.value.trim();\r\n\r\n    // Remove fruit if it no longer has a name\r\n    if (!value) {\r\n      this.remove(fruit);\r\n      return;\r\n    }\r\n\r\n    // Edit existing fruit\r\n    this.fruits.update(fruits => {\r\n      const index = fruits.indexOf(fruit);\r\n      if (index >= 0) {\r\n        fruits[index].name = value;\r\n        return [...fruits];\r\n      }\r\n      return fruits;\r\n    });\r\n  }\r\n\r\n\r\n  jsonTest(){\r\n    \r\n  }\r\n}\r\n"
        }
    ]
}